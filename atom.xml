<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lilinzta&#39;s blog</title>
  
  
  <link href="https://lilinzta.github.io/atom.xml" rel="self"/>
  
  <link href="https://lilinzta.github.io/"/>
  <updated>2024-01-20T11:48:08.663Z</updated>
  <id>https://lilinzta.github.io/</id>
  
  <author>
    <name>Haotian Li</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Arch Linux å®‰è£… qemu</title>
    <link href="https://lilinzta.github.io/2024/01/20/Arch-Linux-%E5%AE%89%E8%A3%85-qemu/"/>
    <id>https://lilinzta.github.io/2024/01/20/Arch-Linux-%E5%AE%89%E8%A3%85-qemu/</id>
    <published>2024-01-20T11:28:25.000Z</published>
    <updated>2024-01-20T11:48:08.663Z</updated>
    
    
    
    
    
    <category term="Arch Linux" scheme="https://lilinzta.github.io/tags/Arch-Linux/"/>
    
  </entry>
  
  <entry>
    <title>Raspberry Pi 4 å®‰è£…ç³»ç»Ÿ</title>
    <link href="https://lilinzta.github.io/2023/12/12/Raspberry-Pi-4-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F/"/>
    <id>https://lilinzta.github.io/2023/12/12/Raspberry-Pi-4-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-12-12T14:42:36.000Z</published>
    <updated>2024-01-17T15:05:42.365Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å…¥æ‰‹äº†ä¸€ä¸ªæ ‘è“æ´¾4B 4GB, åˆ†äº«ä¸€ä¸‹åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶çš„ç»éªŒ.</p><span id="more"></span><h2 id="1-å®˜æ–¹æ¨èæ–¹å¼"><a href="#1-å®˜æ–¹æ¨èæ–¹å¼" class="headerlink" title="1.å®˜æ–¹æ¨èæ–¹å¼"></a>1.å®˜æ–¹æ¨èæ–¹å¼</h2><p>ä¸‹è½½å®˜æ–¹çš„çƒ§å†™å·¥å…·ï¼Œå®ƒä¼šè‡ªåŠ¨æ›¿ä½ ä¸‹è½½é•œåƒæ–‡ä»¶ï¼Œè¿˜æ”¯æŒæ·»åŠ ä¸€äº›è‡ªå®šä¹‰é…ç½®ï¼Œæ¯”å¦‚ç”¨æˆ·åå’Œå¯†ç ï¼Œwifi å’Œ ssh.</p><p>é€‚åˆåªæœ‰ä¸€å°ç”µè„‘å’Œä¸€ä¸ªæ ‘è“æ´¾çš„æƒ…å†µ.</p><blockquote><p>æˆ‘æ˜¯å› ä¸ºæ ¡å›­ç½‘çš„åŸå› ï¼Œåªèƒ½ä½¿ç”¨ç”µè„‘å¼€çƒ­ç‚¹ï¼Œè®©æ ‘è“æ´¾å»è¿.</p></blockquote><p>å¦‚æœä½ åœ¨ GNU&#x2F;Linux ä¸‹å¼€çƒ­ç‚¹é‡åˆ°å›°éš¾ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„è¿™ä¸ªè„šæœ¬(å¾ˆä¹…ä¹‹å‰ç½‘ä¸Šæ‰¾çš„)ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br>sudo iw phy phy0 interface add wlan0_ap <span class="hljs-built_in">type</span> managed addr 12:34:56:ab:<span class="hljs-built_in">cd</span>:ef<br><br>sudo create_ap -c 11 wlan0_ap wlan0 NAME PASSWD &gt;/dev/null &amp;<br></code></pre></td></tr></table></figure><h2 id="2-å®‰è£…å…¶å®ƒçš„GNU-Linux-ARM-ç‰ˆæœ¬"><a href="#2-å®‰è£…å…¶å®ƒçš„GNU-Linux-ARM-ç‰ˆæœ¬" class="headerlink" title="2.å®‰è£…å…¶å®ƒçš„GNU&#x2F;Linux ARM ç‰ˆæœ¬"></a>2.å®‰è£…å…¶å®ƒçš„GNU&#x2F;Linux ARM ç‰ˆæœ¬</h2><p>æ–‡æ¡£éƒ½å¾ˆè¯¦ç»†ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†.</p><h3 id="Kali-Linux-ARM"><a href="#Kali-Linux-ARM" class="headerlink" title="Kali Linux ARM"></a><a href="https://www.kali.org/docs/arm/raspberry-pi-4/">Kali Linux ARM</a></h3><h3 id="Arch-Linux-ARM"><a href="#Arch-Linux-ARM" class="headerlink" title="Arch Linux ARM"></a><a href="https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-4">Arch Linux ARM</a></h3><h2 id="3-TODO"><a href="#3-TODO" class="headerlink" title="3.TODO"></a>3.TODO</h2><p>32bit å’Œ 64bit çš„ç³»ç»Ÿéƒ½è¯•è¿‡ï¼Œç›®å‰è¿˜æ²¡æœ‰é€šè¿‡HDMIæ¥æ˜¾ç¤ºå™¨è¿›å…¥è¿‡æ¡Œé¢ç¯å¢ƒ.</p><p>æ”¾å‡å›å®¶ä¹‹åæ ‘è“æ´¾èƒ½ç›´æ¥æ’è·¯ç”±å™¨ä¸Šï¼Œå°±èƒ½è£… Arch Linux ARM äº†ğŸ˜€.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘å…¥æ‰‹äº†ä¸€ä¸ªæ ‘è“æ´¾4B 4GB, åˆ†äº«ä¸€ä¸‹åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶çš„ç»éªŒ.&lt;/p&gt;</summary>
    
    
    
    
    <category term="Raspberry Pi 4" scheme="https://lilinzta.github.io/tags/Raspberry-Pi-4/"/>
    
  </entry>
  
  <entry>
    <title>äººå·¥æ™ºèƒ½æŠ€æœ¯ lab4(MNISTæ‰‹å†™æ•°å­—è¯†åˆ«)</title>
    <link href="https://lilinzta.github.io/2023/11/26/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab4-MNIST%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB/"/>
    <id>https://lilinzta.github.io/2023/11/26/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab4-MNIST%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB/</id>
    <published>2023-11-26T02:19:32.000Z</published>
    <updated>2024-01-20T11:31:59.243Z</updated>
    
    <content type="html"><![CDATA[<h2 id="source-code-and-requirements"><a href="#source-code-and-requirements" class="headerlink" title="source code and requirements"></a><a href="https://github.com/Lilinzta/ai">source code and requirements</a></h2><h2 id="0-å®éªŒç¯å¢ƒ"><a href="#0-å®éªŒç¯å¢ƒ" class="headerlink" title="0.å®éªŒç¯å¢ƒ"></a>0.å®éªŒç¯å¢ƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">OS: Arch Linux(rolling)<br>LANG: Python 3.11.5<br></code></pre></td></tr></table></figure><h2 id="4-è¿è¡Œ"><a href="#4-è¿è¡Œ" class="headerlink" title="4.è¿è¡Œ"></a>4.è¿è¡Œ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python another_lab4/main.py<br></code></pre></td></tr></table></figure><blockquote><p>another_lab4&#x2F;main.py</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> DataLoader<br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms<br><span class="hljs-keyword">from</span> torchvision.datasets <span class="hljs-keyword">import</span> MNIST<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Net</span>(torch.nn.Module):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        self.fc1 = torch.nn.Linear(<span class="hljs-number">28</span>*<span class="hljs-number">28</span>, <span class="hljs-number">64</span>)<br>        self.fc2 = torch.nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">64</span>)<br>        self.fc3 = torch.nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">64</span>)<br>        self.fc4 = torch.nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">10</span>)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        x = torch.nn.functional.relu(self.fc1(x))<br>        x = torch.nn.functional.relu(self.fc2(x))<br>        x = torch.nn.functional.relu(self.fc3(x))<br>        x = torch.nn.functional.log_softmax(self.fc4(x), dim=<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> x<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data_loader</span>(<span class="hljs-params">is_train</span>):<br>    to_tensor = transforms.Compose([transforms.ToTensor()])<br>    data_set = MNIST(<span class="hljs-string">&quot;&quot;</span>, is_train, transform=to_tensor, download=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> DataLoader(data_set, batch_size=<span class="hljs-number">15</span>, shuffle=<span class="hljs-literal">True</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate</span>(<span class="hljs-params">test_data, net</span>):<br>    n_correct = <span class="hljs-number">0</span><br>    n_total = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> test_data:<br>            outputs = net.forward(x.view(-<span class="hljs-number">1</span>, <span class="hljs-number">28</span>*<span class="hljs-number">28</span>))<br>            <span class="hljs-keyword">for</span> i, output <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(outputs):<br>                <span class="hljs-keyword">if</span> torch.argmax(output) == y[i]:<br>                    n_correct += <span class="hljs-number">1</span><br>                n_total += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> n_correct / n_total<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br><br>    train_data = get_data_loader(is_train=<span class="hljs-literal">True</span>)<br>    test_data = get_data_loader(is_train=<span class="hljs-literal">False</span>)<br>    net = Net()<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;initial accuracy:&quot;</span>, evaluate(test_data, net))<br>    optimizer = torch.optim.Adam(net.parameters(), lr=<span class="hljs-number">0.001</span>)<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>        <span class="hljs-keyword">for</span> (x, y) <span class="hljs-keyword">in</span> train_data:<br>            net.zero_grad()<br>            output = net.forward(x.view(-<span class="hljs-number">1</span>, <span class="hljs-number">28</span>*<span class="hljs-number">28</span>))<br>            loss = torch.nn.functional.nll_loss(output, y)<br>            loss.backward()<br>            optimizer.step()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;epoch&quot;</span>, epoch, <span class="hljs-string">&quot;accuracy:&quot;</span>, evaluate(test_data, net))<br><br>    <span class="hljs-keyword">for</span> (n, (x, _)) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(test_data):<br>        <span class="hljs-keyword">if</span> n &gt; <span class="hljs-number">3</span>:<br>            <span class="hljs-keyword">break</span><br>        predict = torch.argmax(net.forward(x[<span class="hljs-number">0</span>].view(-<span class="hljs-number">1</span>, <span class="hljs-number">28</span>*<span class="hljs-number">28</span>)))<br>        plt.figure(n)<br>        plt.imshow(x[<span class="hljs-number">0</span>].view(<span class="hljs-number">28</span>, <span class="hljs-number">28</span>))<br>        plt.title(<span class="hljs-string">&quot;prediction: &quot;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-built_in">int</span>(predict)))<br>    plt.show()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h2 id="5-å®éªŒç»“æœ"><a href="#5-å®éªŒç»“æœ" class="headerlink" title="5.å®éªŒç»“æœ"></a>5.å®éªŒç»“æœ</h2><img src=/res/post/ai/another_lab4-result.jpg width=100% />]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;source-code-and-requirements&quot;&gt;&lt;a href=&quot;#source-code-and-requirements&quot; class=&quot;headerlink&quot; title=&quot;source code and requirements&quot;&gt;&lt;/a&gt;&lt;a</summary>
      
    
    
    
    <category term="lab" scheme="https://lilinzta.github.io/categories/lab/"/>
    
    
    <category term="äººå·¥æ™ºèƒ½æŠ€æœ¯" scheme="https://lilinzta.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>äººå·¥æ™ºèƒ½æŠ€æœ¯ lab3(åŸºäºçº¿æ€§å›å½’çš„é¢„æµ‹)</title>
    <link href="https://lilinzta.github.io/2023/11/26/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab3-%E5%9F%BA%E4%BA%8E%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E7%9A%84%E9%A2%84%E6%B5%8B/"/>
    <id>https://lilinzta.github.io/2023/11/26/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab3-%E5%9F%BA%E4%BA%8E%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E7%9A%84%E9%A2%84%E6%B5%8B/</id>
    <published>2023-11-26T02:04:38.000Z</published>
    <updated>2024-01-20T11:31:54.323Z</updated>
    
    <content type="html"><![CDATA[<h2 id="source-code-and-requirements"><a href="#source-code-and-requirements" class="headerlink" title="source code and requirements"></a><a href="https://github.com/Lilinzta/ai">source code and requirements</a></h2><h2 id="0-å®éªŒç¯å¢ƒ"><a href="#0-å®éªŒç¯å¢ƒ" class="headerlink" title="0.å®éªŒç¯å¢ƒ"></a>0.å®éªŒç¯å¢ƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">OS: Arch Linux(rolling)<br>LANG: Python 3.11.5<br></code></pre></td></tr></table></figure><h2 id="4-è¿è¡Œ"><a href="#4-è¿è¡Œ" class="headerlink" title="4.è¿è¡Œ"></a>4.è¿è¡Œ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python lab3/main.py<br></code></pre></td></tr></table></figure><blockquote><p>lab3&#x2F;main.py</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯¼å…¥å¿…è¦çš„åº“</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> fetch_california_housing<br><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> linearregression<br><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br><br>    <span class="hljs-comment"># åŠ è½½åŠ åˆ©ç¦å°¼äºšå·æˆ¿ä»·æ•°æ®é›†</span><br>    housing_22 = fetch_california_housing()<br>    x_22, y_22 = housing_22.data, housing_22.target<br><br>    <span class="hljs-comment"># åˆ’åˆ†æ•°æ®é›†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span><br>    x_train_22, x_test_22, y_train_22, y_test_22 = train_test_split(<br>        x_22, y_22, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">42</span>)<br><br>    <span class="hljs-comment"># åˆå§‹åŒ–çº¿æ€§å›å½’æ¨¡å‹</span><br>    model_22 = linearregression()<br><br>    <span class="hljs-comment"># è®­ç»ƒæ¨¡å‹</span><br>    model_22.fit(x_train_22, y_train_22)<br><br>    <span class="hljs-comment"># åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œé¢„æµ‹</span><br>    y_pred_22 = model_22.predict(x_test_22)<br><br>    <span class="hljs-comment"># è¯„ä¼°æ¨¡å‹æ€§èƒ½</span><br>    mse_22 = mean_squared_error(y_test_22, y_pred_22)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;mean squared error on test set: <span class="hljs-subst">&#123;mse_22&#125;</span>&#x27;</span>)<br><br>    <span class="hljs-comment"># ç»˜åˆ¶çœŸå®å€¼ä¸é¢„æµ‹å€¼çš„å¯¹æ¯”å›¾</span><br>    plt.scatter(y_test_22, y_pred_22)<br>    plt.xlabel(<span class="hljs-string">&#x27;true values&#x27;</span>)<br>    plt.ylabel(<span class="hljs-string">&#x27;predictions&#x27;</span>)<br>    plt.title(<span class="hljs-string">&#x27;true values vs. predictions&#x27;</span>)<br>    plt.show()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br><br></code></pre></td></tr></table></figure><h2 id="5-å®éªŒç»“æœ"><a href="#5-å®éªŒç»“æœ" class="headerlink" title="5.å®éªŒç»“æœ"></a>5.å®éªŒç»“æœ</h2><img src=/res/post/ai/lab3-result.jpg width=100% />]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;source-code-and-requirements&quot;&gt;&lt;a href=&quot;#source-code-and-requirements&quot; class=&quot;headerlink&quot; title=&quot;source code and requirements&quot;&gt;&lt;/a&gt;&lt;a</summary>
      
    
    
    
    <category term="lab" scheme="https://lilinzta.github.io/categories/lab/"/>
    
    
    <category term="äººå·¥æ™ºèƒ½æŠ€æœ¯" scheme="https://lilinzta.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>äººå·¥æ™ºèƒ½æŠ€æœ¯ lab2(K-Means)</title>
    <link href="https://lilinzta.github.io/2023/11/16/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab2(K-Means)/"/>
    <id>https://lilinzta.github.io/2023/11/16/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab2(K-Means)/</id>
    <published>2023-11-16T09:49:40.000Z</published>
    <updated>2024-01-20T11:31:48.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="source-code-and-requirements"><a href="#source-code-and-requirements" class="headerlink" title="source code and requirements"></a><a href="https://github.com/Lilinzta/ai">source code and requirements</a></h2><h2 id="0-å®éªŒç¯å¢ƒ"><a href="#0-å®éªŒç¯å¢ƒ" class="headerlink" title="0.å®éªŒç¯å¢ƒ"></a>0.å®éªŒç¯å¢ƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">OS: Arch Linux(rolling)<br>LANG: Python 3.11.5<br></code></pre></td></tr></table></figure><h2 id="4-è¿è¡Œ"><a href="#4-è¿è¡Œ" class="headerlink" title="4.è¿è¡Œ"></a>4.è¿è¡Œ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python lab2/main.py<br></code></pre></td></tr></table></figure><blockquote><p>lab2&#x2F;main.py</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Source: https://scikit-learn.org/stable/auto_examples/cluster/plot_kmeans_digits.html</span><br><br><span class="hljs-comment"># å¯¼å…¥å¿…è¦çš„åº“</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_digits<br><span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA<br><span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> KMeans<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># ä½¿ç”¨load_digits()åŠ è½½æ•°å­—æ•°æ®é›†ï¼Œå¹¶æå–ç‰¹å¾å’Œæ ‡ç­¾ã€‚ç¡®å®šäº†æ ·æœ¬æ•°ã€ç‰¹å¾æ•°å’Œå”¯ä¸€æ ‡ç­¾çš„æ•°é‡ã€‚</span><br>data_22, labels_22 = load_digits(return_X_y=<span class="hljs-literal">True</span>)<br>(n_samples, n_features), n_digits_22 = data_22.shape, np.unique(labels_22).size<br><br><span class="hljs-comment"># ä½¿ç”¨PCAå°†æ•°æ®çš„ç»´åº¦å‡å°‘ä¸º2ä¸ªï¼Œä»¥ä¾¿è¿›è¡Œå¯è§†åŒ–ã€‚</span><br>reduced_data_22 = PCA(n_components=<span class="hljs-number">2</span>).fit_transform(data_22)<br><br><span class="hljs-comment"># åœ¨å‡å°‘çš„æ•°æ®ä¸Šåº”ç”¨Kå‡å€¼ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª2Dæ•£ç‚¹å›¾ä»¥å¯è§†åŒ–èšç±»ã€‚</span><br>kmeans_22 = KMeans(init=<span class="hljs-string">&quot;k-means++&quot;</span>, n_clusters=n_digits_22, n_init=<span class="hljs-number">4</span>)<br>kmeans_22.fit(reduced_data_22)<br><br><span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªç½‘æ ¼ä¸­çš„ç‚¹çš„æ­¥é•¿</span><br>h = <span class="hljs-number">0.02</span><br><br>x_min, x_max = reduced_data_22[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, reduced_data_22[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span><br>y_min, y_max = reduced_data_22[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, reduced_data_22[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span><br><br><span class="hljs-comment"># ç”Ÿæˆä¸€ä¸ªç½‘æ ¼ï¼Œä»¥ä¾¿åœ¨å›¾ä¸­å¯è§†åŒ–èšç±»çš„ç»“æœ</span><br>xx_22, yy_22 = np.meshgrid(np.arange(x_min, x_max, h),<br>                           np.arange(y_min, y_max, h))<br><br>Z = kmeans_22.predict(np.c_[xx_22.ravel(), yy_22.ravel()])<br><br>Z = Z.reshape(xx_22.shape)<br>plt.figure(<span class="hljs-number">1</span>)<br>plt.clf()<br><br><span class="hljs-comment"># åœ¨2Dç©ºé—´ä¸Šç»˜åˆ¶èšç±»ç»“æœï¼Œç”¨ç™½è‰²åå­—æ ‡è®°èšç±»ä¸­å¿ƒã€‚</span><br>plt.imshow(Z,<br>           interpolation=<span class="hljs-string">&quot;nearest&quot;</span>,<br>           extent=(xx_22.<span class="hljs-built_in">min</span>(),<br>                   xx_22.<span class="hljs-built_in">max</span>(),<br>                   yy_22.<span class="hljs-built_in">min</span>(),<br>                   yy_22.<span class="hljs-built_in">max</span>()),<br>           cmap=plt.cm.Paired,<br>           aspect=<span class="hljs-string">&quot;auto&quot;</span>,<br>           origin=<span class="hljs-string">&quot;lower&quot;</span>,)<br><br>plt.plot(reduced_data_22[:, <span class="hljs-number">0</span>], reduced_data_22[:, <span class="hljs-number">1</span>], <span class="hljs-string">&quot;k.&quot;</span>, markersize=<span class="hljs-number">2</span>)<br>centroids = kmeans_22.cluster_centers_<br>plt.scatter(centroids[:, <span class="hljs-number">0</span>],<br>            centroids[:, <span class="hljs-number">1</span>],<br>            marker=<span class="hljs-string">&quot;x&quot;</span>,<br>            s=<span class="hljs-number">169</span>,<br>            linewidths=<span class="hljs-number">3</span>,<br>            color=<span class="hljs-string">&quot;w&quot;</span>,<br>            zorder=<span class="hljs-number">10</span>)<br>plt.title(<br>    <span class="hljs-string">&quot;K-means clustering on the digits dataset (PCA-reduced data)\n&quot;</span><br>    <span class="hljs-string">&quot;Centroids are marked with white cross&quot;</span><br>)<br>plt.xlim(x_min, x_max)<br>plt.ylim(y_min, y_max)<br>plt.xticks(())<br>plt.yticks(())<br><br><span class="hljs-comment"># æ˜¾ç¤ºç»˜å›¾</span><br>plt.show()<br></code></pre></td></tr></table></figure><h2 id="5-å®éªŒç»“æœ"><a href="#5-å®éªŒç»“æœ" class="headerlink" title="5.å®éªŒç»“æœ"></a>5.å®éªŒç»“æœ</h2><img src=/res/post/ai/lab2-result.jpg width=100% />]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;source-code-and-requirements&quot;&gt;&lt;a href=&quot;#source-code-and-requirements&quot; class=&quot;headerlink&quot; title=&quot;source code and requirements&quot;&gt;&lt;/a&gt;&lt;a</summary>
      
    
    
    
    <category term="lab" scheme="https://lilinzta.github.io/categories/lab/"/>
    
    
    <category term="äººå·¥æ™ºèƒ½æŠ€æœ¯" scheme="https://lilinzta.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>äººå·¥æ™ºèƒ½æŠ€æœ¯ lab1(KNN)</title>
    <link href="https://lilinzta.github.io/2023/11/16/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab1(KNN)/"/>
    <id>https://lilinzta.github.io/2023/11/16/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF-lab1(KNN)/</id>
    <published>2023-11-16T09:07:55.000Z</published>
    <updated>2024-01-20T11:30:49.077Z</updated>
    
    <content type="html"><![CDATA[<h2 id="source-code-and-requirements"><a href="#source-code-and-requirements" class="headerlink" title="source code and requirements"></a><a href="https://github.com/Lilinzta/ai">source code and requirements</a></h2><h2 id="0-å®éªŒç¯å¢ƒ"><a href="#0-å®éªŒç¯å¢ƒ" class="headerlink" title="0.å®éªŒç¯å¢ƒ"></a>0.å®éªŒç¯å¢ƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">OS: Arch Linux(rolling)<br>LANG: Python 3.11.5<br></code></pre></td></tr></table></figure><h2 id="1-åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#1-åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="1.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>1.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python -m venv venv<br></code></pre></td></tr></table></figure><h2 id="2-æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"><a href="#2-æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="2.æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"></a>2.æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">source</span> venv/bin/activate<br></code></pre></td></tr></table></figure><h2 id="3-å®‰è£…ä¾èµ–"><a href="#3-å®‰è£…ä¾èµ–" class="headerlink" title="3.å®‰è£…ä¾èµ–"></a>3.å®‰è£…ä¾èµ–</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pip install -r requirements.txt<br></code></pre></td></tr></table></figure><h2 id="4-è¿è¡Œ"><a href="#4-è¿è¡Œ" class="headerlink" title="4.è¿è¡Œ"></a>4.è¿è¡Œ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">python lab1/main.py<br></code></pre></td></tr></table></figure><blockquote><p>lab1&#x2F;main.py</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Source: https://tjxlab.gitbooks.io/bigdata/content/da-shu-ju-fen-xi-yu-wa-jue-shi-yan/shi-yanyi-ff1a-knn-fen-lei-shi-yan.html</span><br><br><span class="hljs-comment"># numpy åº“ç”¨äºç§‘å­¦è®¡ç®—ï¼Œmatplotlib åº“ç”¨äºç»˜å›¾</span><br><span class="hljs-comment"># Scikit-learn åº“ä¸­çš„ neighbors æ¨¡å—å’Œ datasets æ¨¡å—åˆ†åˆ«åŒ…å«KNNåˆ†ç±»å™¨å’Œä¸€äº›å¸¸ç”¨çš„æ•°æ®é›†</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> matplotlib.colors <span class="hljs-keyword">import</span> ListedColormap<br><span class="hljs-keyword">from</span> sklearn <span class="hljs-keyword">import</span> neighbors, datasets<br><br><span class="hljs-comment"># å®šä¹‰é‚»å±…ä¸ªæ•°ï¼Œè®¾å®šKNNç®—æ³•ä¸­é‚»å±…ä¸ªæ•°ä¸º15</span><br>n_neighbors_22 = <span class="hljs-number">15</span><br><br><span class="hljs-comment"># åŠ è½½irisæ•°æ®é›†ï¼Œä½¿ç”¨ Scikit-learn ä¸­çš„ load_iris() å‡½æ•°åŠ è½½é¸¢å°¾èŠ±æ•°æ®é›†</span><br>iris_22 = datasets.load_iris()<br><br><span class="hljs-comment"># é€‰æ‹©ç‰¹å¾ï¼Œä½¿ç”¨äº†é¸¢å°¾èŠ±æ•°æ®é›†ä¸­çš„å‰ä¸¤ä¸ªç‰¹å¾</span><br>X_22 = iris_22.data[:, :<span class="hljs-number">2</span>]<br>y_22 = iris_22.target<br><br><span class="hljs-comment"># è®¾ç½®æ­¥é•¿å’Œåˆ›å»ºé¢œè‰²æ˜ å°„ï¼Œh æ˜¯åœ¨å¯è§†åŒ–å†³ç­–è¾¹ç•Œæ—¶ä½¿ç”¨çš„æ­¥é•¿</span><br><span class="hljs-comment"># cmap_light å’Œ cmap_bold æ˜¯ä¸¤ä¸ªé¢œè‰²æ˜ å°„ï¼Œç”¨äºå¯è§†åŒ–è½»é‡çº§èƒŒæ™¯å’ŒåŠ ç²—ç‰ˆèƒŒæ™¯é¢œè‰²</span><br>h_22 = <span class="hljs-number">.02</span>  <span class="hljs-comment"># step size in the mesh</span><br>cmap_light = ListedColormap([<span class="hljs-string">&#x27;#FFAAAA&#x27;</span>, <span class="hljs-string">&#x27;#AAFFAA&#x27;</span>, <span class="hljs-string">&#x27;#AAAAFF&#x27;</span>])<br>cmap_bold = ListedColormap([<span class="hljs-string">&#x27;#FF0000&#x27;</span>, <span class="hljs-string">&#x27;#00FF00&#x27;</span>, <span class="hljs-string">&#x27;#0000FF&#x27;</span>])<br><br><span class="hljs-comment"># å¾ªç¯è¿›è¡ŒKNNåˆ†ç±»å’Œå¯è§†åŒ–</span><br><span class="hljs-keyword">for</span> weights <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;uniform&#x27;</span>, <span class="hljs-string">&#x27;distance&#x27;</span>]:<br>    <span class="hljs-comment"># ä½¿ç”¨å¾ªç¯ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸¤ç§æƒé‡ï¼ˆuniformå’Œdistanceï¼‰åˆ›å»ºKNNåˆ†ç±»å™¨å®ä¾‹ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ‹Ÿåˆã€‚</span><br>    clf = neighbors.KNeighborsClassifier(n_neighbors_22, weights=weights)<br>    clf.fit(X_22, y_22)<br><br>    <span class="hljs-comment"># ä¸ºäº†ç»˜åˆ¶å†³ç­–è¾¹ç•Œï¼Œå®šä¹‰ä¸€ä¸ªç½‘æ ¼ï¼Œå¹¶åœ¨ç½‘æ ¼ä¸Šè®¡ç®—æ¨¡å‹çš„é¢„æµ‹å€¼</span><br>    x_min, x_max = X_22[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, X_22[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span><br>    y_min, y_max = X_22[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, X_22[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span><br>    xx, yy = np.meshgrid(np.arange(x_min, x_max, h_22),<br>                         np.arange(y_min, y_max, h_22))<br><br>    <span class="hljs-comment"># ä½¿ç”¨æ¨¡å‹å¯¹ç½‘æ ¼ä¸­çš„ç‚¹è¿›è¡Œé¢„æµ‹</span><br>    Z = clf.predict(np.c_[xx.ravel(), yy.ravel()])<br><br>    <span class="hljs-comment"># å°†é¢„æµ‹ç»“æœä»¥é¢œè‰²çš„å½¢å¼ç»˜åˆ¶åœ¨ç½‘æ ¼ä¸Š</span><br>    Z = Z.reshape(xx.shape)<br>    plt.figure()<br>    plt.pcolormesh(xx, yy, Z, cmap=cmap_light)<br><br>    <span class="hljs-comment"># å°†è®­ç»ƒæ•°æ®é›†ä¸Šçš„ç‚¹ç”¨æ•£ç‚¹å›¾è¡¨ç¤ºï¼Œå¹¶æ˜¾ç¤ºå›¾è¡¨çš„æ ‡é¢˜</span><br>    plt.scatter(X_22[:, <span class="hljs-number">0</span>], X_22[:, <span class="hljs-number">1</span>], c=y_22, cmap=cmap_bold,<br>                edgecolor=<span class="hljs-string">&#x27;k&#x27;</span>, s=<span class="hljs-number">20</span>)<br>    plt.xlim(xx.<span class="hljs-built_in">min</span>(), xx.<span class="hljs-built_in">max</span>())<br>    plt.ylim(yy.<span class="hljs-built_in">min</span>(), yy.<span class="hljs-built_in">max</span>())<br>    plt.title(<span class="hljs-string">&quot;3-Class classification (k = %i, weights = &#x27;%s&#x27;)&quot;</span><br>              % (n_neighbors_22, weights))<br><br><span class="hljs-comment"># æœ€åï¼Œé€šè¿‡ plt.show() å°†å›¾å½¢æ˜¾ç¤ºå‡ºæ¥</span><br>plt.show()<br></code></pre></td></tr></table></figure><h2 id="5-å®éªŒç»“æœ"><a href="#5-å®éªŒç»“æœ" class="headerlink" title="5.å®éªŒç»“æœ"></a>5.å®éªŒç»“æœ</h2><img src=/res/post/ai/lab1-result.jpg width=100% />]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;source-code-and-requirements&quot;&gt;&lt;a href=&quot;#source-code-and-requirements&quot; class=&quot;headerlink&quot; title=&quot;source code and requirements&quot;&gt;&lt;/a&gt;&lt;a</summary>
      
    
    
    
    <category term="lab" scheme="https://lilinzta.github.io/categories/lab/"/>
    
    
    <category term="äººå·¥æ™ºèƒ½æŠ€æœ¯" scheme="https://lilinzta.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>Arch Linux åˆ‡æ¢ java ç¯å¢ƒ</title>
    <link href="https://lilinzta.github.io/2023/10/23/Arch-Linux-%E5%88%87%E6%8D%A2-java-%E7%8E%AF%E5%A2%83/"/>
    <id>https://lilinzta.github.io/2023/10/23/Arch-Linux-%E5%88%87%E6%8D%A2-java-%E7%8E%AF%E5%A2%83/</id>
    <published>2023-10-23T09:06:06.000Z</published>
    <updated>2024-01-20T12:10:24.799Z</updated>
    
    <content type="html"><![CDATA[<h3 id="archlinux-java"><a href="#archlinux-java" class="headerlink" title="archlinux-java"></a>archlinux-java</h3><p>è¾“å‡ºå¦‚ä¸‹:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">â¯ archlinux-java --<span class="hljs-built_in">help</span><br>archlinux-java &lt;COMMAND&gt;<br><br>COMMAND:<br>statusList installed Java environments and enabled one<br>getReturn the short name of the Java environment <span class="hljs-built_in">set</span> as default<br><span class="hljs-built_in">set</span> &lt;JAVA_ENV&gt;Force &lt;JAVA_ENV&gt; as default<br><span class="hljs-built_in">unset</span>Unset current default Java environment<br>fixFix an invalid/broken default Java environment configuration<br></code></pre></td></tr></table></figure><h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><p>è·å–å½“å‰è®¾ç½®:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">â¯ archlinux-java get<br>java-21-openjdk<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰å¯ç”¨Javaç¯å¢ƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">â¯ archlinux-java status<br>Available Java environments:<br>  java-11-openjdk<br>  java-17-openjdk<br>  java-21-openjdk (default)<br>  java-8-openjdk<br></code></pre></td></tr></table></figure><p>è¦æ›´æ”¹é»˜è®¤è®¾ç½®ï¼Œè¯·ä½¿ç”¨rootæƒé™:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">â¯ sudo archlinux-java <span class="hljs-built_in">set</span> java-17-openjdk<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;archlinux-java&quot;&gt;&lt;a href=&quot;#archlinux-java&quot; class=&quot;headerlink&quot; title=&quot;archlinux-java&quot;&gt;&lt;/a&gt;archlinux-java&lt;/h3&gt;&lt;p&gt;è¾“å‡ºå¦‚ä¸‹:&lt;/p&gt;
&lt;figure clas</summary>
      
    
    
    
    
    <category term="Arch Linux" scheme="https://lilinzta.github.io/tags/Arch-Linux/"/>
    
  </entry>
  
  <entry>
    <title>15.æ³¨é‡Šå’Œæ–‡æ¡£</title>
    <link href="https://lilinzta.github.io/2023/10/14/15-%E6%B3%A8%E9%87%8A%E5%92%8C%E6%96%87%E6%A1%A3/"/>
    <id>https://lilinzta.github.io/2023/10/14/15-%E6%B3%A8%E9%87%8A%E5%92%8C%E6%96%87%E6%A1%A3/</id>
    <published>2023-10-14T12:41:04.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/* åªä½¿ç”¨æ³¨é‡Šè®©ä¸‹é¢ä»£ç å·¥ä½œ! */</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    todo!();<br>    <span class="hljs-built_in">unimplemented!</span>();<br><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">6</span>, <span class="hljs-number">5</span> + <span class="hljs-number">3</span> + <span class="hljs-number">2</span> + <span class="hljs-number">1</span> )<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ–‡æ¡£æ³¨é‡Š"><a href="#æ–‡æ¡£æ³¨é‡Š" class="headerlink" title="æ–‡æ¡£æ³¨é‡Š"></a>æ–‡æ¡£æ³¨é‡Š</h2><p>æ–‡æ¡£æ³¨é‡Šä¼šè¢«è§£æä¸º HTML æ–‡ä»¶ï¼Œå¹¶æ”¯æŒ Markdown è¯­æ³•ã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç”¨äºåé¢çš„ç»ƒä¹ : cargo new â€“lib doc-comments.</p><h3 id="è¡Œæ–‡æ¡£æ³¨é‡Š"><a href="#è¡Œæ–‡æ¡£æ³¨é‡Š" class="headerlink" title="è¡Œæ–‡æ¡£æ³¨é‡Š &#x2F;&#x2F;&#x2F;"></a>è¡Œæ–‡æ¡£æ³¨é‡Š &#x2F;&#x2F;&#x2F;</h3><p>ä¸º add_one å‡½æ•°æ·»åŠ æ–‡æ¡£</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><br><span class="hljs-comment">/// Add one to the given value and return the value</span><br><span class="hljs-comment">///</span><br><span class="hljs-comment">/// # Examples</span><br><span class="hljs-comment">///</span><br><span class="hljs-comment">/// ```</span><br><span class="hljs-comment">/// let arg = 5;</span><br><span class="hljs-comment">/// let answer = my_crate::add_one(arg);</span><br><span class="hljs-comment">///</span><br><span class="hljs-comment">/// assert_eq!(6, answer);</span><br><span class="hljs-comment">/// ```</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_one</span>(x: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    x + <span class="hljs-number">1</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Cargo-doc"><a href="#Cargo-doc" class="headerlink" title="Cargo doc"></a>Cargo doc</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ cargo doc â€“open æ¥ç”Ÿæˆ HTML æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘é¡µã€‚</p><h3 id="å—æ–‡æ¡£æ³¨é‡Š-â€¦"><a href="#å—æ–‡æ¡£æ³¨é‡Š-â€¦" class="headerlink" title="å—æ–‡æ¡£æ³¨é‡Š &#x2F;** â€¦ *&#x2F;"></a>å—æ–‡æ¡£æ³¨é‡Š &#x2F;** â€¦ *&#x2F;</h3><p>ä¸ºå‡½æ•° add_two æ·»åŠ æ–‡æ¡£:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/** Add two to the given value and return a new value</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment">let arg = 5;</span><br><span class="hljs-comment">let answer = my_crate::add_two(arg);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">assert_eq!(7, answer);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_two</span>(x: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    x + <span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸ºåŒ…å’Œæ¨¡å—åˆ›å»ºæ–‡æ¡£æ³¨é‡Š"><a href="#ä¸ºåŒ…å’Œæ¨¡å—åˆ›å»ºæ–‡æ¡£æ³¨é‡Š" class="headerlink" title="ä¸ºåŒ…å’Œæ¨¡å—åˆ›å»ºæ–‡æ¡£æ³¨é‡Š"></a>ä¸ºåŒ…å’Œæ¨¡å—åˆ›å»ºæ–‡æ¡£æ³¨é‡Š</h3><p>æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºåŒ…å’Œæ¨¡å—çš„æ³¨é‡Šï¼Œç”¨äºæè¿°å®ƒä»¬çš„åŠŸèƒ½ã€‚</p><p>é¦–å…ˆï¼Œæ¥ä¸ºæˆ‘ä»¬çš„åº“åŒ…æ·»åŠ ä¸€äº›æ–‡æ¡£æ³¨é‡Š:</p><blockquote><p>æ³¨æ„ï¼šå¿…é¡»è¦å°†åŒ…ã€æ¨¡å—æ³¨é‡Šæ”¾ç½®åœ¨åŒ…æ ¹æˆ–æ¨¡å—æ–‡ä»¶çš„æœ€é¡¶éƒ¨</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">//! # æ–‡æ¡£æ³¨é‡Š</span><br><span class="hljs-comment">//!</span><br><span class="hljs-comment">//! è¯¥åº“ç”¨äºæ–‡æ¡£æ³¨é‡Šçš„æ•™å­¦</span><br><br><span class="hljs-comment">// in lib.rs</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> compute;<br></code></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å—æ³¨é‡Šæ¥è¾¾æˆç›®çš„:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/*! # æ–‡æ¡£æ³¨é‡Š</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"> è¯¥åº“ç”¨äºæ–‡æ¡£æ³¨é‡Šçš„æ•™å­¦ */</span><br></code></pre></td></tr></table></figure><p>ä¸‹ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—æ–‡ä»¶ src&#x2F;compute.rs, ç„¶ååœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹æ³¨é‡Š:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">//! æœ¬æ¨¡å—ç”¨äºå¤„ç†ä¸€äº›å¤æ‚è®¡ç®—</span><br><br><span class="hljs-comment">// in compute.rs</span><br></code></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œ cargo doc â€“open æŸ¥çœ‹ä¸‹ç»“æœã€‚</p><h3 id="æ–‡æ¡£æµ‹è¯•"><a href="#æ–‡æ¡£æµ‹è¯•" class="headerlink" title="æ–‡æ¡£æµ‹è¯•"></a>æ–‡æ¡£æµ‹è¯•</h3><p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½ä¼šå‘ç°ä¹‹å‰çš„ add_one å’Œ add_tow çš„æ–‡æ¡£æ³¨é‡Šä¸­ï¼ŒåŒ…å«äº†ä¸¤ä¸ªç¤ºä¾‹ä»£ç å—.</p><p>ä»¥ä¸Šç¤ºä¾‹ä¸ä»…ä»…æ˜¯ä½œä¸ºæ–‡æ¡£ç”¨äºæ¼”ç¤ºä½ çš„å‡½æ•°è¯¥å¦‚ä½•ä½¿ç”¨ï¼Œå®ƒçš„å¦ä¸€ä¸ªä½œç”¨å°±æ˜¯ç”¨äºæ–‡æ¡£æµ‹è¯• cargo testã€‚</p><h3 id="2-ğŸŒŸğŸŒŸ-ä½†æ˜¯åœ¨è¿™ä¸¤ä¸ªå‡½æ•°çš„ç¤ºä¾‹ä¸­ï¼Œå­˜åœ¨é”™è¯¯ï¼Œè¯·ä¿®å¤å®ƒä»¬å¹¶ä½¿ç”¨-cargo-test-è·å–ä»¥ä¸‹è¾“å‡ºç»“æœ"><a href="#2-ğŸŒŸğŸŒŸ-ä½†æ˜¯åœ¨è¿™ä¸¤ä¸ªå‡½æ•°çš„ç¤ºä¾‹ä¸­ï¼Œå­˜åœ¨é”™è¯¯ï¼Œè¯·ä¿®å¤å®ƒä»¬å¹¶ä½¿ç”¨-cargo-test-è·å–ä»¥ä¸‹è¾“å‡ºç»“æœ" class="headerlink" title="2.ğŸŒŸğŸŒŸ ä½†æ˜¯åœ¨è¿™ä¸¤ä¸ªå‡½æ•°çš„ç¤ºä¾‹ä¸­ï¼Œå­˜åœ¨é”™è¯¯ï¼Œè¯·ä¿®å¤å®ƒä»¬å¹¶ä½¿ç”¨ cargo test è·å–ä»¥ä¸‹è¾“å‡ºç»“æœ:"></a>2.ğŸŒŸğŸŒŸ ä½†æ˜¯åœ¨è¿™ä¸¤ä¸ªå‡½æ•°çš„ç¤ºä¾‹ä¸­ï¼Œå­˜åœ¨é”™è¯¯ï¼Œè¯·ä¿®å¤å®ƒä»¬å¹¶ä½¿ç”¨ cargo test è·å–ä»¥ä¸‹è¾“å‡ºç»“æœ:</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">running 0 tests<br><br><span class="hljs-built_in">test</span> result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished <span class="hljs-keyword">in</span> 0.00s<br><br>   Doc-tests doc-comments<br><br>running 2 tests<br><span class="hljs-built_in">test</span> src/lib.rs - add_one (line 11) ... ok<br><span class="hljs-built_in">test</span> src/lib.rs - add_two (line 26) ... ok<br><br><span class="hljs-built_in">test</span> result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished <span class="hljs-keyword">in</span> 0.55s<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ-æœ‰æ—¶æˆ‘ä»¬ä¼šæœŸæœ›ç¤ºä¾‹çš„ç»“æœæ˜¯ä¸€ä¸ª-panicã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°-src-compute-rs-ï¼Œå¹¶ä¸”è®©-cargo-test-æˆåŠŸè¿è¡Œ"><a href="#3-ğŸŒŸğŸŒŸ-æœ‰æ—¶æˆ‘ä»¬ä¼šæœŸæœ›ç¤ºä¾‹çš„ç»“æœæ˜¯ä¸€ä¸ª-panicã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°-src-compute-rs-ï¼Œå¹¶ä¸”è®©-cargo-test-æˆåŠŸè¿è¡Œ" class="headerlink" title="3.ğŸŒŸğŸŒŸ æœ‰æ—¶æˆ‘ä»¬ä¼šæœŸæœ›ç¤ºä¾‹çš„ç»“æœæ˜¯ä¸€ä¸ª panicã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° src&#x2F;compute.rs ï¼Œå¹¶ä¸”è®© cargo test æˆåŠŸè¿è¡Œ."></a>3.ğŸŒŸğŸŒŸ æœ‰æ—¶æˆ‘ä»¬ä¼šæœŸæœ›ç¤ºä¾‹çš„ç»“æœæ˜¯ä¸€ä¸ª panicã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° src&#x2F;compute.rs ï¼Œå¹¶ä¸”è®© cargo test æˆåŠŸè¿è¡Œ.</h3><blockquote><p>ä½ åªèƒ½ä¿®æ”¹æ³¨é‡Šï¼Œä¸è¦ä¿®æ”¹ fn div</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in src/compute.rs</span><br><br><span class="hljs-comment">/// # Panics</span><br><span class="hljs-comment">///</span><br><span class="hljs-comment">/// The function panics if the second argument is zero.</span><br><span class="hljs-comment">///</span><br><span class="hljs-comment">/// ```rust,should_panic</span><br><span class="hljs-comment">/// // panics on division by zero</span><br><span class="hljs-comment">/// doc_comments::compute::div(10, 0);</span><br><span class="hljs-comment">/// ```</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">div</span>(a: <span class="hljs-type">i32</span>, b: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;Divide-by-zero error&quot;</span>);<br>    &#125;<br><br>    a / b<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸæœ‰æ—¶æˆ‘ä»¬ä¼šæƒ³è¦éšè—æ–‡æ¡£ï¼Œä½†æ˜¯ä¿ç•™æ–‡æ¡£æµ‹è¯•"><a href="#4-ğŸŒŸğŸŒŸæœ‰æ—¶æˆ‘ä»¬ä¼šæƒ³è¦éšè—æ–‡æ¡£ï¼Œä½†æ˜¯ä¿ç•™æ–‡æ¡£æµ‹è¯•" class="headerlink" title="4.ğŸŒŸğŸŒŸæœ‰æ—¶æˆ‘ä»¬ä¼šæƒ³è¦éšè—æ–‡æ¡£ï¼Œä½†æ˜¯ä¿ç•™æ–‡æ¡£æµ‹è¯•"></a>4.ğŸŒŸğŸŒŸæœ‰æ—¶æˆ‘ä»¬ä¼šæƒ³è¦éšè—æ–‡æ¡£ï¼Œä½†æ˜¯ä¿ç•™æ–‡æ¡£æµ‹è¯•</h3><p>å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° src&#x2F;compute.rs ,</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in src/compute.rs</span><br><br><span class="hljs-comment">/// ```</span><br><span class="hljs-comment">/// # fn try_main() -&gt; Result&lt;(), String&gt; &#123;</span><br><span class="hljs-comment">/// let res = doc_comments::compute::try_div(10, 0)?;</span><br><span class="hljs-comment">/// # Ok(()) // returning from try_main</span><br><span class="hljs-comment">/// # &#125;</span><br><span class="hljs-comment">/// # fn main() &#123;</span><br><span class="hljs-comment">/// #    try_main().unwrap();</span><br><span class="hljs-comment">/// #</span><br><span class="hljs-comment">/// # &#125;</span><br><span class="hljs-comment">/// ```</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">try_div</span>(a: <span class="hljs-type">i32</span>, b: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">String</span>&gt; &#123;<br>    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-title function_ invoke__">Err</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Divide-by-zero&quot;</span>))<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(a / b)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ä»¥ä¸Šä»£ç å·²å®ç°ä¸¤ä¸ªç›®æ ‡:</p><ul><li>æ–‡æ¡£æ³¨é‡Šä¸èƒ½å‡ºç°åœ¨ cargo doc â€“open ç”Ÿæˆçš„ç½‘é¡µä¸­</li><li>è¿è¡Œæµ‹è¯•ï¼Œå¹¶æˆåŠŸçœ‹åˆ°ä»¥ä¸‹ç»“æœ:<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">running 0 tests<br><br><span class="hljs-built_in">test</span> result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished <span class="hljs-keyword">in</span> 0.00s<br><br>   Doc-tests doc-comments<br><br>running 4 tests<br><span class="hljs-built_in">test</span> src/compute.rs - compute::div (line 7) ... ok<br><span class="hljs-built_in">test</span> src/lib.rs - add_two (line 27) ... ok<br><span class="hljs-built_in">test</span> src/lib.rs - add_one (line 11) ... ok<br><span class="hljs-built_in">test</span> src/compute.rs - compute::try_div (line 20) ... ok<br><br><span class="hljs-built_in">test</span> result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished <span class="hljs-keyword">in</span> 0.51s<br></code></pre></td></tr></table></figure></li></ul><h3 id="ä»£ç è·³è½¬"><a href="#ä»£ç è·³è½¬" class="headerlink" title="ä»£ç è·³è½¬"></a>ä»£ç è·³è½¬</h3><p>Rust ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç‰¹æ€§ï¼šå¯ä»¥åœ¨æ–‡æ¡£æ³¨é‡Šä¸­å®ç°ä»£ç è·³è½¬ã€‚</p><p>å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° src&#x2F;lib.rs:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><br><span class="hljs-comment">/// Add one to the given value and return a [`Option`] type</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_three</span>(x: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; &#123;<br>    <span class="hljs-title function_ invoke__">Some</span>(x + <span class="hljs-number">3</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>é™¤äº†è·³è½¬åˆ°æ ‡å‡†åº“ä¸­ï¼Œæˆ‘ä»¬è¿˜èƒ½è·³è½¬åˆ°é¡¹ç›®ä¸­çš„å…¶å®ƒæ¨¡å—ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><br><span class="hljs-keyword">mod</span> a &#123;<br>    <span class="hljs-comment">/// Add four to the given value and return a [`Option`] type</span><br>    <span class="hljs-comment">/// [`crate::MySpecialFormatter`]</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_four</span>(x: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(x + <span class="hljs-number">4</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MySpecialFormatter</span>;<br></code></pre></td></tr></table></figure><h3 id="æ–‡æ¡£å±æ€§"><a href="#æ–‡æ¡£å±æ€§" class="headerlink" title="æ–‡æ¡£å±æ€§"></a>æ–‡æ¡£å±æ€§</h3><p>ä¸‹é¢æ˜¯å¾ˆå¸¸ç”¨çš„ #[doc] å±æ€§ï¼Œè¯¥å±æ€§å¯ä»¥è¢« rustdoc æ‰€ä½¿ç”¨ã€‚</p><h3 id="inline"><a href="#inline" class="headerlink" title="inline"></a>inline</h3><p>å¯ä»¥ç”¨äºå†…è”æ–‡æ¡£, è€Œä¸æ˜¯é“¾æ¥åˆ°ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[doc(inline)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">use</span> bar::Bar;<br><br><span class="hljs-comment">/// bar docs</span><br><span class="hljs-keyword">mod</span> bar &#123;<br>    <span class="hljs-comment">/// the docs for Bar</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bar</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="no-inline"><a href="#no-inline" class="headerlink" title="no_inline"></a>no_inline</h3><p>ç”¨äºé˜²æ­¢é“¾æ¥åˆ°å•ç‹¬çš„é¡µé¢æˆ–å…¶å®ƒåœ°æ–¹ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// Example from libcore/prelude</span><br><span class="hljs-meta">#[doc(no_inline)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">use</span> crate::mem::drop;<br></code></pre></td></tr></table></figure><h3 id="hidden"><a href="#hidden" class="headerlink" title="hidden"></a>hidden</h3><p>é€šè¿‡è¿™ä¸ªå±æ€§è®© rustdoc ä¸è¦å°†ä¸‹é¢çš„é¡¹åŒ…å«åœ¨æ–‡æ¡£ä¸­:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// Example from the futures-rs library</span><br><span class="hljs-meta">#[doc(hidden)]</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">use</span> self::async_await::*;<br></code></pre></td></tr></table></figure><p>å¯¹æ–‡æ¡£æ¥è¯´ï¼Œrustdoc è¢«ç¤¾åŒºå¹¿æ³›é‡‡ç”¨ï¼Œå¤§å®¶æ‰€çœ‹åˆ°çš„<a href="https://doc.rust-lang.org/std/">æ ‡å‡†åº“æ–‡æ¡£</a>ä¹Ÿæ˜¯åŸºäºæ­¤ç”Ÿæˆçš„ã€‚</p><h3 id="å®Œæ•´çš„ä»£ç "><a href="#å®Œæ•´çš„ä»£ç " class="headerlink" title="å®Œæ•´çš„ä»£ç "></a>å®Œæ•´çš„ä»£ç </h3><p>doc-comments çš„å®Œæ•´ä»£ç å¯ä»¥åœ¨<a href="https://github.com/sunface/rust-by-practice/tree/master/practices/doc-comments">è¿™é‡Œæ‰¾åˆ°</a>.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ³¨é‡Š&quot;&gt;&lt;a href=&quot;#æ³¨é‡Š&quot; class=&quot;headerlink&quot; title=&quot;æ³¨é‡Š&quot;&gt;&lt;/a&gt;æ³¨é‡Š&lt;/h2&gt;&lt;h3 id=&quot;1-ğŸŒŸğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸğŸŒŸ&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸğŸŒŸ&quot;&gt;&lt;/a&gt;1</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>14.3.ä½¿ç”¨ use å¼•å…¥æ¨¡å—åŠå—é™å¯è§æ€§</title>
    <link href="https://lilinzta.github.io/2023/10/11/14-3-%E4%BD%BF%E7%94%A8-use-%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97%E5%8F%8A%E5%8F%97%E9%99%90%E5%8F%AF%E8%A7%81%E6%80%A7/"/>
    <id>https://lilinzta.github.io/2023/10/11/14-3-%E4%BD%BF%E7%94%A8-use-%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97%E5%8F%8A%E5%8F%97%E9%99%90%E5%8F%AF%E8%A7%81%E6%80%A7/</id>
    <published>2023-10-11T13:12:43.000Z</published>
    <updated>2024-01-20T11:33:38.819Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ğŸŒŸ-ä½¿ç”¨-use-å¯ä»¥å°†ä¸¤ä¸ªåŒåç±»å‹å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œä½†æ˜¯åˆ«å¿˜äº†-as-å…³é”®å­—"><a href="#1-ğŸŒŸ-ä½¿ç”¨-use-å¯ä»¥å°†ä¸¤ä¸ªåŒåç±»å‹å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œä½†æ˜¯åˆ«å¿˜äº†-as-å…³é”®å­—" class="headerlink" title="1.ğŸŒŸ ä½¿ç”¨ use å¯ä»¥å°†ä¸¤ä¸ªåŒåç±»å‹å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œä½†æ˜¯åˆ«å¿˜äº† as å…³é”®å­—."></a>1.ğŸŒŸ ä½¿ç”¨ use å¯ä»¥å°†ä¸¤ä¸ªåŒåç±»å‹å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œä½†æ˜¯åˆ«å¿˜äº† as å…³é”®å­—.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fmt::<span class="hljs-type">Result</span>;<br><span class="hljs-keyword">use</span> std::io::<span class="hljs-type">Result</span>;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fmt::<span class="hljs-type">Result</span>;<br><span class="hljs-keyword">use</span> std::io::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> IoResult;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨æ¥è‡ªåŒä¸€ä¸ªåŒ…æˆ–æ¨¡å—ä¸­çš„å¤šä¸ªä¸åŒé¡¹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç®€å•çš„æ–¹å¼å°†å®ƒä»¬ä¸€æ¬¡æ€§å¼•å…¥è¿›æ¥"><a href="#2-ğŸŒŸğŸŒŸ-å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨æ¥è‡ªåŒä¸€ä¸ªåŒ…æˆ–æ¨¡å—ä¸­çš„å¤šä¸ªä¸åŒé¡¹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç®€å•çš„æ–¹å¼å°†å®ƒä»¬ä¸€æ¬¡æ€§å¼•å…¥è¿›æ¥" class="headerlink" title="2.ğŸŒŸğŸŒŸ å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨æ¥è‡ªåŒä¸€ä¸ªåŒ…æˆ–æ¨¡å—ä¸­çš„å¤šä¸ªä¸åŒé¡¹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç®€å•çš„æ–¹å¼å°†å®ƒä»¬ä¸€æ¬¡æ€§å¼•å…¥è¿›æ¥"></a>2.ğŸŒŸğŸŒŸ å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨æ¥è‡ªåŒä¸€ä¸ªåŒ…æˆ–æ¨¡å—ä¸­çš„å¤šä¸ªä¸åŒé¡¹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç®€å•çš„æ–¹å¼å°†å®ƒä»¬ä¸€æ¬¡æ€§å¼•å…¥è¿›æ¥</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼å¡«ç©º</span><br><span class="hljs-comment">// ä¸è¦æ·»åŠ æ–°çš„ä»£ç è¡Œ</span><br><span class="hljs-keyword">use</span> std::collections::__;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_c1</span>:HashMap&lt;&amp;<span class="hljs-type">str</span>, <span class="hljs-type">i32</span>&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">c2</span> = BTreeMap::<span class="hljs-title function_ invoke__">new</span>();<br>    c2.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;a&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_c3</span>: HashSet&lt;<span class="hljs-type">i32</span>&gt; = HashSet::<span class="hljs-title function_ invoke__">new</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼å¡«ç©º</span><br><span class="hljs-comment">// ä¸è¦æ·»åŠ æ–°çš„ä»£ç è¡Œ</span><br><span class="hljs-keyword">use</span> std::collections::*;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_c1</span>:HashMap&lt;&amp;<span class="hljs-type">str</span>, <span class="hljs-type">i32</span>&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">c2</span> = BTreeMap::<span class="hljs-title function_ invoke__">new</span>();<br>    c2.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;a&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_c3</span>: HashSet&lt;<span class="hljs-type">i32</span>&gt; = HashSet::<span class="hljs-title function_ invoke__">new</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼å¡«ç©º</span><br><span class="hljs-comment">// ä¸è¦æ·»åŠ æ–°çš„ä»£ç è¡Œ</span><br><span class="hljs-keyword">use</span> std::collections::&#123;HashMap, BTreeMap, HashSet&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_c1</span>:HashMap&lt;&amp;<span class="hljs-type">str</span>, <span class="hljs-type">i32</span>&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">c2</span> = BTreeMap::<span class="hljs-title function_ invoke__">new</span>();<br>    c2.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;a&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_c3</span>: HashSet&lt;<span class="hljs-type">i32</span>&gt; = HashSet::<span class="hljs-title function_ invoke__">new</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-pub-use-è¿›è¡Œå†å¯¼å‡º"><a href="#ä½¿ç”¨-pub-use-è¿›è¡Œå†å¯¼å‡º" class="headerlink" title="ä½¿ç”¨ pub use è¿›è¡Œå†å¯¼å‡º"></a>ä½¿ç”¨ pub use è¿›è¡Œå†å¯¼å‡º</h2><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ-åœ¨ä¹‹å‰åˆ›å»ºçš„hello-package-çš„åº“åŒ…ä¸­-æ·»åŠ ä¸€äº›ä»£ç è®©ä¸‹é¢çš„ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œ"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ-åœ¨ä¹‹å‰åˆ›å»ºçš„hello-package-çš„åº“åŒ…ä¸­-æ·»åŠ ä¸€äº›ä»£ç è®©ä¸‹é¢çš„ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œ" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ åœ¨ä¹‹å‰åˆ›å»ºçš„hello-package çš„åº“åŒ…ä¸­, æ·»åŠ ä¸€äº›ä»£ç è®©ä¸‹é¢çš„ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œ"></a>3.ğŸŒŸğŸŒŸğŸŒŸ åœ¨ä¹‹å‰åˆ›å»ºçš„hello-package çš„åº“åŒ…ä¸­, æ·»åŠ ä¸€äº›ä»£ç è®©ä¸‹é¢çš„ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(hello_package::hosting::<span class="hljs-title function_ invoke__">seat_at_table</span>(), <span class="hljs-string">&quot;sit down please&quot;</span>);<br>     <span class="hljs-built_in">assert_eq!</span>(hello_package::<span class="hljs-title function_ invoke__">eat_at_restaurant</span>(),<span class="hljs-string">&quot;yummy yummy!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><br><span class="hljs-comment">// Add this line</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">use</span> crate::front_of_house::hosting;<br></code></pre></td></tr></table></figure><h2 id="pub-in-Crate"><a href="#pub-in-Crate" class="headerlink" title="pub(in Crate)"></a>pub(in Crate)</h2><p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›æŸä¸€ä¸ªé¡¹åªå¯¹ç‰¹å®šçš„åŒ…å¯è§ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ pub(in Crate) è¯­æ³•.</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> a &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">const</span> I: <span class="hljs-type">i32</span> = <span class="hljs-number">3</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">semisecret</span>(x: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-keyword">use</span> self::b::c::J;<br>        x + J<br>    &#125;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">bar</span>(z: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-title function_ invoke__">semisecret</span>(I) * z<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>(y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-title function_ invoke__">semisecret</span>(I) + y<br>    &#125;<br><br>    <span class="hljs-keyword">mod</span> b &#123;<br>        <span class="hljs-title function_ invoke__">pub</span>(<span class="hljs-keyword">in</span> crate::a) <span class="hljs-keyword">mod</span> c &#123;<br>            <span class="hljs-title function_ invoke__">pub</span>(<span class="hljs-keyword">in</span> crate::a) <span class="hljs-keyword">const</span> J: <span class="hljs-type">i32</span> = <span class="hljs-number">4</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><p>è‡³æ­¤ï¼ŒåŒ…ä¸æ¨¡å—ç« èŠ‚å·²ç»ç»“æŸï¼Œå…³äº hello-package çš„å®Œæ•´ä»£ç å¯ä»¥åœ¨<a href="https://github.com/sunface/rust-by-practice/tree/master/practices/hello-package">è¿™é‡Œ</a>æ‰¾åˆ°.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ğŸŒŸ-ä½¿ç”¨-use-å¯ä»¥å°†ä¸¤ä¸ªåŒåç±»å‹å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œä½†æ˜¯åˆ«å¿˜äº†-as-å…³é”®å­—&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸ-ä½¿ç”¨-use-å¯ä»¥å°†ä¸¤ä¸ªåŒåç±»å‹å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œä½†æ˜¯åˆ«å¿˜äº†-as-å…³é”®å­—&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸ ä½¿</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>14.2.æ¨¡å— Module</title>
    <link href="https://lilinzta.github.io/2023/10/09/14-2-%E6%A8%A1%E5%9D%97-Module/"/>
    <id>https://lilinzta.github.io/2023/10/09/14-2-%E6%A8%A1%E5%9D%97-Module/</id>
    <published>2023-10-09T13:32:31.000Z</published>
    <updated>2024-01-20T11:33:58.957Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ Rust è¯­è¨€åœ£ç»ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ·±å…¥è®²è§£è¿‡æ¨¡å—moduleï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œç›´æ¥å¼€å§‹æˆ‘ä»¬çš„ç»ƒä¹ ã€‚</p><span id="more"></span><p>ä¹‹å‰æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª package hello-packageï¼Œå®ƒçš„ç›®å½•ç»“æ„åœ¨ç»è¿‡å¤šæ¬¡ä¿®æ”¹åï¼Œå˜æˆäº†ä»¥ä¸‹æ¨¡æ ·:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">.<br>â”œâ”€â”€ Cargo.toml<br>â”œâ”€â”€ src<br>â”‚   â”œâ”€â”€ lib.rs<br>â”‚   â””â”€â”€ main.rs<br></code></pre></td></tr></table></figure><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥ä¸ºå…¶ä¸­çš„åº“åŒ…åˆ›å»ºä¸€äº›æ¨¡å—ï¼Œç„¶ååœ¨äºŒè¿›åˆ¶åŒ…ä¸­ä½¿ç”¨è¿™äº›æ¨¡å—ã€‚</p><h3 id="1-ğŸŒŸğŸŒŸ-æ ¹æ®ä»¥ä¸‹çš„æ¨¡å—æ ‘æè¿°å®ç°æ¨¡å—-front-of-house"><a href="#1-ğŸŒŸğŸŒŸ-æ ¹æ®ä»¥ä¸‹çš„æ¨¡å—æ ‘æè¿°å®ç°æ¨¡å—-front-of-house" class="headerlink" title="1.ğŸŒŸğŸŒŸ æ ¹æ®ä»¥ä¸‹çš„æ¨¡å—æ ‘æè¿°å®ç°æ¨¡å— front_of_house :"></a>1.ğŸŒŸğŸŒŸ æ ¹æ®ä»¥ä¸‹çš„æ¨¡å—æ ‘æè¿°å®ç°æ¨¡å— front_of_house :</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">åº“åŒ…çš„æ ¹(src/lib.rs)<br> â””â”€â”€ front_of_house<br>     â”œâ”€â”€ hosting<br>     â”‚   â”œâ”€â”€ add_to_waitlist<br>     â”‚   â””â”€â”€ seat_at_table<br>     â””â”€â”€ serving<br>         â”œâ”€â”€ take_order<br>         â”œâ”€â”€ serve_order<br>         â”œâ”€â”€ take_payment<br>         â””â”€â”€ complain<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh">// å¡«ç©º<br>// <span class="hljs-keyword">in</span> lib.rs<br><br>mod front_of_house &#123;<br>    mod hosting &#123;<br>        fn <span class="hljs-function"><span class="hljs-title">add_to_waitlist</span></span>() &#123;&#125;<br><br>        fn <span class="hljs-function"><span class="hljs-title">seat_at_table</span></span>() &#123;&#125;<br>    &#125;<br><br>    mod serving &#123;<br>        fn <span class="hljs-function"><span class="hljs-title">take_order</span></span>() &#123;&#125;<br><br>        fn <span class="hljs-function"><span class="hljs-title">serve_order</span></span>() &#123;&#125;<br><br>        fn <span class="hljs-function"><span class="hljs-title">take_payment</span></span>() &#123;&#125;<br><br>        fn <span class="hljs-function"><span class="hljs-title">complain</span></span>() &#123;&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-è®©æˆ‘ä»¬åœ¨åº“åŒ…çš„æ ¹ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°-eat-at-restaurant-ç„¶ååœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨ä¹‹å‰åˆ›å»ºçš„å‡½æ•°-eat-at-restaurant"><a href="#2-ğŸŒŸğŸŒŸ-è®©æˆ‘ä»¬åœ¨åº“åŒ…çš„æ ¹ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°-eat-at-restaurant-ç„¶ååœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨ä¹‹å‰åˆ›å»ºçš„å‡½æ•°-eat-at-restaurant" class="headerlink" title="2.ğŸŒŸğŸŒŸ è®©æˆ‘ä»¬åœ¨åº“åŒ…çš„æ ¹ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•° eat_at_restaurant, ç„¶ååœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨ä¹‹å‰åˆ›å»ºçš„å‡½æ•° eat_at_restaurant"></a>2.ğŸŒŸğŸŒŸ è®©æˆ‘ä»¬åœ¨åº“åŒ…çš„æ ¹ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•° eat_at_restaurant, ç„¶ååœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨ä¹‹å‰åˆ›å»ºçš„å‡½æ•° eat_at_restaurant</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><br><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><br><span class="hljs-comment">// æç¤ºï¼šä½ éœ€è¦é€šè¿‡ `pub` å°†ä¸€äº›é¡¹æ ‡è®°ä¸ºå…¬æœ‰çš„ï¼Œè¿™æ ·æ¨¡å— `front_of_house` ä¸­çš„é¡¹æ‰èƒ½è¢«æ¨¡å—å¤–çš„é¡¹è®¿é—®</span><br><span class="hljs-keyword">mod</span> front_of_house &#123;<br>    <span class="hljs-comment">/* ...snip... */</span><br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">eat_at_restaurant</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ç»å¯¹è·¯å¾„è°ƒç”¨</span><br>    __.<span class="hljs-title function_ invoke__">add_to_waitlist</span>();<br><br>    <span class="hljs-comment">// ä½¿ç”¨ç›¸å¯¹è·¯å¾„è°ƒç”¨</span><br>     __.<span class="hljs-title function_ invoke__">add_to_waitlist</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> front_of_house &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> hosting &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_to_waitlist</span>() &#123;&#125;<br><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">seat_at_table</span>() &#123;&#125;<br>    &#125;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> serving &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_order</span>() &#123;&#125;<br><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">serve_order</span>() &#123;&#125;<br><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_payment</span>() &#123;&#125;<br><br>        <span class="hljs-comment">// Maybe you don&#x27;t want the guest hearing the your complaining about them</span><br>        <span class="hljs-comment">// So just make it private</span><br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">complain</span>() &#123;&#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">eat_at_restaurant</span>() &#123;<br>    <span class="hljs-comment">// ç»å¯¹è·¯å¾„</span><br>    crate::front_of_house::hosting::<span class="hljs-title function_ invoke__">add_to_waitlist</span>();<br><br>    <span class="hljs-comment">// ç›¸å¯¹è·¯å¾„</span><br>    front_of_house::hosting::<span class="hljs-title function_ invoke__">add_to_waitlist</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ-æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨-super-æ¥å¯¼å…¥çˆ¶æ¨¡å—ä¸­çš„é¡¹"><a href="#3-ğŸŒŸğŸŒŸ-æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨-super-æ¥å¯¼å…¥çˆ¶æ¨¡å—ä¸­çš„é¡¹" class="headerlink" title="3.ğŸŒŸğŸŒŸ æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ super æ¥å¯¼å…¥çˆ¶æ¨¡å—ä¸­çš„é¡¹"></a>3.ğŸŒŸğŸŒŸ æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ super æ¥å¯¼å…¥çˆ¶æ¨¡å—ä¸­çš„é¡¹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><br><span class="hljs-keyword">mod</span> back_of_house &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fix_incorrect_order</span>() &#123;<br>        <span class="hljs-title function_ invoke__">cook_order</span>();<br>        <span class="hljs-comment">// ä½¿ç”¨ä¸‰ç§æ–¹å¼å¡«ç©º</span><br>        <span class="hljs-comment">//1. ä½¿ç”¨å…³é”®å­— `super`</span><br>        <span class="hljs-comment">//2. ä½¿ç”¨ç»å¯¹è·¯å¾„</span><br>        __.<span class="hljs-title function_ invoke__">serve_order</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cook_order</span>() &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><br><span class="hljs-keyword">mod</span> back_of_house &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fix_incorrect_order</span>() &#123;<br>        <span class="hljs-title function_ invoke__">cook_order</span>();<br>        <span class="hljs-comment">// ä½¿ç”¨äºŒç§æ–¹å¼å¡«ç©º</span><br>        <span class="hljs-comment">// 1. ä½¿ç”¨å…³é”®å­— `super`</span><br>        <span class="hljs-comment">// super::front_of_house::serving::serve_order();</span><br>        <span class="hljs-comment">// 2. ä½¿ç”¨ç»å¯¹è·¯å¾„</span><br>        <span class="hljs-comment">// crate::front_of_house::serving::serve_order();</span><br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cook_order</span>() &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å°†æ¨¡å—åˆ†ç¦»å¹¶æ”¾å…¥ç‹¬ç«‹çš„æ–‡ä»¶ä¸­"><a href="#å°†æ¨¡å—åˆ†ç¦»å¹¶æ”¾å…¥ç‹¬ç«‹çš„æ–‡ä»¶ä¸­" class="headerlink" title="å°†æ¨¡å—åˆ†ç¦»å¹¶æ”¾å…¥ç‹¬ç«‹çš„æ–‡ä»¶ä¸­"></a>å°†æ¨¡å—åˆ†ç¦»å¹¶æ”¾å…¥ç‹¬ç«‹çš„æ–‡ä»¶ä¸­</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in lib.rs</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> front_of_house &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> hosting &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_to_waitlist</span>() &#123;&#125;<br><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">seat_at_table</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>            <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sit down please&quot;</span>)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> serving &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_order</span>() &#123;&#125;<br><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">serve_order</span>() &#123;&#125;<br><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_payment</span>() &#123;&#125;<br><br>        <span class="hljs-comment">// æˆ‘çŒœä½ ä¸å¸Œæœ›é¡¾å®¢å¬åˆ°ä½ åœ¨æŠ±æ€¨ä»–ä»¬ï¼Œå› æ­¤è®©è¿™ä¸ªå‡½æ•°ç§æœ‰åŒ–å§</span><br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">complain</span>() &#123;&#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">eat_at_restaurant</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    front_of_house::hosting::<span class="hljs-title function_ invoke__">add_to_waitlist</span>();<br><br>    back_of_house::<span class="hljs-title function_ invoke__">cook_order</span>();<br><br>    <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;yummy yummy!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> back_of_house &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fix_incorrect_order</span>() &#123;<br>        <span class="hljs-title function_ invoke__">cook_order</span>();<br>        crate::front_of_house::serving::<span class="hljs-title function_ invoke__">serve_order</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cook_order</span>() &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ-è¯·å°†ä¸Šé¢çš„æ¨¡å—å’Œä»£ç åˆ†ç¦»åˆ°ä»¥ä¸‹ç›®å½•æ–‡ä»¶ä¸­"><a href="#4-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ-è¯·å°†ä¸Šé¢çš„æ¨¡å—å’Œä»£ç åˆ†ç¦»åˆ°ä»¥ä¸‹ç›®å½•æ–‡ä»¶ä¸­" class="headerlink" title="4.ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ è¯·å°†ä¸Šé¢çš„æ¨¡å—å’Œä»£ç åˆ†ç¦»åˆ°ä»¥ä¸‹ç›®å½•æ–‡ä»¶ä¸­:"></a>4.ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ è¯·å°†ä¸Šé¢çš„æ¨¡å—å’Œä»£ç åˆ†ç¦»åˆ°ä»¥ä¸‹ç›®å½•æ–‡ä»¶ä¸­:</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust">.<br>â”œâ”€â”€ Cargo.toml<br>â”œâ”€â”€ src<br>â”‚   â”œâ”€â”€ back_of_house.rs<br>â”‚   â”œâ”€â”€ front_of_house<br>â”‚   â”‚   â”œâ”€â”€ hosting.rs<br>â”‚   â”‚   â”œâ”€â”€ <span class="hljs-keyword">mod</span>.rs<br>â”‚   â”‚   â””â”€â”€ serving.rs<br>â”‚   â”œâ”€â”€ lib.rs<br>â”‚   â””â”€â”€ main.rs<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in src/lib.rs</span><br><br><span class="hljs-keyword">mod</span> front_of_house;<br><span class="hljs-keyword">mod</span> back_of_house;<br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">eat_at_restaurant</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    front_of_house::hosting::<span class="hljs-title function_ invoke__">add_to_waitlist</span>();<br><br>    back_of_house::<span class="hljs-title function_ invoke__">cook_order</span>();<br><br>    <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;yummy yummy!&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// in src/back_of_house.rs</span><br><br><span class="hljs-keyword">use</span> crate::front_of_house;<br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fix_incorrect_order</span>() &#123;<br>    <span class="hljs-title function_ invoke__">cook_order</span>();<br>    front_of_house::serving::<span class="hljs-title function_ invoke__">serve_order</span>();<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cook_order</span>() &#123;&#125;<br><br><span class="hljs-comment">// in src/front_of_house/mod.rs</span><br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> hosting;<br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> serving;<br><br><span class="hljs-comment">// in src/front_of_house/hosting.rs</span><br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_to_waitlist</span>() &#123;&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">seat_at_table</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sit down please&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// in src/front_of_house/serving.rs</span><br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_order</span>() &#123;&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">serve_order</span>() &#123;&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_payment</span>() &#123;&#125;<br><br><span class="hljs-comment">// Maybe you don&#x27;t want the guest hearing the your complaining about them</span><br><span class="hljs-comment">// So just make it private</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">complain</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="ä»äºŒè¿›åˆ¶åŒ…ä¸­è®¿é—®åº“åŒ…çš„ä»£ç "><a href="#ä»äºŒè¿›åˆ¶åŒ…ä¸­è®¿é—®åº“åŒ…çš„ä»£ç " class="headerlink" title="ä»äºŒè¿›åˆ¶åŒ…ä¸­è®¿é—®åº“åŒ…çš„ä»£ç "></a>ä»äºŒè¿›åˆ¶åŒ…ä¸­è®¿é—®åº“åŒ…çš„ä»£ç </h2><h3 id="è¯·ç¡®ä¿ä½ å·²ç»å®Œæˆäº†ç¬¬å››é¢˜ï¼Œç„¶åå†ç»§ç»­è¿›è¡Œ"><a href="#è¯·ç¡®ä¿ä½ å·²ç»å®Œæˆäº†ç¬¬å››é¢˜ï¼Œç„¶åå†ç»§ç»­è¿›è¡Œ" class="headerlink" title="è¯·ç¡®ä¿ä½ å·²ç»å®Œæˆäº†ç¬¬å››é¢˜ï¼Œç„¶åå†ç»§ç»­è¿›è¡Œ."></a>è¯·ç¡®ä¿ä½ å·²ç»å®Œæˆäº†ç¬¬å››é¢˜ï¼Œç„¶åå†ç»§ç»­è¿›è¡Œ.</h3><p>å½“åˆ°è¾¾æ­¤å¤„æ—¶ï¼Œä½ çš„é¡¹ç›®ç»“æ„åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">.<br>â”œâ”€â”€ Cargo.toml<br>â”œâ”€â”€ src<br>â”‚   â”œâ”€â”€ back_of_house.rs<br>â”‚   â”œâ”€â”€ front_of_house<br>â”‚   â”‚   â”œâ”€â”€ hosting.rs<br>â”‚   â”‚   â”œâ”€â”€ mod.rs<br>â”‚   â”‚   â””â”€â”€ serving.rs<br>â”‚   â”œâ”€â”€ lib.rs<br>â”‚   â””â”€â”€ main.rs<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸç°åœ¨æˆ‘ä»¬å¯ä»¥ä»äºŒè¿›åˆ¶åŒ…ä¸­å‘èµ·å‡½æ•°è°ƒç”¨äº†"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸç°åœ¨æˆ‘ä»¬å¯ä»¥ä»äºŒè¿›åˆ¶åŒ…ä¸­å‘èµ·å‡½æ•°è°ƒç”¨äº†" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸç°åœ¨æˆ‘ä»¬å¯ä»¥ä»äºŒè¿›åˆ¶åŒ…ä¸­å‘èµ·å‡½æ•°è°ƒç”¨äº†."></a>5.ğŸŒŸğŸŒŸğŸŒŸç°åœ¨æˆ‘ä»¬å¯ä»¥ä»äºŒè¿›åˆ¶åŒ…ä¸­å‘èµ·å‡½æ•°è°ƒç”¨äº†.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in src/main.rs</span><br><br><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(__, <span class="hljs-string">&quot;sit down please&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(__,<span class="hljs-string">&quot;yummy yummy!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// in src/main.rs</span><br><br><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(front_of_house::hosting::<span class="hljs-title function_ invoke__">seat_at_table</span>(), <span class="hljs-string">&quot;sit down please&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(hello_package::<span class="hljs-title function_ invoke__">eat_at_restaurant</span>(),<span class="hljs-string">&quot;yummy yummy!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ Rust è¯­è¨€åœ£ç»ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ·±å…¥è®²è§£è¿‡æ¨¡å—moduleï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œç›´æ¥å¼€å§‹æˆ‘ä»¬çš„ç»ƒä¹ ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>14.1.åŒ… Crate</title>
    <link href="https://lilinzta.github.io/2023/10/07/14-1-%E5%8C%85-Crate/"/>
    <id>https://lilinzta.github.io/2023/10/07/14-1-%E5%8C%85-Crate/</id>
    <published>2023-10-07T11:11:41.000Z</published>
    <updated>2024-01-20T11:34:35.707Z</updated>
    
    <content type="html"><![CDATA[<p>package æ˜¯ä½ é€šè¿‡ Cargo åˆ›å»ºçš„å·¥ç¨‹æˆ–é¡¹ç›®ï¼Œå› æ­¤åœ¨ package çš„æ ¹ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ª Cargo.toml æ–‡ä»¶ã€‚</p><span id="more"></span><h3 id="1-ğŸŒŸ-åˆ›å»ºä¸€ä¸ª-packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„"><a href="#1-ğŸŒŸ-åˆ›å»ºä¸€ä¸ª-packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„" class="headerlink" title="1.ğŸŒŸ åˆ›å»ºä¸€ä¸ª packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„:"></a>1.ğŸŒŸ åˆ›å»ºä¸€ä¸ª packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„:</h3><p>Q:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">.<br>â”œâ”€â”€ Cargo.toml<br>â””â”€â”€ src<br>    â””â”€â”€ main.rs<br><br>1 directory, 2 files<br><br><span class="hljs-comment"># in Cargo.toml</span><br>[package]<br>name = <span class="hljs-string">&quot;hello-package&quot;</span><br>version = <span class="hljs-string">&quot;0.1.0&quot;</span><br>edition = <span class="hljs-string">&quot;2021&quot;</span><br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cargo new hello-package<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„! æˆ‘ä»¬ä¼šåœ¨åŒ…ä¸æ¨¡å—ä¸­ä½¿ç”¨ä¸Šé¢çš„é¡¹ç›®ä½œä¸ºæ¼”ç¤ºï¼Œå› æ­¤ä¸è¦åˆ é™¤</p></blockquote><h3 id="2-ğŸŒŸ-åˆ›å»ºä¸€ä¸ª-packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„"><a href="#2-ğŸŒŸ-åˆ›å»ºä¸€ä¸ª-packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„" class="headerlink" title="2.ğŸŒŸ åˆ›å»ºä¸€ä¸ª packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„:"></a>2.ğŸŒŸ åˆ›å»ºä¸€ä¸ª packageï¼Œæ‹¥æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„:</h3><p>Q:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">.<br>â”œâ”€â”€ Cargo.toml<br>â””â”€â”€ src<br>    â””â”€â”€ lib.rs<br><br>1 directory, 2 files<br><br><span class="hljs-comment"># in Cargo.toml</span><br>[package]<br>name = <span class="hljs-string">&quot;hello-package1&quot;</span><br>version = <span class="hljs-string">&quot;0.1.0&quot;</span><br>edition = <span class="hljs-string">&quot;2021&quot;</span><br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cargo new --lib hello-package1<br></code></pre></td></tr></table></figure><blockquote><p>è¯¥é¡¹ç›®å¯ä»¥å®‰å…¨çš„ç§»é™¤</p></blockquote><h3 id="3-ğŸŒŸ"><a href="#3-ğŸŒŸ" class="headerlink" title="3.ğŸŒŸ"></a>3.ğŸŒŸ</h3><p>&#x2F;* ä½¿ç”¨ä½ çš„ç­”æ¡ˆå¡«ç©º *&#x2F;</p><p>Q: package 1# å’Œ 2# çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ ?</p><p>A:</p><p>hello-packageæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶crateå«hello-package, src&#x2F;main.rsæ˜¯æ ¹crate.</p><p>hello-pacakge1æœ‰ä¸€ä¸ªåº“crateå«hello-package1, src&#x2F;lib.rsæ˜¯æ ¹crate.</p><h2 id="åŒ…Crate"><a href="#åŒ…Crate" class="headerlink" title="åŒ…Crate"></a>åŒ…Crate</h2><p>ä¸€ä¸ªåŒ…å¯ä»¥æ˜¯äºŒè¿›åˆ¶ä¹Ÿå¯ä»¥ä¸€ä¸ªä¾èµ–åº“ã€‚æ¯ä¸€ä¸ªåŒ…éƒ½æœ‰ä¸€ä¸ªåŒ…æ ¹ï¼Œä¾‹å¦‚äºŒè¿›åˆ¶åŒ…çš„åŒ…æ ¹æ˜¯ src&#x2F;main.rsï¼Œåº“åŒ…çš„åŒ…æ ¹æ˜¯ src&#x2F;lib.rsã€‚åŒ…æ ¹æ˜¯ç¼–è¯‘å™¨å¼€å§‹å¤„ç†æºä»£ç æ–‡ä»¶çš„åœ°æ–¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åŒ…æ¨¡å—æ ‘çš„æ ¹éƒ¨ã€‚</p><p>åœ¨ package hello-package ä¸­ï¼Œæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶åŒ…ï¼Œè¯¥åŒ…ä¸ package åŒå : hello-package, å…¶ä¸­ src&#x2F;main.rs æ˜¯è¯¥äºŒè¿›åˆ¶åŒ…çš„åŒ…æ ¹.</p><p>ä¸ hello-package ç±»ä¼¼, hello-package1 åŒæ ·åŒ…å«ä¸€ä¸ªåŒ…ï¼Œä½†æ˜¯ä¸ä¹‹å‰çš„äºŒè¿›åˆ¶åŒ…ä¸åŒï¼Œè¯¥ package åŒ…å«çš„æ˜¯åº“åŒ…ï¼Œå…¶ä¸­ src&#x2F;lib.rs æ˜¯å…¶åŒ…æ ¹.</p><h3 id="4-ğŸŒŸ"><a href="#4-ğŸŒŸ" class="headerlink" title="4.ğŸŒŸ"></a>4.ğŸŒŸ</h3><p>Q: package <code>hello-package1</code> ä¸­çš„åº“åŒ…åç§°æ˜¯?</p><p>A: hello-package1</p><h3 id="5-ğŸŒŸğŸŒŸ-ä¸º-hello-package-æ·»åŠ ä¸€ä¸ªåº“åŒ…ï¼Œå¹¶ä¸”å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º"><a href="#5-ğŸŒŸğŸŒŸ-ä¸º-hello-package-æ·»åŠ ä¸€ä¸ªåº“åŒ…ï¼Œå¹¶ä¸”å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º" class="headerlink" title="5.ğŸŒŸğŸŒŸ ä¸º hello-package æ·»åŠ ä¸€ä¸ªåº“åŒ…ï¼Œå¹¶ä¸”å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º:"></a>5.ğŸŒŸğŸŒŸ ä¸º hello-package æ·»åŠ ä¸€ä¸ªåº“åŒ…ï¼Œå¹¶ä¸”å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º:</h3><p>Q:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># å¡«ç©º</span><br>.<br>â”œâ”€â”€ Cargo.lock<br>â”œâ”€â”€ Cargo.toml<br>â”œâ”€â”€ src<br>â”‚Â Â  â”œâ”€â”€ __<br>â”‚Â Â  â””â”€â”€ __<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># å¡«ç©º</span><br>.<br>â”œâ”€â”€ Cargo.lock<br>â”œâ”€â”€ Cargo.toml<br>â”œâ”€â”€ src<br>â”‚Â Â  â”œâ”€â”€ main.rs<br>â”‚Â Â  â””â”€â”€ lib.rs<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šä¸€ä¸ªæ­¥éª¤åï¼Œæˆ‘ä»¬çš„ hello-package ä¸­å·²ç»å­˜åœ¨ä¸¤ä¸ªåŒ…ï¼šä¸€ä¸ªäºŒè¿›åˆ¶åŒ…å’Œä¸€ä¸ªåº“åŒ…ï¼Œä¸¤ä¸ªåŒ…çš„åç§°éƒ½ä¸ package ç›¸åŒï¼šhello-packageã€‚</p><h3 id="6-ğŸŒŸğŸŒŸğŸŒŸ-ä¸€ä¸ª-package-æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ªåº“åŒ…ï¼Œä½†æ˜¯å´å¯ä»¥åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶åŒ…ï¼šé€šè¿‡å°†äºŒè¿›åˆ¶æ–‡ä»¶æ”¾å…¥åˆ°-src-bin-ç›®å½•ä¸‹å®ç°-è¯¥ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶åŒ…ï¼ŒåŒ…åä¸æ–‡ä»¶åç›¸åŒï¼Œä¸å†ä¸-package-çš„åç§°ç›¸åŒã€‚"><a href="#6-ğŸŒŸğŸŒŸğŸŒŸ-ä¸€ä¸ª-package-æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ªåº“åŒ…ï¼Œä½†æ˜¯å´å¯ä»¥åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶åŒ…ï¼šé€šè¿‡å°†äºŒè¿›åˆ¶æ–‡ä»¶æ”¾å…¥åˆ°-src-bin-ç›®å½•ä¸‹å®ç°-è¯¥ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶åŒ…ï¼ŒåŒ…åä¸æ–‡ä»¶åç›¸åŒï¼Œä¸å†ä¸-package-çš„åç§°ç›¸åŒã€‚" class="headerlink" title="6.ğŸŒŸğŸŒŸğŸŒŸ ä¸€ä¸ª package æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ªåº“åŒ…ï¼Œä½†æ˜¯å´å¯ä»¥åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶åŒ…ï¼šé€šè¿‡å°†äºŒè¿›åˆ¶æ–‡ä»¶æ”¾å…¥åˆ° src&#x2F;bin ç›®å½•ä¸‹å®ç°: è¯¥ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶åŒ…ï¼ŒåŒ…åä¸æ–‡ä»¶åç›¸åŒï¼Œä¸å†ä¸ package çš„åç§°ç›¸åŒã€‚"></a>6.ğŸŒŸğŸŒŸğŸŒŸ ä¸€ä¸ª package æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ªåº“åŒ…ï¼Œä½†æ˜¯å´å¯ä»¥åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶åŒ…ï¼šé€šè¿‡å°†äºŒè¿›åˆ¶æ–‡ä»¶æ”¾å…¥åˆ° src&#x2F;bin ç›®å½•ä¸‹å®ç°: è¯¥ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶åŒ…ï¼ŒåŒ…åä¸æ–‡ä»¶åç›¸åŒï¼Œä¸å†ä¸ package çš„åç§°ç›¸åŒã€‚</h3><p>Q:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª package åŒ…å«ä»¥ä¸‹åŒ…ï¼š</span><br><span class="hljs-comment"># 1. ä¸‰ä¸ªäºŒè¿›åˆ¶åŒ…: `hello-package`, `main1` and `main2`</span><br><span class="hljs-comment"># 2. ä¸€ä¸ªåº“åŒ…</span><br><span class="hljs-comment"># å¹¶å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º</span><br>.<br>â”œâ”€â”€ Cargo.toml<br>â”œâ”€â”€ Cargo.lock<br>â”œâ”€â”€ src<br>â”‚   â”œâ”€â”€ __<br>â”‚   â”œâ”€â”€ __<br>â”‚   â””â”€â”€ __<br>â”‚       â””â”€â”€ __<br>â”‚       â””â”€â”€ __<br>â”œâ”€â”€ tests <span class="hljs-comment"># å­˜æ”¾é›†æˆæµ‹è¯•æ–‡ä»¶çš„ç›®å½•</span><br>â”‚   â””â”€â”€ some_integration_tests.rs<br>â”œâ”€â”€ benches <span class="hljs-comment"># å­˜æ”¾ benchmark æ–‡ä»¶çš„ç›®å½•dir for benchmark files</span><br>â”‚   â””â”€â”€ simple_bench.rs<br>â””â”€â”€ examples <span class="hljs-comment"># å­˜æ”¾ç¤ºä¾‹æ–‡ä»¶çš„ç›®å½•</span><br>    â””â”€â”€ simple_example.rs<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª package åŒ…å«ä»¥ä¸‹åŒ…ï¼š</span><br><span class="hljs-comment"># 1. ä¸‰ä¸ªäºŒè¿›åˆ¶åŒ…: `hello-package`, `main1` and `main2`</span><br><span class="hljs-comment"># 2. ä¸€ä¸ªåº“åŒ…</span><br><span class="hljs-comment"># å¹¶å®Œæˆä»¥ä¸‹ç›®å½•ç»“æ„çš„å¡«ç©º</span><br>.<br>â”œâ”€â”€ Cargo.toml<br>â”œâ”€â”€ Cargo.lock<br>â”œâ”€â”€ src<br>â”‚   â”œâ”€â”€ main.rs<br>â”‚   â”œâ”€â”€ lib.rs<br>â”‚   â””â”€â”€ bin<br>â”‚       â””â”€â”€ main1.rs<br>â”‚       â””â”€â”€ main2.rs<br>â”œâ”€â”€ tests <span class="hljs-comment"># å­˜æ”¾é›†æˆæµ‹è¯•æ–‡ä»¶çš„ç›®å½•</span><br>â”‚   â””â”€â”€ some_integration_tests.rs<br>â”œâ”€â”€ benches <span class="hljs-comment"># å­˜æ”¾ benchmark æ–‡ä»¶çš„ç›®å½•dir for benchmark files</span><br>â”‚   â””â”€â”€ simple_bench.rs<br>â””â”€â”€ examples <span class="hljs-comment"># å­˜æ”¾ç¤ºä¾‹æ–‡ä»¶çš„ç›®å½•</span><br>    â””â”€â”€ simple_example.rs<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„ package ç»“æ„éå¸¸æ ‡å‡†ï¼Œä½ å¯ä»¥åœ¨å¾ˆå¤š Rust é¡¹ç›®ä¸­çœ‹åˆ°è¯¥ç»“æ„çš„èº«å½±ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;package æ˜¯ä½ é€šè¿‡ Cargo åˆ›å»ºçš„å·¥ç¨‹æˆ–é¡¹ç›®ï¼Œå› æ­¤åœ¨ package çš„æ ¹ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ª Cargo.toml æ–‡ä»¶ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>13.2.è¿”å›å€¼ result å’Œ ?</title>
    <link href="https://lilinzta.github.io/2023/10/06/13-2-%E8%BF%94%E5%9B%9E%E5%80%BC-result-%E5%92%8C/"/>
    <id>https://lilinzta.github.io/2023/10/06/13-2-%E8%BF%94%E5%9B%9E%E5%80%BC-result-%E5%92%8C/</id>
    <published>2023-10-06T12:14:30.000Z</published>
    <updated>2024-01-20T11:34:53.172Z</updated>
    
    <content type="html"><![CDATA[<p>Result<T> æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ç”¨äºæè¿°è¿”å›çš„ç»“æœæˆ–é”™è¯¯ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªæˆå‘˜(å˜ä½“ variants) :</p><ul><li>Ok(T): è¿”å›ä¸€ä¸ªç»“æœå€¼ T</li><li>Err(e): è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œe æ˜¯å…·ä½“çš„é”™è¯¯å€¼<br>ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœæœŸå¾…ä¸€ä¸ªæ­£ç¡®çš„ç»“æœï¼Œå°±è¿”å› Okï¼Œåä¹‹åˆ™æ˜¯ Errã€‚</li></ul><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> __ &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = n1_str.parse::&lt;<span class="hljs-type">i32</span>&gt;();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n2</span> = n2_str.parse::&lt;<span class="hljs-type">i32</span>&gt;();<br>    <span class="hljs-title function_ invoke__">Ok</span>(n1.<span class="hljs-title function_ invoke__">unwrap</span>() * n2.<span class="hljs-title function_ invoke__">unwrap</span>())<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(result, __);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;t&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(result.__, <span class="hljs-number">8</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = n1_str.parse::&lt;<span class="hljs-type">i32</span>&gt;();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n2</span> = n2_str.parse::&lt;<span class="hljs-type">i32</span>&gt;();<br>    <span class="hljs-title function_ invoke__">Ok</span>(n1.<span class="hljs-title function_ invoke__">unwrap</span>() * n2.<span class="hljs-title function_ invoke__">unwrap</span>())<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(result, <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-number">20</span>));<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(result.<span class="hljs-title function_ invoke__">unwrap</span>(), <span class="hljs-number">8</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title="?"></a>?</h2><p>? è·Ÿ unwrap éå¸¸åƒï¼Œä½†æ˜¯ ? ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œè€Œä¸æ˜¯ç›´æ¥ panic.</p><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// ä½¿ç”¨ `?` æ¥å®ç° multiply</span><br><span class="hljs-comment">// ä¸è¦ä½¿ç”¨ unwrap !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> __ &#123;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;4&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>(), <span class="hljs-number">12</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// ä½¿ç”¨ `?` æ¥å®ç° multiply</span><br><span class="hljs-comment">// ä¸è¦ä½¿ç”¨ unwrap !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = n1_str.parse::&lt;<span class="hljs-type">i32</span>&gt;()?;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n2</span> = n2_str.parse::&lt;<span class="hljs-type">i32</span>&gt;()?;<br>    <span class="hljs-title function_ invoke__">Ok</span>(n1 * n2)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;4&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>(), <span class="hljs-number">12</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">use</span> std::io::&#123;<span class="hljs-keyword">self</span>, Read&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_file1</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;hello.txt&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = <span class="hljs-keyword">match</span> f &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(file) =&gt; file,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">match</span> f.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s) &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(_) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(s),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-comment">// ä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_file2</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br><br>    __;<br><br>    <span class="hljs-title function_ invoke__">Ok</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">read_file1</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>().<span class="hljs-title function_ invoke__">to_string</span>(), <span class="hljs-title function_ invoke__">read_file2</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>().<span class="hljs-title function_ invoke__">to_string</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">use</span> std::io::&#123;<span class="hljs-keyword">self</span>, Read&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_file1</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;hello.txt&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = <span class="hljs-keyword">match</span> f &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(file) =&gt; file,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">match</span> f.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s) &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(_) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(s),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-comment">// ä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_file2</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br><br>    File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;hello.txt&quot;</span>)?.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s)?;<br><br>    <span class="hljs-title function_ invoke__">Ok</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">read_file1</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>().<span class="hljs-title function_ invoke__">to_string</span>(), <span class="hljs-title function_ invoke__">read_file2</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>().<span class="hljs-title function_ invoke__">to_string</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="map-and-then"><a href="#map-and-then" class="headerlink" title="map &amp; and_then"></a>map &amp; and_then</h2><p>map and and_then æ˜¯ä¸¤ä¸ªå¸¸ç”¨çš„ç»„åˆå™¨( combinator )ï¼Œå¯ä»¥ç”¨äº Result&lt;T, E&gt; (ä¹Ÿå¯ç”¨äº Option<T>).</p><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼å¡«ç©º: map, and then</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_two</span>(n_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>   n_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().__<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">add_two</span>(<span class="hljs-string">&quot;4&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>(), <span class="hljs-number">6</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼å¡«ç©º: map, and then</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_two</span>(n_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>   n_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">map</span>(|num| num + <span class="hljs-number">2</span>)<br>   <span class="hljs-comment">// n_str.parse::&lt;i32&gt;().and_then(|num| Ok(num +2))</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">add_two</span>(<span class="hljs-string">&quot;4&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>(), <span class="hljs-number">6</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// ä½¿ç”¨ Result é‡å†™åï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡å¼åŒ¹é…çš„æ–¹å¼æ¥å¤„ç†ï¼Œè€Œæ— éœ€ä½¿ç”¨ `unwrap`</span><br><span class="hljs-comment">// ä½†æ˜¯è¿™ç§å†™æ³•å®åœ¨è¿‡äºå•°å—¦..</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>    <span class="hljs-keyword">match</span> n1_str.parse::&lt;<span class="hljs-type">i32</span>&gt;() &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n1)  =&gt; &#123;<br>            <span class="hljs-keyword">match</span> n2_str.parse::&lt;<span class="hljs-type">i32</span>&gt;() &#123;<br>                <span class="hljs-title function_ invoke__">Ok</span>(n2)  =&gt; &#123;<br>                    <span class="hljs-title function_ invoke__">Ok</span>(n1 * n2)<br>                &#125;,<br>                <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),<br>            &#125;<br>        &#125;,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// é‡å†™ä¸Šé¢çš„ `multiply` ï¼Œè®©å®ƒå°½é‡ç®€ä»‹</span><br><span class="hljs-comment">// æç¤ºï¼šä½¿ç”¨ `and_then` å’Œ `map`</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply1</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>    <span class="hljs-comment">// å®ç°...</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt;) &#123;<br>    <span class="hljs-keyword">match</span> result &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n)  =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;n is &#123;&#125;&quot;</span>, n),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Error: &#123;&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">twenty</span> = <span class="hljs-title function_ invoke__">multiply1</span>(<span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-title function_ invoke__">print</span>(twenty);<br><br>    <span class="hljs-comment">// ä¸‹é¢çš„è°ƒç”¨ä¼šæä¾›æ›´æœ‰å¸®åŠ©çš„é”™è¯¯ä¿¡æ¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">tt</span> = <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;t&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-title function_ invoke__">print</span>(tt);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// ä½¿ç”¨ Result é‡å†™åï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡å¼åŒ¹é…çš„æ–¹å¼æ¥å¤„ç†ï¼Œè€Œæ— éœ€ä½¿ç”¨ `unwrap`</span><br><span class="hljs-comment">// ä½†æ˜¯è¿™ç§å†™æ³•å®åœ¨è¿‡äºå•°å—¦..</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>    <span class="hljs-keyword">match</span> n1_str.parse::&lt;<span class="hljs-type">i32</span>&gt;() &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n1)  =&gt; &#123;<br>            <span class="hljs-keyword">match</span> n2_str.parse::&lt;<span class="hljs-type">i32</span>&gt;() &#123;<br>                <span class="hljs-title function_ invoke__">Ok</span>(n2)  =&gt; &#123;<br>                    <span class="hljs-title function_ invoke__">Ok</span>(n1 * n2)<br>                &#125;,<br>                <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),<br>            &#125;<br>        &#125;,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// é‡å†™ä¸Šé¢çš„ `multiply` ï¼Œè®©å®ƒå°½é‡ç®€ä»‹</span><br><span class="hljs-comment">// æç¤ºï¼šä½¿ç”¨ `and_then` å’Œ `map`</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply1</span>(n1_str: &amp;<span class="hljs-type">str</span>, n2_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; &#123;<br>    <span class="hljs-comment">// å®ç°...</span><br>    n1_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">and_then</span>(|n1| &#123;<br>        n2_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">map</span>(|n2| n1*n2)<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt;) &#123;<br>    <span class="hljs-keyword">match</span> result &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n)  =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;n is &#123;&#125;&quot;</span>, n),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Error: &#123;&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">twenty</span> = <span class="hljs-title function_ invoke__">multiply1</span>(<span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-title function_ invoke__">print</span>(twenty);<br><br>    <span class="hljs-comment">// ä¸‹é¢çš„è°ƒç”¨ä¼šæä¾›æ›´æœ‰å¸®åŠ©çš„é”™è¯¯ä¿¡æ¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">tt</span> = <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;t&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br>    <span class="hljs-title function_ invoke__">print</span>(tt);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h2><p>å¦‚æœæˆ‘ä»¬è¦åœ¨ä»£ç ä¸­åˆ°å¤„ä½¿ç”¨ std::result::Result&lt;T, ParseIntError&gt; ï¼Œé‚£æ¯«æ— ç–‘é—®ï¼Œä»£ç å°†å˜å¾—ç‰¹åˆ«å†—é•¿å’Œå•°å—¦ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥è§£å†³ã€‚</p><p>ä¾‹å¦‚åœ¨æ ‡å‡†åº“ä¸­ï¼Œå°±åœ¨å¤§é‡ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç®€åŒ–ä»£ç : io::Result.</p><h3 id="6-ğŸŒŸ"><a href="#6-ğŸŒŸ" class="headerlink" title="6.ğŸŒŸ"></a>6.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">__</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ä¸Šé¢çš„åˆ«åæ¥å¼•ç”¨åŸæ¥çš„ `Result` ç±»å‹</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(first_number_str: &amp;<span class="hljs-type">str</span>, second_number_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> Res&lt;<span class="hljs-type">i32</span>&gt; &#123;<br>    first_number_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">and_then</span>(|first_number| &#123;<br>        second_number_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">map</span>(|second_number| first_number * second_number)<br>    &#125;)<br>&#125;<br><br><span class="hljs-comment">// åŒæ ·, è¿™é‡Œä¹Ÿä½¿ç”¨äº†ç±»å‹åˆ«åæ¥ç®€åŒ–ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>(result: Res&lt;<span class="hljs-type">i32</span>&gt;) &#123;<br>    <span class="hljs-keyword">match</span> result &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n)  =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;n is &#123;&#125;&quot;</span>, n),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Error: &#123;&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">print</span>(<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>));<br>    <span class="hljs-title function_ invoke__">print</span>(<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;t&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Res</span>&lt;T&gt; = <span class="hljs-type">Result</span>&lt;T, ParseIntError&gt;;<br><br><span class="hljs-comment">// ä½¿ç”¨ä¸Šé¢çš„åˆ«åæ¥å¼•ç”¨åŸæ¥çš„ `Result` ç±»å‹</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>(first_number_str: &amp;<span class="hljs-type">str</span>, second_number_str: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> Res&lt;<span class="hljs-type">i32</span>&gt; &#123;<br>    first_number_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">and_then</span>(|first_number| &#123;<br>        second_number_str.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">map</span>(|second_number| first_number * second_number)<br>    &#125;)<br>&#125;<br><br><span class="hljs-comment">// åŒæ ·, è¿™é‡Œä¹Ÿä½¿ç”¨äº†ç±»å‹åˆ«åæ¥ç®€åŒ–ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>(result: Res&lt;<span class="hljs-type">i32</span>&gt;) &#123;<br>    <span class="hljs-keyword">match</span> result &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n)  =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;n is &#123;&#125;&quot;</span>, n),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Error: &#123;&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">print</span>(<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>));<br>    <span class="hljs-title function_ invoke__">print</span>(<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-string">&quot;t&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åœ¨-fn-main-ä¸­ä½¿ç”¨-Result"><a href="#åœ¨-fn-main-ä¸­ä½¿ç”¨-Result" class="headerlink" title="åœ¨ fn main ä¸­ä½¿ç”¨ Result"></a>åœ¨ fn main ä¸­ä½¿ç”¨ Result</h2><p>ä¸€ä¸ªå…¸å‹çš„ main å‡½æ•°é•¿è¿™æ ·:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Hello World!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>äº‹å®ä¸Š main å‡½æ•°è¿˜å¯ä»¥è¿”å›ä¸€ä¸ª Result ç±»å‹ï¼šå¦‚æœ main å‡½æ•°å†…éƒ¨å‘ç”Ÿäº†é”™è¯¯ï¼Œé‚£è¯¥é”™è¯¯ä¼šè¢«è¿”å›å¹¶ä¸”æ‰“å°å‡ºä¸€æ¡é”™è¯¯çš„ debug ä¿¡æ¯ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), ParseIntError&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">number_str</span> = <span class="hljs-string">&quot;10&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">number</span> = <span class="hljs-keyword">match</span> number_str.parse::&lt;<span class="hljs-type">i32</span>&gt;() &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(number)  =&gt; number,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, number);<br>    <span class="hljs-title function_ invoke__">Ok</span>(())<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Result&lt;T&gt; æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ç”¨äºæè¿°è¿”å›çš„ç»“æœæˆ–é”™è¯¯ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªæˆå‘˜(å˜ä½“ variants) :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ok(T): è¿”å›ä¸€ä¸ªç»“æœå€¼ T&lt;/li&gt;
&lt;li&gt;Err(e): è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œe æ˜¯å…·ä½“çš„é”™è¯¯å€¼&lt;br&gt;ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœæœŸå¾…ä¸€ä¸ªæ­£ç¡®çš„ç»“æœï¼Œ</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>13.1.panic! æ·±å…¥å‰–æ</title>
    <link href="https://lilinzta.github.io/2023/10/04/13-1-panic-%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/"/>
    <id>https://lilinzta.github.io/2023/10/04/13-1-panic-%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90/</id>
    <published>2023-10-04T03:49:11.000Z</published>
    <updated>2024-01-20T11:35:06.929Z</updated>
    
    <content type="html"><![CDATA[<p>Rust ä¸­æœ€ç®€å•çš„é”™è¯¯å¤„ç†æ–¹å¼å°±æ˜¯ä½¿ç”¨ panicã€‚</p><span id="more"></span><p>å®ƒä¼šæ‰“å°å‡ºä¸€æ¡é”™è¯¯ä¿¡æ¯å¹¶æ‰“å°å‡ºæ ˆè°ƒç”¨æƒ…å†µï¼Œæœ€ç»ˆç»“æŸå½“å‰çº¿ç¨‹:</p><ul><li>è‹¥ panic å‘ç”Ÿåœ¨ main çº¿ç¨‹ï¼Œé‚£ç¨‹åºä¼šéšä¹‹é€€å‡º</li><li>å¦‚æœæ˜¯åœ¨ç”Ÿæˆçš„( spawn )å­çº¿ç¨‹ä¸­å‘ç”Ÿ panic, é‚£ä¹ˆå½“å‰çš„çº¿ç¨‹ä¼šç»“æŸï¼Œä½†æ˜¯ç¨‹åºä¾ç„¶ä¼šç»§ç»­è¿è¡Œ</li></ul><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">drink</span>(beverage: &amp;<span class="hljs-type">str</span>) &#123;<br>    <span class="hljs-keyword">if</span> beverage == <span class="hljs-string">&quot;lemonade&quot;</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>);<br>        <span class="hljs-comment">// å®ç°ä¸‹é¢çš„ä»£ç </span><br>        __<br>     &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exercise Failed if printing out this line!&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">drink</span>(__);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exercise Failed if printing out this line!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">drink</span>(beverage: &amp;<span class="hljs-type">str</span>) &#123;<br>    <span class="hljs-keyword">if</span> beverage == <span class="hljs-string">&quot;lemonade&quot;</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>);<br>        <span class="hljs-comment">// å®ç°ä¸‹é¢çš„ä»£ç </span><br>        <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;drink!!!&quot;</span>)<br>     &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exercise Failed if printing out this line!&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">drink</span>(<span class="hljs-string">&quot;lemonade&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exercise Failed if printing out this line!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¸¸è§çš„-panic"><a href="#å¸¸è§çš„-panic" class="headerlink" title="å¸¸è§çš„ panic"></a>å¸¸è§çš„ panic</h2><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰çš„ panicï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-string">&quot;abc&quot;</span>.<span class="hljs-title function_ invoke__">as_bytes</span>(), [<span class="hljs-number">96</span>, <span class="hljs-number">97</span>, <span class="hljs-number">98</span>]);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ele</span> = v[<span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ele</span> = v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br><br>    <span class="hljs-comment">// å¤§éƒ¨åˆ†æ—¶å€™ç¼–è¯‘å™¨æ˜¯å¯ä»¥å¸®æˆ‘ä»¬æå‰å‘ç°æº¢å‡ºé”™è¯¯ï¼Œå¹¶é˜»æ­¢ç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›æ—¶å€™ï¼Œè¿™ç§æº¢å‡ºé—®é¢˜ç›´åˆ°è¿è¡ŒæœŸæ‰ä¼šå‡ºç°</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-title function_ invoke__">production_rate_per_hour</span>(<span class="hljs-number">2</span>);<br><br>    <span class="hljs-title function_ invoke__">divide</span>(<span class="hljs-number">15</span>, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">divide</span>(x:<span class="hljs-type">u8</span>, y:<span class="hljs-type">u8</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, x / y)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">production_rate_per_hour</span>(speed: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">cph</span>: <span class="hljs-type">u8</span> = <span class="hljs-number">221</span>;<br>    <span class="hljs-keyword">match</span> speed &#123;<br>        <span class="hljs-number">1</span>..=<span class="hljs-number">4</span> =&gt; (speed * cph) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>,<br>        <span class="hljs-number">5</span>..=<span class="hljs-number">8</span> =&gt; (speed * cph) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> * <span class="hljs-number">0.9</span>,<br>        <span class="hljs-number">9</span>..=<span class="hljs-number">10</span> =&gt; (speed * cph) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> * <span class="hljs-number">0.77</span>,<br>        _ =&gt; <span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>,<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">working_items_per_minute</span>(speed: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>    (<span class="hljs-title function_ invoke__">production_rate_per_hour</span>(speed) / <span class="hljs-number">60</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">u32</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰çš„ panicï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-string">&quot;abc&quot;</span>.<span class="hljs-title function_ invoke__">as_bytes</span>(), [<span class="hljs-number">97</span>, <span class="hljs-number">98</span>, <span class="hljs-number">99</span>]);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ele</span> = v[<span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ele</span> = v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br><br>    <span class="hljs-comment">// å¤§éƒ¨åˆ†æ—¶å€™ç¼–è¯‘å™¨æ˜¯å¯ä»¥å¸®æˆ‘ä»¬æå‰å‘ç°æº¢å‡ºé”™è¯¯ï¼Œå¹¶é˜»æ­¢ç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›æ—¶å€™ï¼Œè¿™ç§æº¢å‡ºé—®é¢˜ç›´åˆ°è¿è¡ŒæœŸæ‰ä¼šå‡ºç°</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-title function_ invoke__">production_rate_per_hour</span>(<span class="hljs-number">2</span>);<br><br>    <span class="hljs-title function_ invoke__">divide</span>(<span class="hljs-number">15</span>, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">divide</span>(x:<span class="hljs-type">u8</span>, y:<span class="hljs-type">u8</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, x / y)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">production_rate_per_hour</span>(speed: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">cph</span>: <span class="hljs-type">u8</span> = <span class="hljs-number">22</span>;<br>    <span class="hljs-keyword">match</span> speed &#123;<br>        <span class="hljs-number">1</span>..=<span class="hljs-number">4</span> =&gt; (speed * cph) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>,<br>        <span class="hljs-number">5</span>..=<span class="hljs-number">8</span> =&gt; (speed * cph) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> * <span class="hljs-number">0.9</span>,<br>        <span class="hljs-number">9</span>..=<span class="hljs-number">10</span> =&gt; (speed * cph) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> * <span class="hljs-number">0.77</span>,<br>        _ =&gt; <span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>,<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">working_items_per_minute</span>(speed: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>    (<span class="hljs-title function_ invoke__">production_rate_per_hour</span>(speed) / <span class="hljs-number">60</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">u32</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¯¦ç»†çš„æ ˆè°ƒç”¨ä¿¡æ¯"><a href="#è¯¦ç»†çš„æ ˆè°ƒç”¨ä¿¡æ¯" class="headerlink" title="è¯¦ç»†çš„æ ˆè°ƒç”¨ä¿¡æ¯"></a>è¯¦ç»†çš„æ ˆè°ƒç”¨ä¿¡æ¯</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ ˆè°ƒç”¨åªä¼šå±•ç¤ºæœ€åŸºæœ¬çš„ä¿¡æ¯:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust">thread <span class="hljs-symbol">&#x27;main</span>&#x27; panicked at <span class="hljs-symbol">&#x27;index</span> out of bounds: the len is <span class="hljs-number">3</span> but the index is <span class="hljs-number">99</span>&#x27;, src/main.rs:<span class="hljs-number">4</span>:<span class="hljs-number">5</span><br>note: run with `RUST_BACKTRACE=<span class="hljs-number">1</span>` environment variable to display a backtrace<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯:</p><h3 id="3-ğŸŒŸ"><a href="#3-ğŸŒŸ" class="headerlink" title="3.ğŸŒŸ"></a>3.ğŸŒŸ</h3><p>Q:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">## å¡«ç©ºä»¥æ‰“å°å…¨éƒ¨çš„è°ƒç”¨æ ˆ</span><br><span class="hljs-comment">## æç¤º: ä½ å¯ä»¥åœ¨ä¹‹å‰çš„é»˜è®¤ panic ä¿¡æ¯ä¸­æ‰¾åˆ°ç›¸å…³çº¿ç´¢</span><br>$ __ cargo run<br>thread <span class="hljs-string">&#x27;main&#x27;</span> panicked at <span class="hljs-string">&#x27;assertion failed: `(left == right)`</span><br><span class="hljs-string">  left: `[97, 98, 99]`,</span><br><span class="hljs-string"> right: `[96, 97, 98]`&#x27;</span>, src/main.rs:3:5<br>stack backtrace:<br>   0: rust_begin_unwind<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:498:5<br>   1: core::panicking::panic_fmt<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/panicking.rs:116:14<br>   2: core::panicking::assert_failed_inner<br>   3: core::panicking::assert_failed<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/panicking.rs:154:5<br>   4: study_cargo::main<br>             at ./src/main.rs:3:5<br>   5: core::ops::<span class="hljs-keyword">function</span>::FnOnce::call_once<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/ops/function.rs:227:5<br>note: Some details are omitted, run with `RUST_BACKTRACE=full` <span class="hljs-keyword">for</span> a verbose backtrace.<br><br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">## å¡«ç©ºä»¥æ‰“å°å…¨éƒ¨çš„è°ƒç”¨æ ˆ</span><br><span class="hljs-comment">## æç¤º: ä½ å¯ä»¥åœ¨ä¹‹å‰çš„é»˜è®¤ panic ä¿¡æ¯ä¸­æ‰¾åˆ°ç›¸å…³çº¿ç´¢</span><br>$ RUST_BACKTRACE=1 cargo run<br>thread <span class="hljs-string">&#x27;main&#x27;</span> panicked at <span class="hljs-string">&#x27;assertion failed: `(left == right)`</span><br><span class="hljs-string">  left: `[97, 98, 99]`,</span><br><span class="hljs-string"> right: `[96, 97, 98]`&#x27;</span>, src/main.rs:3:5<br>stack backtrace:<br>   0: rust_begin_unwind<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:498:5<br>   1: core::panicking::panic_fmt<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/panicking.rs:116:14<br>   2: core::panicking::assert_failed_inner<br>   3: core::panicking::assert_failed<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/panicking.rs:154:5<br>   4: study_cargo::main<br>             at ./src/main.rs:3:5<br>   5: core::ops::<span class="hljs-keyword">function</span>::FnOnce::call_once<br>             at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/ops/function.rs:227:5<br>note: Some details are omitted, run with `RUST_BACKTRACE=full` <span class="hljs-keyword">for</span> a verbose backtrace.<br><br></code></pre></td></tr></table></figure><h2 id="unwinding-å’Œ-abort"><a href="#unwinding-å’Œ-abort" class="headerlink" title="unwinding å’Œ abort"></a>unwinding å’Œ abort</h2><p>å½“å‡ºç° panic! æ—¶ï¼Œç¨‹åºæä¾›äº†ä¸¤ç§æ–¹å¼æ¥å¤„ç†ç»ˆæ­¢æµç¨‹ï¼šæ ˆå±•å¼€å’Œç›´æ¥ç»ˆæ­¢ã€‚</p><p>å…¶ä¸­ï¼Œé»˜è®¤çš„æ–¹å¼å°±æ˜¯ æ ˆå±•å¼€ï¼Œè¿™æ„å‘³ç€ Rust ä¼šå›æº¯æ ˆä¸Šæ•°æ®å’Œå‡½æ•°è°ƒç”¨ï¼Œå› æ­¤ä¹Ÿæ„å‘³ç€æ›´å¤šçš„å–„åå·¥ä½œï¼Œå¥½å¤„æ˜¯å¯ä»¥ç»™å‡ºå……åˆ†çš„æŠ¥é”™ä¿¡æ¯å’Œæ ˆè°ƒç”¨ä¿¡æ¯ï¼Œä¾¿äºäº‹åçš„é—®é¢˜å¤ç›˜ã€‚ç›´æ¥ç»ˆæ­¢ï¼Œé¡¾åæ€ä¹‰ï¼Œä¸æ¸…ç†æ•°æ®å°±ç›´æ¥é€€å‡ºç¨‹åºï¼Œå–„åå·¥ä½œäº¤ä¸æ“ä½œç³»ç»Ÿæ¥è´Ÿè´£ã€‚</p><p>å¯¹äºç»å¤§å¤šæ•°ç”¨æˆ·ï¼Œä½¿ç”¨é»˜è®¤é€‰æ‹©æ˜¯æœ€å¥½çš„ï¼Œä½†æ˜¯å½“ä½ å…³å¿ƒæœ€ç»ˆç¼–è¯‘å‡ºçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶å¤§å°æ—¶ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•å»ä½¿ç”¨ç›´æ¥ç»ˆæ­¢çš„æ–¹å¼ï¼Œä¾‹å¦‚ä¸‹é¢çš„é…ç½®ä¿®æ”¹ Cargo.toml æ–‡ä»¶ï¼Œå®ç°åœ¨ release æ¨¡å¼ä¸‹é‡åˆ° panic ç›´æ¥ç»ˆæ­¢ï¼š</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs toml"><span class="hljs-section">[profile.release]</span><br><span class="hljs-attr">panic</span> = <span class="hljs-string">&#x27;abort&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Rust ä¸­æœ€ç®€å•çš„é”™è¯¯å¤„ç†æ–¹å¼å°±æ˜¯ä½¿ç”¨ panicã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>12.3.å…¶å®ƒè½¬æ¢</title>
    <link href="https://lilinzta.github.io/2023/10/02/12-3-%E5%85%B6%E5%AE%83%E8%BD%AC%E6%8D%A2/"/>
    <id>https://lilinzta.github.io/2023/10/02/12-3-%E5%85%B6%E5%AE%83%E8%BD%AC%E6%8D%A2/</id>
    <published>2023-10-02T13:06:18.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ-String"><a href="#å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ-String" class="headerlink" title="å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ String"></a>å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ String</h2><p>åªè¦ä¸ºä¸€ä¸ªç±»å‹å®ç°äº† ToStringï¼Œå°±å¯ä»¥å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ Stringã€‚äº‹å®ä¸Šï¼Œè¿™ç§æ–¹å¼å¹¶ä¸æ˜¯æœ€å¥½çš„ï¼Œå¤§å®¶è¿˜è®°å¾— fmt::Display ç‰¹å¾å—ï¼Ÿå®ƒå¯ä»¥æ§åˆ¶ä¸€ä¸ªç±»å‹å¦‚ä½•æ‰“å°ï¼Œåœ¨å®ç°å®ƒçš„æ—¶å€™è¿˜ä¼šè‡ªåŠ¨å®ç° ToStringã€‚</p><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-keyword">use</span> std::fmt;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">i32</span>,<br>    y: <span class="hljs-type">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">Point</span> &#123;<br>    <span class="hljs-comment">// å®ç° fmt æ–¹æ³•</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">origin</span> = Point &#123; x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> &#125;;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-built_in">assert_eq!</span>(origin.__, <span class="hljs-string">&quot;The point is (0, 0)&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-built_in">format!</span>(__), <span class="hljs-string">&quot;The point is (0, 0)&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-keyword">use</span> std::fmt;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">i32</span>,<br>    y: <span class="hljs-type">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">Point</span> &#123;<br>    <span class="hljs-comment">// å®ç° fmt æ–¹æ³•</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> fmt::Formatter&lt;<span class="hljs-symbol">&#x27;_</span>&gt;) <span class="hljs-punctuation">-&gt;</span> fmt::<span class="hljs-type">Result</span> &#123;<br>        <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">&quot;The point is (&#123;&#125;, &#123;&#125;)&quot;</span>, <span class="hljs-keyword">self</span>.x, <span class="hljs-keyword">self</span>.y)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">origin</span> = Point &#123; x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> &#125;;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-built_in">assert_eq!</span>(origin.<span class="hljs-title function_ invoke__">to_string</span>(), <span class="hljs-string">&quot;The point is (0, 0)&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, origin), <span class="hljs-string">&quot;The point is (0, 0)&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è§£æ-String"><a href="#è§£æ-String" class="headerlink" title="è§£æ String"></a>è§£æ String</h2><h3 id="2-ğŸŒŸğŸŒŸğŸŒŸ-ä½¿ç”¨-parse-æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ª-String-è½¬æ¢æˆ-i32-æ•°å­—ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ ‡å‡†åº“ä¸­ä¸º-i32-ç±»å‹å®ç°äº†-FromStr-impl-FromStr-for-i32"><a href="#2-ğŸŒŸğŸŒŸğŸŒŸ-ä½¿ç”¨-parse-æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ª-String-è½¬æ¢æˆ-i32-æ•°å­—ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ ‡å‡†åº“ä¸­ä¸º-i32-ç±»å‹å®ç°äº†-FromStr-impl-FromStr-for-i32" class="headerlink" title="2.ğŸŒŸğŸŒŸğŸŒŸ ä½¿ç”¨ parse æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ª String è½¬æ¢æˆ i32 æ•°å­—ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ ‡å‡†åº“ä¸­ä¸º i32 ç±»å‹å®ç°äº† FromStr: : impl FromStr for i32"></a>2.ğŸŒŸğŸŒŸğŸŒŸ ä½¿ç”¨ parse æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ª String è½¬æ¢æˆ i32 æ•°å­—ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ ‡å‡†åº“ä¸­ä¸º i32 ç±»å‹å®ç°äº† FromStr: : impl FromStr for i32</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸ºäº†ä½¿ç”¨ `from_str` æ–¹æ³•, ä½ éœ€è¦å¼•å…¥è¯¥ç‰¹å¾åˆ°å½“å‰ä½œç”¨åŸŸä¸­</span><br><span class="hljs-keyword">use</span> std::<span class="hljs-type">str</span>::FromStr;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">parsed</span>: <span class="hljs-type">i32</span> = <span class="hljs-string">&quot;5&quot;</span>.__.<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">turbo_parsed</span> = <span class="hljs-string">&quot;10&quot;</span>.__.<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">from_str</span> = __.<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">sum</span> = parsed + turbo_parsed + from_str;<br>    <span class="hljs-built_in">assert_eq!</span>(sum, <span class="hljs-number">35</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸ºäº†ä½¿ç”¨ `from_str` æ–¹æ³•, ä½ éœ€è¦å¼•å…¥è¯¥ç‰¹å¾åˆ°å½“å‰ä½œç”¨åŸŸä¸­</span><br><span class="hljs-keyword">use</span> std::<span class="hljs-type">str</span>::FromStr;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">parsed</span>: <span class="hljs-type">i32</span> = <span class="hljs-string">&quot;5&quot;</span>.<span class="hljs-title function_ invoke__">parse</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">turbo_parsed</span> = <span class="hljs-string">&quot;10&quot;</span>.parse::&lt;<span class="hljs-type">i32</span>&gt;().<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">from_str</span> = <span class="hljs-type">i32</span>::<span class="hljs-title function_ invoke__">from_str</span>(<span class="hljs-string">&quot;20&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">sum</span> = parsed + turbo_parsed + from_str;<br>    <span class="hljs-built_in">assert_eq!</span>(sum, <span class="hljs-number">35</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ-è¿˜å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°-FromStr-ç‰¹å¾"><a href="#3-ğŸŒŸğŸŒŸ-è¿˜å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°-FromStr-ç‰¹å¾" class="headerlink" title="3.ğŸŒŸğŸŒŸ è¿˜å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç° FromStr ç‰¹å¾"></a>3.ğŸŒŸğŸŒŸ è¿˜å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç° FromStr ç‰¹å¾</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::<span class="hljs-type">str</span>::FromStr;<br><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">i32</span>,<br>    y: <span class="hljs-type">i32</span><br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">FromStr</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Point</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Err</span> = ParseIntError;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from_str</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-keyword">Self</span>, <span class="hljs-keyword">Self</span>::<span class="hljs-literal">Err</span>&gt; &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">coords</span>: <span class="hljs-type">Vec</span>&lt;&amp;<span class="hljs-type">str</span>&gt; = s.<span class="hljs-title function_ invoke__">trim_matches</span>(|p| p == <span class="hljs-string">&#x27;(&#x27;</span> || p == <span class="hljs-string">&#x27;)&#x27;</span> )<br>                                 .<span class="hljs-title function_ invoke__">split</span>(<span class="hljs-string">&#x27;,&#x27;</span>)<br>                                 .<span class="hljs-title function_ invoke__">collect</span>();<br><br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">x_fromstr</span> = coords[<span class="hljs-number">0</span>].parse::&lt;<span class="hljs-type">i32</span>&gt;()?;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">y_fromstr</span> = coords[<span class="hljs-number">1</span>].parse::&lt;<span class="hljs-type">i32</span>&gt;()?;<br><br>        <span class="hljs-title function_ invoke__">Ok</span>(Point &#123; x: x_fromstr, y: y_fromstr &#125;)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼å¡«ç©º</span><br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹å…¶å®ƒåœ°æ–¹çš„ä»£ç </span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = __;<br>    <span class="hljs-built_in">assert_eq!</span>(p.<span class="hljs-title function_ invoke__">unwrap</span>(), Point&#123; x: <span class="hljs-number">3</span>, y: <span class="hljs-number">4</span>&#125; );<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::<span class="hljs-type">str</span>::FromStr;<br><span class="hljs-keyword">use</span> std::num::ParseIntError;<br><br><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">i32</span>,<br>    y: <span class="hljs-type">i32</span><br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">FromStr</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Point</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Err</span> = ParseIntError;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from_str</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-keyword">Self</span>, <span class="hljs-keyword">Self</span>::<span class="hljs-literal">Err</span>&gt; &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">coords</span>: <span class="hljs-type">Vec</span>&lt;&amp;<span class="hljs-type">str</span>&gt; = s.<span class="hljs-title function_ invoke__">trim_matches</span>(|p| p == <span class="hljs-string">&#x27;(&#x27;</span> || p == <span class="hljs-string">&#x27;)&#x27;</span> )<br>                                 .<span class="hljs-title function_ invoke__">split</span>(<span class="hljs-string">&#x27;,&#x27;</span>)<br>                                 .<span class="hljs-title function_ invoke__">collect</span>();<br><br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">x_fromstr</span> = coords[<span class="hljs-number">0</span>].parse::&lt;<span class="hljs-type">i32</span>&gt;()?;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">y_fromstr</span> = coords[<span class="hljs-number">1</span>].parse::&lt;<span class="hljs-type">i32</span>&gt;()?;<br><br>        <span class="hljs-title function_ invoke__">Ok</span>(Point &#123; x: x_fromstr, y: y_fromstr &#125;)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼å¡«ç©º</span><br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹å…¶å®ƒåœ°æ–¹çš„ä»£ç </span><br>    <span class="hljs-comment">//1. let p = &quot;(3,4)&quot;.parse::&lt;Point&gt;();</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Point::<span class="hljs-title function_ invoke__">from_str</span>(<span class="hljs-string">&quot;(3,4)&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(p.<span class="hljs-title function_ invoke__">unwrap</span>(), Point&#123; x: <span class="hljs-number">3</span>, y: <span class="hljs-number">4</span>&#125; );<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Deref-ç‰¹å¾"><a href="#Deref-ç‰¹å¾" class="headerlink" title="Deref ç‰¹å¾"></a>Deref ç‰¹å¾</h2><p>Deref ç‰¹å¾åœ¨æ™ºèƒ½æŒ‡é’ˆ - Derefç« èŠ‚ä¸­æœ‰æ›´åŠ è¯¦ç»†çš„ä»‹ç»ã€‚</p><h2 id="transmute"><a href="#transmute" class="headerlink" title="transmute"></a>transmute</h2><p>std::mem::transmute æ˜¯ä¸€ä¸ª unsafe å‡½æ•°ï¼Œå¯ä»¥æŠŠä¸€ä¸ªç±»å‹æŒ‰ä½è§£é‡Šä¸ºå¦ä¸€ä¸ªç±»å‹ï¼Œå…¶ä¸­è¿™ä¸¤ä¸ªç±»å‹å¿…é¡»æœ‰åŒæ ·çš„ä½æ•°( bits )ã€‚</p><p>transmute ç›¸å½“äºå°†ä¸€ä¸ªç±»å‹æŒ‰ä½ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç±»å‹ï¼Œå®ƒä¼šå°†æºå€¼çš„æ‰€æœ‰ä½æ‹·è´åˆ°ç›®æ ‡å€¼ä¸­ï¼Œç„¶åé—å¿˜æºå€¼ã€‚è¯¥å‡½æ•°è·Ÿ C è¯­è¨€ä¸­çš„ memcpy å‡½æ•°ç±»ä¼¼ã€‚</p><p>æ­£å› ä¸ºæ­¤ï¼Œtransmute éå¸¸éå¸¸ä¸å®‰å…¨! è°ƒç”¨è€…å¿…é¡»è¦è‡ªå·±ä¿è¯ä»£ç çš„å®‰å…¨æ€§ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯ unsafe çš„ç›®çš„ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>1.transmute å¯ä»¥å°†ä¸€ä¸ªæŒ‡é’ˆè½¬æ¢æˆä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¯¥è½¬æ¢å¹¶ä¸å…·å¤‡å¯ç§»æ¤æ€§ï¼ŒåŸå› æ˜¯åœ¨ä¸åŒæœºå™¨ä¸Šï¼Œå‡½æ•°æŒ‡é’ˆå’Œæ•°æ®æŒ‡é’ˆå¯èƒ½æœ‰ä¸åŒçš„ä½æ•°( size )ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">pointer</span> = foo <span class="hljs-keyword">as</span> *<span class="hljs-title function_ invoke__">const</span> ();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">function</span> = <span class="hljs-keyword">unsafe</span> &#123;<br>        std::mem::transmute::&lt;*<span class="hljs-title function_ invoke__">const</span> (), <span class="hljs-title function_ invoke__">fn</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>&gt;(pointer)<br>    &#125;;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">function</span>(), <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>2.transmute è¿˜å¯ä»¥æ‰©å±•æˆ–ç¼©çŸ­ä¸€ä¸ªä¸å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå°† Unsafe Rust çš„ä¸å®‰å…¨æ€§ä½“ç°çš„æ·‹æ¼“å°½è‡´!</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">R</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt;(&amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">i32</span>);<br><span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">extend_lifetime</span>&lt;<span class="hljs-symbol">&#x27;b</span>&gt;(r: R&lt;<span class="hljs-symbol">&#x27;b</span>&gt;) <span class="hljs-punctuation">-&gt;</span> R&lt;<span class="hljs-symbol">&#x27;static</span>&gt; &#123;<br>    std::mem::transmute::&lt;R&lt;<span class="hljs-symbol">&#x27;b</span>&gt;, R&lt;<span class="hljs-symbol">&#x27;static</span>&gt;&gt;(r)<br>&#125;<br><br><span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">shorten_invariant_lifetime</span>&lt;<span class="hljs-symbol">&#x27;b</span>, <span class="hljs-symbol">&#x27;c</span>&gt;(r: &amp;<span class="hljs-symbol">&#x27;b</span> <span class="hljs-keyword">mut</span> R&lt;<span class="hljs-symbol">&#x27;static</span>&gt;)<br>                                             <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">&#x27;b</span> <span class="hljs-keyword">mut</span> R&lt;<span class="hljs-symbol">&#x27;c</span>&gt; &#123;<br>    std::mem::transmute::&lt;&amp;<span class="hljs-symbol">&#x27;b</span> <span class="hljs-keyword">mut</span> R&lt;<span class="hljs-symbol">&#x27;static</span>&gt;, &amp;<span class="hljs-symbol">&#x27;b</span> <span class="hljs-keyword">mut</span> R&lt;<span class="hljs-symbol">&#x27;c</span>&gt;&gt;(r)<br>&#125;<br></code></pre></td></tr></table></figure><p>3.äº‹å®ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›å®‰å…¨çš„æ–¹æ³•æ¥æ›¿ä»£ transmute.</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">/*Turning raw bytes(&amp;[u8]) to u32, f64, etc.: */</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">raw_bytes</span> = [<span class="hljs-number">0x78</span>, <span class="hljs-number">0x56</span>, <span class="hljs-number">0x34</span>, <span class="hljs-number">0x12</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-keyword">unsafe</span> &#123; std::mem::transmute::&lt;[<span class="hljs-type">u8</span>; <span class="hljs-number">4</span>], <span class="hljs-type">u32</span>&gt;(raw_bytes) &#125;;<br><br>    <span class="hljs-comment">// use `u32::from_ne_bytes` instead</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-type">u32</span>::<span class="hljs-title function_ invoke__">from_ne_bytes</span>(raw_bytes);<br>    <span class="hljs-comment">// or use `u32::from_le_bytes` or `u32::from_be_bytes` to specify the endianness</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-type">u32</span>::<span class="hljs-title function_ invoke__">from_le_bytes</span>(raw_bytes);<br>    <span class="hljs-built_in">assert_eq!</span>(num, <span class="hljs-number">0x12345678</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-type">u32</span>::<span class="hljs-title function_ invoke__">from_be_bytes</span>(raw_bytes);<br>    <span class="hljs-built_in">assert_eq!</span>(num, <span class="hljs-number">0x78563412</span>);<br><br>    <span class="hljs-comment">/*Turning a pointer into a usize: */</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ptr</span> = &amp;<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ptr_num_transmute</span> = <span class="hljs-keyword">unsafe</span> &#123; std::mem::transmute::&lt;&amp;<span class="hljs-type">i32</span>, <span class="hljs-type">usize</span>&gt;(ptr) &#125;;<br><br>    <span class="hljs-comment">// Use an `as` cast instead</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ptr_num_cast</span> = ptr <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> <span class="hljs-type">i32</span> <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;<br><br>    <span class="hljs-comment">/*Turning an &amp;mut T into an &amp;mut U: */</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ptr</span> = &amp;<span class="hljs-keyword">mut</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">val_transmuted</span> = <span class="hljs-keyword">unsafe</span> &#123; std::mem::transmute::&lt;&amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span>, &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">u32</span>&gt;(ptr) &#125;;<br><br>    <span class="hljs-comment">// Now, put together `as` and reborrowing - note the chaining of `as`</span><br>    <span class="hljs-comment">// `as` is not transitive</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">val_casts</span> = <span class="hljs-keyword">unsafe</span> &#123; &amp;<span class="hljs-keyword">mut</span> *(ptr <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span> <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> <span class="hljs-type">u32</span>) &#125;;<br><br>    <span class="hljs-comment">/*Turning an &amp;str into a &amp;[u8]: */</span><br>    <span class="hljs-comment">// this is not a good way to do this.</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span> = <span class="hljs-keyword">unsafe</span> &#123; std::mem::transmute::&lt;&amp;<span class="hljs-type">str</span>, &amp;[<span class="hljs-type">u8</span>]&gt;(<span class="hljs-string">&quot;Rust&quot;</span>) &#125;;<br>    <span class="hljs-built_in">assert_eq!</span>(slice, &amp;[<span class="hljs-number">82</span>, <span class="hljs-number">117</span>, <span class="hljs-number">115</span>, <span class="hljs-number">116</span>]);<br><br>    <span class="hljs-comment">// You could use `str::as_bytes`</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span> = <span class="hljs-string">&quot;Rust&quot;</span>.<span class="hljs-title function_ invoke__">as_bytes</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(slice, &amp;[<span class="hljs-number">82</span>, <span class="hljs-number">117</span>, <span class="hljs-number">115</span>, <span class="hljs-number">116</span>]);<br><br>    <span class="hljs-comment">// Or, just use a byte string, if you have control over the string</span><br>    <span class="hljs-comment">// literal</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-string">b&quot;Rust&quot;</span>, &amp;[<span class="hljs-number">82</span>, <span class="hljs-number">117</span>, <span class="hljs-number">115</span>, <span class="hljs-number">116</span>]);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ-String&quot;&gt;&lt;a href=&quot;#å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ-String&quot; class=&quot;headerlink&quot; title=&quot;å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ String&quot;&gt;&lt;/a&gt;å°†ä»»ä½•ç±»å‹è½¬æ¢æˆ String&lt;/h2&gt;&lt;p&gt;åªè¦ä¸ºä¸€ä¸ªç±»å‹å®ç°äº† ToStrin</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>12.2.From/Into</title>
    <link href="https://lilinzta.github.io/2023/09/30/12-2-From-Into/"/>
    <id>https://lilinzta.github.io/2023/09/30/12-2-From-Into/</id>
    <published>2023-09-30T12:58:48.000Z</published>
    <updated>2024-01-17T15:05:42.358Z</updated>
    
    <content type="html"><![CDATA[<p>From ç‰¹å¾å…è®¸è®©ä¸€ä¸ªç±»å‹å®šä¹‰å¦‚ä½•åŸºäºå¦ä¸€ä¸ªç±»å‹æ¥åˆ›å»ºè‡ªå·±ï¼Œå› æ­¤å®ƒæä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç±»å‹è½¬æ¢çš„æ–¹å¼ã€‚</p><span id="more"></span><p>From å’Œ Into æ˜¯é…å¯¹çš„ï¼Œæˆ‘ä»¬åªè¦å®ç°äº†å‰è€…ï¼Œé‚£åè€…å°±ä¼šè‡ªåŠ¨è¢«å®ç°ï¼šåªè¦å®ç°äº† impl From<T> for Uï¼Œ å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•: let u: U &#x3D; U::from(T) å’Œ let u:U &#x3D; T.into()ï¼Œå‰è€…ç”± From ç‰¹å¾æä¾›ï¼Œè€Œåè€…ç”±è‡ªåŠ¨å®ç°çš„ Into ç‰¹å¾æä¾›ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½¿ç”¨ into æ–¹æ³•æ—¶ï¼Œä½ éœ€è¦è¿›è¡Œæ˜¾å¼åœ°ç±»å‹æ ‡æ³¨ï¼Œå› ä¸ºç¼–è¯‘å™¨å¾ˆå¯èƒ½æ— æ³•å¸®æˆ‘ä»¬æ¨å¯¼å‡ºæ‰€éœ€çš„ç±»å‹ã€‚</p><p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„å°† &amp;str è½¬æ¢æˆ String</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">my_str</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br><br>    <span class="hljs-comment">// ä»¥ä¸‹ä¸‰ä¸ªè½¬æ¢éƒ½ä¾èµ–äºä¸€ä¸ªäº‹å®ï¼šString å®ç°äº† From&lt;&amp;str&gt; ç‰¹å¾</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">string1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(my_str);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">string2</span> = my_str.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-comment">// è¿™é‡Œéœ€è¦æ˜¾å¼åœ°ç±»å‹æ ‡æ³¨</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">string3</span>: <span class="hljs-type">String</span> = my_str.<span class="hljs-title function_ invoke__">into</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ç§è½¬æ¢å¯ä»¥å‘ç”Ÿæ˜¯å› ä¸ºæ ‡å‡†åº“å·²ç»å¸®æˆ‘ä»¬å®ç°äº† From ç‰¹å¾ï¼š impl From&lt;&amp;â€™_ str&gt; for Stringã€‚ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œ)æ‰¾åˆ°å…¶å®ƒå®ç° From ç‰¹å¾çš„å¸¸ç”¨ç±»å‹ã€‚</p><h3 id="1-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>     <span class="hljs-comment">// impl From&lt;bool&gt; for i32</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i1</span>:<span class="hljs-type">i32</span> = <span class="hljs-literal">false</span>.<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i2</span>:<span class="hljs-type">i32</span> = <span class="hljs-type">i32</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-literal">false</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(i1, i2);<br>    <span class="hljs-built_in">assert_eq!</span>(i1, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼ä¿®å¤é”™è¯¯</span><br>    <span class="hljs-comment">// 1. å“ªä¸ªç±»å‹å®ç° From ç‰¹å¾ : impl From&lt;char&gt; for ? , ä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ä¹‹å‰æåˆ°çš„æ–‡æ¡£ï¼Œæ¥æ‰¾åˆ°åˆé€‚çš„ç±»å‹</span><br>    <span class="hljs-comment">// 2. ä¸Šä¸€ç« èŠ‚ä¸­ä»‹ç»è¿‡çš„æŸä¸ªå…³é”®å­—</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i3</span>: <span class="hljs-type">i32</span> = <span class="hljs-string">&#x27;a&#x27;</span>.<span class="hljs-title function_ invoke__">into</span>();<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è§£å†³é”™è¯¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">String</span>;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>     <span class="hljs-comment">// impl From&lt;bool&gt; for i32</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i1</span>:<span class="hljs-type">i32</span> = <span class="hljs-literal">false</span>.<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i2</span>:<span class="hljs-type">i32</span> = <span class="hljs-type">i32</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-literal">false</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(i1, i2);<br>    <span class="hljs-built_in">assert_eq!</span>(i1, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼ä¿®å¤é”™è¯¯</span><br>    <span class="hljs-comment">// 1. å“ªä¸ªç±»å‹å®ç° From ç‰¹å¾ : impl From&lt;char&gt; for ? , ä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ä¹‹å‰æåˆ°çš„æ–‡æ¡£ï¼Œæ¥æ‰¾åˆ°åˆé€‚çš„ç±»å‹</span><br>    <span class="hljs-comment">// 2. ä¸Šä¸€ç« èŠ‚ä¸­ä»‹ç»è¿‡çš„æŸä¸ªå…³é”®å­—</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i3</span>: <span class="hljs-type">u32</span> = <span class="hljs-string">&#x27;a&#x27;</span>.<span class="hljs-title function_ invoke__">into</span>();<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è§£å†³é”™è¯¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-string">&#x27;a&#x27;</span>.<span class="hljs-title function_ invoke__">into</span>();<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>     <span class="hljs-comment">// impl From&lt;bool&gt; for i32</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i1</span>:<span class="hljs-type">i32</span> = <span class="hljs-literal">false</span>.<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i2</span>:<span class="hljs-type">i32</span> = <span class="hljs-type">i32</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-literal">false</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(i1, i2);<br>    <span class="hljs-built_in">assert_eq!</span>(i1, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹å¼ä¿®å¤é”™è¯¯</span><br>    <span class="hljs-comment">// 1. å“ªä¸ªç±»å‹å®ç° From ç‰¹å¾ : impl From&lt;char&gt; for ? , ä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ä¹‹å‰æåˆ°çš„æ–‡æ¡£ï¼Œæ¥æ‰¾åˆ°åˆé€‚çš„ç±»å‹</span><br>    <span class="hljs-comment">// 2. ä¸Šä¸€ç« èŠ‚ä¸­ä»‹ç»è¿‡çš„æŸä¸ªå…³é”®å­—</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i3</span>: <span class="hljs-type">i32</span> = <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è§£å†³é”™è¯¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&#x27;a&#x27;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°-From-ç‰¹å¾"><a href="#ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°-From-ç‰¹å¾" class="headerlink" title="ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç° From ç‰¹å¾"></a>ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç° From ç‰¹å¾</h2><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// From è¢«åŒ…å«åœ¨ `std::prelude` ä¸­ï¼Œå› æ­¤æˆ‘ä»¬æ²¡å¿…è¦æ‰‹åŠ¨å°†å…¶å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸæ¥</span><br><span class="hljs-comment">// use std::convert::From;</span><br><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Number</span> &#123;<br>    value: <span class="hljs-type">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;<span class="hljs-type">i32</span>&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Number</span> &#123;<br>    <span class="hljs-comment">// å®ç° `from` æ–¹æ³•</span><br>&#125;<br><br><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = __(<span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(num.value, <span class="hljs-number">30</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span>: Number = __;<br>    <span class="hljs-built_in">assert_eq!</span>(num.value, <span class="hljs-number">30</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// From è¢«åŒ…å«åœ¨ `std::prelude` ä¸­ï¼Œå› æ­¤æˆ‘ä»¬æ²¡å¿…è¦æ‰‹åŠ¨å°†å…¶å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸæ¥</span><br><span class="hljs-comment">// use std::convert::From;</span><br><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Number</span> &#123;<br>    value: <span class="hljs-type">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;<span class="hljs-type">i32</span>&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Number</span> &#123;<br>    <span class="hljs-comment">// å®ç° `from` æ–¹æ³•</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(item: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        Number &#123; value: item &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = Number::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(num.value, <span class="hljs-number">30</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span>: Number = <span class="hljs-number">30</span>.<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(num.value, <span class="hljs-number">30</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ-å½“æ‰§è¡Œé”™è¯¯å¤„ç†æ—¶ï¼Œä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹å®ç°-From-ç‰¹å¾æ˜¯éå¸¸æœ‰ç”¨ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡-è‡ªåŠ¨å°†æŸä¸ªé”™è¯¯ç±»å‹è½¬æ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ-å½“æ‰§è¡Œé”™è¯¯å¤„ç†æ—¶ï¼Œä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹å®ç°-From-ç‰¹å¾æ˜¯éå¸¸æœ‰ç”¨ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡-è‡ªåŠ¨å°†æŸä¸ªé”™è¯¯ç±»å‹è½¬æ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ å½“æ‰§è¡Œé”™è¯¯å¤„ç†æ—¶ï¼Œä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹å®ç° From ç‰¹å¾æ˜¯éå¸¸æœ‰ç”¨ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡ ? è‡ªåŠ¨å°†æŸä¸ªé”™è¯¯ç±»å‹è½¬æ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹"></a>3.ğŸŒŸğŸŒŸğŸŒŸ å½“æ‰§è¡Œé”™è¯¯å¤„ç†æ—¶ï¼Œä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹å®ç° From ç‰¹å¾æ˜¯éå¸¸æœ‰ç”¨ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡ ? è‡ªåŠ¨å°†æŸä¸ªé”™è¯¯ç±»å‹è½¬æ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs;<br><span class="hljs-keyword">use</span> std::io;<br><span class="hljs-keyword">use</span> std::num;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CliError</span> &#123;<br>    <span class="hljs-title function_ invoke__">IoError</span>(io::Error),<br>    <span class="hljs-title function_ invoke__">ParseError</span>(num::ParseIntError),<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">CliError</span> &#123;<br>    <span class="hljs-comment">// å®ç° from æ–¹æ³•</span><br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;num::ParseIntError&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">CliError</span> &#123;<br>    <span class="hljs-comment">// å®ç° from æ–¹æ³•</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">open_and_parse_file</span>(file_name: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, CliError&gt; &#123;<br>    <span class="hljs-comment">// ? è‡ªåŠ¨å°† io::Error è½¬æ¢æˆ CliError</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">contents</span> = fs::<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;file_name)?;<br>    <span class="hljs-comment">// num::ParseIntError -&gt; CliError</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span>: <span class="hljs-type">i32</span> = contents.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">parse</span>()?;<br>    <span class="hljs-title function_ invoke__">Ok</span>(num)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs;<br><span class="hljs-keyword">use</span> std::io;<br><span class="hljs-keyword">use</span> std::num;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CliError</span> &#123;<br>    <span class="hljs-title function_ invoke__">IoError</span>(io::Error),<br>    <span class="hljs-title function_ invoke__">ParseError</span>(num::ParseIntError),<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">CliError</span> &#123;<br>    <span class="hljs-comment">// å®ç° from æ–¹æ³•</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(error: io::Error) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        CliError::<span class="hljs-title function_ invoke__">IoError</span>(error)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;num::ParseIntError&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">CliError</span> &#123;<br>    <span class="hljs-comment">// å®ç° from æ–¹æ³•</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(error: num::ParseIntError) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        CliError::<span class="hljs-title function_ invoke__">ParseError</span>(error)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">open_and_parse_file</span>(file_name: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, CliError&gt; &#123;<br>    <span class="hljs-comment">// ? è‡ªåŠ¨å°† io::Error è½¬æ¢æˆ CliError</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">contents</span> = fs::<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;file_name)?;<br>    <span class="hljs-comment">// num::ParseIntError -&gt; CliError</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span>: <span class="hljs-type">i32</span> = contents.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">parse</span>()?;<br>    <span class="hljs-title function_ invoke__">Ok</span>(num)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="TryFrom-TryInto"><a href="#TryFrom-TryInto" class="headerlink" title="TryFrom&#x2F;TryInto"></a>TryFrom&#x2F;TryInto</h2><p>ç±»ä¼¼äº From å’Œ Into, TryFrom å’Œ TryInto ä¹Ÿæ˜¯ç”¨äºç±»å‹è½¬æ¢çš„æ³›å‹ç‰¹å¾ã€‚</p><p>ä½†æ˜¯åˆä¸ From&#x2F;Into ä¸åŒ, TryFrom å’Œ TryInto å¯ä»¥å¯¹è½¬æ¢åçš„å¤±è´¥è¿›è¡Œå¤„ç†ï¼Œç„¶åè¿”å›ä¸€ä¸ª Resultã€‚</p><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// TryFrom å’Œ TryInto ä¹Ÿè¢«åŒ…å«åœ¨ `std::prelude` ä¸­, å› æ­¤ä»¥ä¸‹å¼•å…¥æ˜¯æ²¡å¿…è¦çš„</span><br><span class="hljs-comment">// use std::convert::TryInto;</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span>: <span class="hljs-type">i16</span> = <span class="hljs-number">256</span>;<br><br>    <span class="hljs-comment">// Into ç‰¹å¾æ‹¥æœ‰ä¸€ä¸ªæ–¹æ³•`into`,</span><br>    <span class="hljs-comment">// å› æ­¤ TryInto æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ ?</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span>: <span class="hljs-type">u8</span> = <span class="hljs-keyword">match</span> n.__() &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n) =&gt; n,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;there is an error when converting: &#123;:?&#125;, but we catch it&quot;</span>, e.<span class="hljs-title function_ invoke__">to_string</span>());<br>            <span class="hljs-number">0</span><br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(n, __);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// TryFrom å’Œ TryInto ä¹Ÿè¢«åŒ…å«åœ¨ `std::prelude` ä¸­, å› æ­¤ä»¥ä¸‹å¼•å…¥æ˜¯æ²¡å¿…è¦çš„</span><br><span class="hljs-comment">// use std::convert::TryInto;</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span>: <span class="hljs-type">i16</span> = <span class="hljs-number">256</span>;<br><br>    <span class="hljs-comment">// Into ç‰¹å¾æ‹¥æœ‰ä¸€ä¸ªæ–¹æ³•`into`,</span><br>    <span class="hljs-comment">// å› æ­¤ TryInto æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ ?</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span>: <span class="hljs-type">u8</span> = <span class="hljs-keyword">match</span> n.<span class="hljs-title function_ invoke__">try_into</span>() &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(n) =&gt; n,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;there is an error when converting: &#123;:?&#125;, but we catch it&quot;</span>, e.<span class="hljs-title function_ invoke__">to_string</span>());<br>            <span class="hljs-number">0</span><br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(n, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">EvenNum</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TryFrom</span>&lt;<span class="hljs-type">i32</span>&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">EvenNum</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Error</span> = ();<br><br>    <span class="hljs-comment">// å®ç° `try_from`</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">try_from</span>(value: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-keyword">Self</span>, <span class="hljs-keyword">Self</span>::Error&gt; &#123;<br>        <span class="hljs-keyword">if</span> value % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">EvenNum</span>(value))<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-title function_ invoke__">Err</span>(())<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(EvenNum::<span class="hljs-title function_ invoke__">try_from</span>(<span class="hljs-number">8</span>), <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">EvenNum</span>(<span class="hljs-number">8</span>)));<br>    <span class="hljs-built_in">assert_eq!</span>(EvenNum::<span class="hljs-title function_ invoke__">try_from</span>(<span class="hljs-number">5</span>), <span class="hljs-title function_ invoke__">Err</span>(()));<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span>: <span class="hljs-type">Result</span>&lt;EvenNum, ()&gt; = <span class="hljs-number">8i32</span>.<span class="hljs-title function_ invoke__">try_into</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(result, __);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span>: <span class="hljs-type">Result</span>&lt;EvenNum, ()&gt; = <span class="hljs-number">5i32</span>.<span class="hljs-title function_ invoke__">try_into</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(result, __);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">EvenNum</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TryFrom</span>&lt;<span class="hljs-type">i32</span>&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">EvenNum</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Error</span> = ();<br><br>    <span class="hljs-comment">// å®ç° `try_from`</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">try_from</span>(value: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-keyword">Self</span>, <span class="hljs-keyword">Self</span>::Error&gt; &#123;<br>        <span class="hljs-keyword">if</span> value % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">EvenNum</span>(value))<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-title function_ invoke__">Err</span>(())<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(EvenNum::<span class="hljs-title function_ invoke__">try_from</span>(<span class="hljs-number">8</span>), <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">EvenNum</span>(<span class="hljs-number">8</span>)));<br>    <span class="hljs-built_in">assert_eq!</span>(EvenNum::<span class="hljs-title function_ invoke__">try_from</span>(<span class="hljs-number">5</span>), <span class="hljs-title function_ invoke__">Err</span>(()));<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span>: <span class="hljs-type">Result</span>&lt;EvenNum, ()&gt; = <span class="hljs-number">8i32</span>.<span class="hljs-title function_ invoke__">try_into</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(result, <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">EvenNum</span>(<span class="hljs-number">8</span>)));<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span>: <span class="hljs-type">Result</span>&lt;EvenNum, ()&gt; = <span class="hljs-number">5i32</span>.<span class="hljs-title function_ invoke__">try_into</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(result, <span class="hljs-title function_ invoke__">Err</span>(()));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;From ç‰¹å¾å…è®¸è®©ä¸€ä¸ªç±»å‹å®šä¹‰å¦‚ä½•åŸºäºå¦ä¸€ä¸ªç±»å‹æ¥åˆ›å»ºè‡ªå·±ï¼Œå› æ­¤å®ƒæä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç±»å‹è½¬æ¢çš„æ–¹å¼ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>12.1.as</title>
    <link href="https://lilinzta.github.io/2023/09/28/12-1-as/"/>
    <id>https://lilinzta.github.io/2023/09/28/12-1-as/</id>
    <published>2023-09-28T01:09:10.000Z</published>
    <updated>2024-01-17T15:05:42.358Z</updated>
    
    <content type="html"><![CDATA[<p>Rust å¹¶æ²¡æœ‰ä¸ºåŸºæœ¬ç±»å‹æä¾›éšå¼çš„ç±»å‹è½¬æ¢( coercion )ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ as æ¥è¿›è¡Œæ˜¾å¼åœ°è½¬æ¢ã€‚</p><span id="more"></span><h3 id="1-ğŸŒŸ"><a href="#1-ğŸŒŸ" class="headerlink" title="1.ğŸŒŸ"></a>1.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œå¡«ç©º</span><br><span class="hljs-comment">// ä¸è¦ç§»é™¤ä»»ä½•ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">decimal</span> = <span class="hljs-number">97.123_f32</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">integer</span>: __ = decimal <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c1</span>: <span class="hljs-type">char</span> = decimal <span class="hljs-keyword">as</span> <span class="hljs-type">char</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c2</span> = integer <span class="hljs-keyword">as</span> <span class="hljs-type">char</span>;<br><br>    <span class="hljs-built_in">assert_eq!</span>(integer, <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œå¡«ç©º</span><br><span class="hljs-comment">// ä¸è¦ç§»é™¤ä»»ä½•ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">decimal</span> = <span class="hljs-number">97.123_f32</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">integer</span>: <span class="hljs-type">u8</span> = decimal <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c1</span>: <span class="hljs-type">char</span> = decimal <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span> <span class="hljs-keyword">as</span> <span class="hljs-type">char</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c2</span> = integer <span class="hljs-keyword">as</span> <span class="hljs-type">char</span>;<br><br>    <span class="hljs-built_in">assert_eq!</span>(integer, <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span> - <span class="hljs-number">1</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-é»˜è®¤æƒ…å†µä¸‹-æ•°å€¼æº¢å‡ºä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€è¡Œå…¨å±€æ³¨è§£çš„æ–¹å¼æ¥é¿å…ç¼–è¯‘é”™è¯¯-æº¢å‡ºè¿˜æ˜¯ä¼šå‘ç”Ÿ"><a href="#2-ğŸŒŸğŸŒŸ-é»˜è®¤æƒ…å†µä¸‹-æ•°å€¼æº¢å‡ºä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€è¡Œå…¨å±€æ³¨è§£çš„æ–¹å¼æ¥é¿å…ç¼–è¯‘é”™è¯¯-æº¢å‡ºè¿˜æ˜¯ä¼šå‘ç”Ÿ" class="headerlink" title="2.ğŸŒŸğŸŒŸ é»˜è®¤æƒ…å†µä¸‹, æ•°å€¼æº¢å‡ºä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€è¡Œå…¨å±€æ³¨è§£çš„æ–¹å¼æ¥é¿å…ç¼–è¯‘é”™è¯¯(æº¢å‡ºè¿˜æ˜¯ä¼šå‘ç”Ÿ)"></a>2.ğŸŒŸğŸŒŸ é»˜è®¤æƒ…å†µä¸‹, æ•°å€¼æº¢å‡ºä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€è¡Œå…¨å±€æ³¨è§£çš„æ–¹å¼æ¥é¿å…ç¼–è¯‘é”™è¯¯(æº¢å‡ºè¿˜æ˜¯ä¼šå‘ç”Ÿ)</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-type">u8</span>::MAX, <span class="hljs-number">255</span>);<br>    <span class="hljs-comment">// å¦‚ä¸Šæ‰€ç¤ºï¼Œu8 ç±»å‹å…è®¸çš„æœ€å¤§å€¼æ˜¯ 255.</span><br>    <span class="hljs-comment">// å› æ­¤ä»¥ä¸‹ä»£ç ä¼šæŠ¥æº¢å‡ºçš„é”™è¯¯ï¼š literal out of range for `u8`.</span><br>    <span class="hljs-comment">// **è¯·ä»”ç»†æŸ¥çœ‹ç›¸åº”çš„ç¼–è¯‘é”™è¯¯ï¼Œä»ä¸­å¯»æ‰¾åˆ°è§£å†³çš„åŠæ³•**</span><br>    <span class="hljs-comment">// **ä¸è¦ä¿®æ”¹ main ä¸­çš„ä»»ä½•ä»£ç **</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-number">1000</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[allow(overflowing_literals)]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-type">u8</span>::MAX, <span class="hljs-number">255</span>);<br>    <span class="hljs-comment">// å¦‚ä¸Šæ‰€ç¤ºï¼Œu8 ç±»å‹å…è®¸çš„æœ€å¤§å€¼æ˜¯ 255.</span><br>    <span class="hljs-comment">// å› æ­¤ä»¥ä¸‹ä»£ç ä¼šæŠ¥æº¢å‡ºçš„é”™è¯¯ï¼š literal out of range for `u8`.</span><br>    <span class="hljs-comment">// **è¯·ä»”ç»†æŸ¥çœ‹ç›¸åº”çš„ç¼–è¯‘é”™è¯¯ï¼Œä»ä¸­å¯»æ‰¾åˆ°è§£å†³çš„åŠæ³•**</span><br>    <span class="hljs-comment">// **ä¸è¦ä¿®æ”¹ main ä¸­çš„ä»»ä½•ä»£ç **</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-number">1000</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ-å½“å°†ä»»ä½•æ•°å€¼è½¬æ¢æˆæ— ç¬¦å·æ•´å‹-T-æ—¶ï¼Œå¦‚æœå½“å‰çš„æ•°å€¼ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å½“å‰æ•°å€¼è¿›è¡ŒåŠ å€¼æˆ–å‡å€¼æ“ä½œ-å¢åŠ æˆ–å‡å°‘-T-MAX-1-ï¼Œç›´åˆ°æœ€æ–°çš„å€¼åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œå‡è®¾æˆ‘ä»¬è¦å°†-300-è½¬æˆ-u8-ç±»å‹ï¼Œç”±äºu8-æœ€å¤§å€¼æ˜¯-255ï¼Œå› æ­¤-300-ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…å¹¶ä¸”å¤§äºæ–°ç±»å‹çš„æœ€å¤§å€¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å‡å»-T-MAX-1ï¼Œä¹Ÿå°±æ˜¯-300-256-44ã€‚"><a href="#3-ğŸŒŸğŸŒŸ-å½“å°†ä»»ä½•æ•°å€¼è½¬æ¢æˆæ— ç¬¦å·æ•´å‹-T-æ—¶ï¼Œå¦‚æœå½“å‰çš„æ•°å€¼ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å½“å‰æ•°å€¼è¿›è¡ŒåŠ å€¼æˆ–å‡å€¼æ“ä½œ-å¢åŠ æˆ–å‡å°‘-T-MAX-1-ï¼Œç›´åˆ°æœ€æ–°çš„å€¼åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œå‡è®¾æˆ‘ä»¬è¦å°†-300-è½¬æˆ-u8-ç±»å‹ï¼Œç”±äºu8-æœ€å¤§å€¼æ˜¯-255ï¼Œå› æ­¤-300-ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…å¹¶ä¸”å¤§äºæ–°ç±»å‹çš„æœ€å¤§å€¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å‡å»-T-MAX-1ï¼Œä¹Ÿå°±æ˜¯-300-256-44ã€‚" class="headerlink" title="3.ğŸŒŸğŸŒŸ å½“å°†ä»»ä½•æ•°å€¼è½¬æ¢æˆæ— ç¬¦å·æ•´å‹ T æ—¶ï¼Œå¦‚æœå½“å‰çš„æ•°å€¼ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å½“å‰æ•°å€¼è¿›è¡ŒåŠ å€¼æˆ–å‡å€¼æ“ä½œ( å¢åŠ æˆ–å‡å°‘ T::MAX + 1 )ï¼Œç›´åˆ°æœ€æ–°çš„å€¼åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œå‡è®¾æˆ‘ä»¬è¦å°† 300 è½¬æˆ u8 ç±»å‹ï¼Œç”±äºu8 æœ€å¤§å€¼æ˜¯ 255ï¼Œå› æ­¤ 300 ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…å¹¶ä¸”å¤§äºæ–°ç±»å‹çš„æœ€å¤§å€¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å‡å» T::MAX + 1ï¼Œä¹Ÿå°±æ˜¯ 300 - 256 &#x3D; 44ã€‚"></a>3.ğŸŒŸğŸŒŸ å½“å°†ä»»ä½•æ•°å€¼è½¬æ¢æˆæ— ç¬¦å·æ•´å‹ T æ—¶ï¼Œå¦‚æœå½“å‰çš„æ•°å€¼ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å½“å‰æ•°å€¼è¿›è¡ŒåŠ å€¼æˆ–å‡å€¼æ“ä½œ( å¢åŠ æˆ–å‡å°‘ T::MAX + 1 )ï¼Œç›´åˆ°æœ€æ–°çš„å€¼åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…ï¼Œå‡è®¾æˆ‘ä»¬è¦å°† 300 è½¬æˆ u8 ç±»å‹ï¼Œç”±äºu8 æœ€å¤§å€¼æ˜¯ 255ï¼Œå› æ­¤ 300 ä¸åœ¨æ–°ç±»å‹çš„èŒƒå›´å†…å¹¶ä¸”å¤§äºæ–°ç±»å‹çš„æœ€å¤§å€¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å‡å» T::MAX + 1ï¼Œä¹Ÿå°±æ˜¯ 300 - 256 &#x3D; 44ã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">1000</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u16</span>, __);<br><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">1000</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, __);<br><br>    <span class="hljs-comment">// äº‹å®ä¸Šï¼Œä¹‹å‰è¯´çš„è§„åˆ™å¯¹äºæ­£æ•´æ•°è€Œè¨€ï¼Œå°±æ˜¯å¦‚ä¸‹çš„å–æ¨¡</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;1000 mod 256 is : &#123;&#125;&quot;</span>, <span class="hljs-number">1000</span> % <span class="hljs-number">256</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(-<span class="hljs-number">1_i8</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, __);<br><br><br>    <span class="hljs-comment">// ä» Rust 1.45 å¼€å§‹ï¼Œå½“æµ®ç‚¹æ•°è¶…å‡ºç›®æ ‡æ•´æ•°çš„èŒƒå›´æ—¶ï¼Œè½¬åŒ–ä¼šç›´æ¥å–æ­£æ•´æ•°å–å€¼èŒƒå›´çš„æœ€å¤§æˆ–æœ€å°å€¼</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">300.1_f32</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, __);<br>    <span class="hljs-built_in">assert_eq!</span>(-<span class="hljs-number">100.1_f32</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, __);<br><br><br>    <span class="hljs-comment">// ä¸Šé¢çš„æµ®ç‚¹æ•°è½¬æ¢æœ‰ä¸€ç‚¹æ€§èƒ½æŸè€—ï¼Œå¦‚æœå¤§å®¶å¯¹äºæŸæ®µä»£ç æœ‰æè‡´çš„æ€§èƒ½è¦æ±‚ï¼Œ</span><br>    <span class="hljs-comment">// å¯ä»¥è€ƒè™‘ä¸‹é¢çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•çš„ç»“æœå¯èƒ½ä¼šæº¢å‡ºå¹¶ä¸”è¿”å›ä¸€äº›æ— æ„ä¹‰çš„å€¼</span><br>    <span class="hljs-comment">// æ€»ä¹‹ï¼Œè¯·å°å¿ƒä½¿ç”¨</span><br>    <span class="hljs-keyword">unsafe</span> &#123;<br>        <span class="hljs-comment">// 300.0 is 44</span><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;300.0 is &#123;&#125;&quot;</span>, <span class="hljs-number">300.0_f32</span>.to_int_unchecked::&lt;<span class="hljs-type">u8</span>&gt;());<br>        <span class="hljs-comment">// -100.0 as u8 is 156</span><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;-100.0 as u8 is &#123;&#125;&quot;</span>, (-<span class="hljs-number">100.0_f32</span>).to_int_unchecked::&lt;<span class="hljs-type">u8</span>&gt;());<br>        <span class="hljs-comment">// nan as u8 is 0</span><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;nan as u8 is &#123;&#125;&quot;</span>, <span class="hljs-type">f32</span>::NAN.to_int_unchecked::&lt;<span class="hljs-type">u8</span>&gt;());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[allow(overflowing_literals)]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">1000</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u16</span>, <span class="hljs-number">1000</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">1000</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, <span class="hljs-number">232</span>);<br><br>    <span class="hljs-comment">// äº‹å®ä¸Šï¼Œä¹‹å‰è¯´çš„è§„åˆ™å¯¹äºæ­£æ•´æ•°è€Œè¨€ï¼Œå°±æ˜¯å¦‚ä¸‹çš„å–æ¨¡</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;1000 mod 256 is : &#123;&#125;&quot;</span>, <span class="hljs-number">1000</span> % <span class="hljs-number">256</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(-<span class="hljs-number">1_i8</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, <span class="hljs-number">255</span>);<br><br><br>    <span class="hljs-comment">// ä» Rust 1.45 å¼€å§‹ï¼Œå½“æµ®ç‚¹æ•°è¶…å‡ºç›®æ ‡æ•´æ•°çš„èŒƒå›´æ—¶ï¼Œè½¬åŒ–ä¼šç›´æ¥å–æ­£æ•´æ•°å–å€¼èŒƒå›´çš„æœ€å¤§æˆ–æœ€å°å€¼</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">300.1_f32</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, <span class="hljs-number">255</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(-<span class="hljs-number">100.1_f32</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, <span class="hljs-number">0</span>);<br><br><br>    <span class="hljs-comment">// ä¸Šé¢çš„æµ®ç‚¹æ•°è½¬æ¢æœ‰ä¸€ç‚¹æ€§èƒ½æŸè€—ï¼Œå¦‚æœå¤§å®¶å¯¹äºæŸæ®µä»£ç æœ‰æè‡´çš„æ€§èƒ½è¦æ±‚ï¼Œ</span><br>    <span class="hljs-comment">// å¯ä»¥è€ƒè™‘ä¸‹é¢çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•çš„ç»“æœå¯èƒ½ä¼šæº¢å‡ºå¹¶ä¸”è¿”å›ä¸€äº›æ— æ„ä¹‰çš„å€¼</span><br>    <span class="hljs-comment">// æ€»ä¹‹ï¼Œè¯·å°å¿ƒä½¿ç”¨</span><br>    <span class="hljs-keyword">unsafe</span> &#123;<br>        <span class="hljs-comment">// 300.0 is 44</span><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;300.0 is &#123;&#125;&quot;</span>, <span class="hljs-number">300.0_f32</span>.to_int_unchecked::&lt;<span class="hljs-type">u8</span>&gt;());<br>        <span class="hljs-comment">// -100.0 as u8 is 156</span><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;-100.0 as u8 is &#123;&#125;&quot;</span>, (-<span class="hljs-number">100.0_f32</span>).to_int_unchecked::&lt;<span class="hljs-type">u8</span>&gt;());<br>        <span class="hljs-comment">// nan as u8 is 0</span><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;nan as u8 is &#123;&#125;&quot;</span>, <span class="hljs-type">f32</span>::NAN.to_int_unchecked::&lt;<span class="hljs-type">u8</span>&gt;());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸğŸŒŸ-è£¸æŒ‡é’ˆå¯ä»¥å’Œä»£è¡¨å†…å­˜åœ°å€çš„æ•´æ•°äº’ç›¸è½¬æ¢"><a href="#4-ğŸŒŸğŸŒŸğŸŒŸ-è£¸æŒ‡é’ˆå¯ä»¥å’Œä»£è¡¨å†…å­˜åœ°å€çš„æ•´æ•°äº’ç›¸è½¬æ¢" class="headerlink" title="4.ğŸŒŸğŸŒŸğŸŒŸ è£¸æŒ‡é’ˆå¯ä»¥å’Œä»£è¡¨å†…å­˜åœ°å€çš„æ•´æ•°äº’ç›¸è½¬æ¢"></a>4.ğŸŒŸğŸŒŸğŸŒŸ è£¸æŒ‡é’ˆå¯ä»¥å’Œä»£è¡¨å†…å­˜åœ°å€çš„æ•´æ•°äº’ç›¸è½¬æ¢</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">values</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">2</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span>: *<span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span> = values.<span class="hljs-title function_ invoke__">as_mut_ptr</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">first_address</span>: <span class="hljs-type">usize</span> = p1 __;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">second_address</span> = first_address + <span class="hljs-number">4</span>; <span class="hljs-comment">// 4 == std::mem::size_of::&lt;i32&gt;()</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span>: *<span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span> = second_address __; <span class="hljs-comment">// p2 æŒ‡å‘ values æ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ </span><br>    <span class="hljs-keyword">unsafe</span> &#123;<br>        <span class="hljs-comment">// å°†ç¬¬äºŒä¸ªå…ƒç´ åŠ  1</span><br>        __<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(values[<span class="hljs-number">1</span>], <span class="hljs-number">3</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">values</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">2</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span>: *<span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span> = values.<span class="hljs-title function_ invoke__">as_mut_ptr</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">first_address</span>: <span class="hljs-type">usize</span> = p1 <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">second_address</span> = first_address + <span class="hljs-number">4</span>; <span class="hljs-comment">// 4 == std::mem::size_of::&lt;i32&gt;()</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span>: *<span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span> = second_address <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span>; <span class="hljs-comment">// p2 æŒ‡å‘ values æ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ </span><br>    <span class="hljs-keyword">unsafe</span> &#123;<br>        <span class="hljs-comment">// å°†ç¬¬äºŒä¸ªå…ƒç´ åŠ  1</span><br>        *p2 += <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(values[<span class="hljs-number">1</span>], <span class="hljs-number">3</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> :[<span class="hljs-type">u64</span>; <span class="hljs-number">13</span>] = [<span class="hljs-number">0</span>; <span class="hljs-number">13</span>];<br>    <span class="hljs-built_in">assert_eq!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;arr), <span class="hljs-number">8</span> * <span class="hljs-number">13</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span>: *<span class="hljs-keyword">const</span> [<span class="hljs-type">u64</span>] = &amp;arr;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">b</span> = a <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> [<span class="hljs-type">u8</span>];<br>    <span class="hljs-keyword">unsafe</span> &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;*b), __)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> :[<span class="hljs-type">u64</span>; <span class="hljs-number">13</span>] = [<span class="hljs-number">0</span>; <span class="hljs-number">13</span>];<br>    <span class="hljs-built_in">assert_eq!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;arr), <span class="hljs-number">8</span> * <span class="hljs-number">13</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span>: *<span class="hljs-keyword">const</span> [<span class="hljs-type">u64</span>] = &amp;arr;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">b</span> = a <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> [<span class="hljs-type">u8</span>];<br>    <span class="hljs-keyword">unsafe</span> &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;*b), <span class="hljs-number">13</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Rust å¹¶æ²¡æœ‰ä¸ºåŸºæœ¬ç±»å‹æä¾›éšå¼çš„ç±»å‹è½¬æ¢( coercion )ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ as æ¥è¿›è¡Œæ˜¾å¼åœ°è½¬æ¢ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>11.3.KVå­˜å‚¨ HashMap</title>
    <link href="https://lilinzta.github.io/2023/09/21/11-3-KV%E5%AD%98%E5%82%A8-HashMap/"/>
    <id>https://lilinzta.github.io/2023/09/21/11-3-KV%E5%AD%98%E5%82%A8-HashMap/</id>
    <published>2023-09-21T09:21:29.000Z</published>
    <updated>2024-01-20T11:35:29.046Z</updated>
    
    <content type="html"><![CDATA[<p>HashMap é»˜è®¤ä½¿ç”¨ SipHash 1-3 å“ˆå¸Œç®—æ³•ï¼Œè¯¥ç®—æ³•å¯¹äºæŠµæŠ— HashDos æ”»å‡»éå¸¸æœ‰æ•ˆã€‚åœ¨æ€§èƒ½æ–¹é¢ï¼Œå¦‚æœä½ çš„ key æ˜¯ä¸­å‹å¤§å°çš„ï¼Œé‚£è¯¥ç®—æ³•éå¸¸ä¸é”™ï¼Œä½†æ˜¯å¦‚æœæ˜¯å°å‹çš„ key( ä¾‹å¦‚æ•´æ•° )äº¦æˆ–æ˜¯å¤§å‹çš„ key ( ä¾‹å¦‚å­—ç¬¦ä¸² )ï¼Œé‚£ä½ éœ€è¦é‡‡ç”¨ç¤¾åŒºæä¾›çš„å…¶å®ƒç®—æ³•æ¥æé«˜æ€§èƒ½ã€‚</p><span id="more"></span><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">scores</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Sunface&quot;</span>, <span class="hljs-number">98</span>);<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Daniel&quot;</span>, <span class="hljs-number">95</span>);<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Ashley&quot;</span>, <span class="hljs-number">69.0</span>);<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Katie&quot;</span>, <span class="hljs-string">&quot;58&quot;</span>);<br><br>    <span class="hljs-comment">// get è¿”å›ä¸€ä¸ª Option&lt;&amp;V&gt; æšä¸¾å€¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">score</span> = scores.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;Sunface&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(score, <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">98</span>));<br><br>    <span class="hljs-keyword">if</span> scores.<span class="hljs-title function_ invoke__">contains_key</span>(<span class="hljs-string">&quot;Daniel&quot;</span>) &#123;<br>        <span class="hljs-comment">// ç´¢å¼•è¿”å›ä¸€ä¸ªå€¼ V</span><br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">score</span> = scores[<span class="hljs-string">&quot;Daniel&quot;</span>];<br>        <span class="hljs-built_in">assert_eq!</span>(score, __);<br>        scores.<span class="hljs-title function_ invoke__">remove</span>(<span class="hljs-string">&quot;Daniel&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(scores.<span class="hljs-title function_ invoke__">len</span>(), __);<br><br>    <span class="hljs-keyword">for</span> (name, score) <span class="hljs-keyword">in</span> scores &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The score of &#123;&#125; is &#123;&#125;&quot;</span>, name, score)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">scores</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Sunface&quot;</span>, <span class="hljs-number">98</span>);<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Daniel&quot;</span>, <span class="hljs-number">95</span>);<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Ashley&quot;</span>, <span class="hljs-number">69</span>);<br>    scores.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">&quot;Katie&quot;</span>, <span class="hljs-number">58</span>);<br><br>    <span class="hljs-comment">// get è¿”å›ä¸€ä¸ª Option&lt;&amp;V&gt; æšä¸¾å€¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">score</span> = scores.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;Sunface&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(score, <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-number">98</span>));<br><br>    <span class="hljs-keyword">if</span> scores.<span class="hljs-title function_ invoke__">contains_key</span>(<span class="hljs-string">&quot;Daniel&quot;</span>) &#123;<br>        <span class="hljs-comment">// ç´¢å¼•è¿”å›ä¸€ä¸ªå€¼ V</span><br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">score</span> = scores[<span class="hljs-string">&quot;Daniel&quot;</span>];<br>        <span class="hljs-built_in">assert_eq!</span>(score, <span class="hljs-number">95</span>);<br>        scores.<span class="hljs-title function_ invoke__">remove</span>(<span class="hljs-string">&quot;Daniel&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(scores.<span class="hljs-title function_ invoke__">len</span>(), <span class="hljs-number">3</span>);<br><br>    <span class="hljs-keyword">for</span> (name, score) <span class="hljs-keyword">in</span> scores &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The score of &#123;&#125; is &#123;&#125;&quot;</span>, name, score)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">teams</span> = [<br>        (<span class="hljs-string">&quot;Chinese Team&quot;</span>, <span class="hljs-number">100</span>),<br>        (<span class="hljs-string">&quot;American Team&quot;</span>, <span class="hljs-number">10</span>),<br>        (<span class="hljs-string">&quot;France Team&quot;</span>, <span class="hljs-number">50</span>),<br>    ];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">teams_map1</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">team</span> <span class="hljs-keyword">in</span> &amp;teams &#123;<br>        teams_map1.<span class="hljs-title function_ invoke__">insert</span>(team.<span class="hljs-number">0</span>, team.<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•å®ç° team_map2</span><br>    <span class="hljs-comment">// æç¤º:å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ `collect` æ–¹æ³•</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">teams_map2</span>...<br><br>    <span class="hljs-built_in">assert_eq!</span>(teams_map1, teams_map2);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">teams</span> = [<br>        (<span class="hljs-string">&quot;Chinese Team&quot;</span>, <span class="hljs-number">100</span>),<br>        (<span class="hljs-string">&quot;American Team&quot;</span>, <span class="hljs-number">10</span>),<br>        (<span class="hljs-string">&quot;France Team&quot;</span>, <span class="hljs-number">50</span>),<br>    ];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">teams_map1</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">team</span> <span class="hljs-keyword">in</span> &amp;teams &#123;<br>        teams_map1.<span class="hljs-title function_ invoke__">insert</span>(team.<span class="hljs-number">0</span>, team.<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•å®ç° team_map2</span><br>    <span class="hljs-comment">// æç¤º:å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ `collect` æ–¹æ³•</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">teams_map2</span>: HashMap&lt;_, _&gt; = teams.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">collect</span>();<br><br>    <span class="hljs-built_in">assert_eq!</span>(teams_map1, teams_map2);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">teams</span> = [<br>        (<span class="hljs-string">&quot;Chinese Team&quot;</span>, <span class="hljs-number">100</span>),<br>        (<span class="hljs-string">&quot;American Team&quot;</span>, <span class="hljs-number">10</span>),<br>        (<span class="hljs-string">&quot;France Team&quot;</span>, <span class="hljs-number">50</span>),<br>    ];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">teams_map1</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">team</span> <span class="hljs-keyword">in</span> &amp;teams &#123;<br>        teams_map1.<span class="hljs-title function_ invoke__">insert</span>(team.<span class="hljs-number">0</span>, team.<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•å®ç° team_map2</span><br>    <span class="hljs-comment">// æç¤º:å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ `collect` æ–¹æ³•</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">teams_map2</span> = HashMap::<span class="hljs-title function_ invoke__">from</span>(teams);<br><br>    <span class="hljs-built_in">assert_eq!</span>(teams_map1, teams_map2);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®åç»­çš„ä½¿ç”¨æƒ…å†µå¸®æˆ‘è‡ªåŠ¨æ¨æ–­å‡º HashMap çš„ç±»å‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ˜¾å¼åœ°æ ‡æ³¨ç±»å‹ï¼šHashMap&lt;&amp;str, u8&gt;</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">player_stats</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-comment">// æŸ¥è¯¢æŒ‡å®šçš„ key, è‹¥ä¸å­˜åœ¨æ—¶ï¼Œåˆ™æ’å…¥æ–°çš„ kv å€¼</span><br>    player_stats.<span class="hljs-title function_ invoke__">entry</span>(<span class="hljs-string">&quot;health&quot;</span>).<span class="hljs-title function_ invoke__">or_insert</span>(<span class="hljs-number">100</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(player_stats[<span class="hljs-string">&quot;health&quot;</span>], __);<br><br>    <span class="hljs-comment">// é€šè¿‡å‡½æ•°æ¥è¿”å›æ–°çš„å€¼</span><br>    player_stats.<span class="hljs-title function_ invoke__">entry</span>(<span class="hljs-string">&quot;health&quot;</span>).<span class="hljs-title function_ invoke__">or_insert_with</span>(random_stat_buff);<br>    <span class="hljs-built_in">assert_eq!</span>(player_stats[<span class="hljs-string">&quot;health&quot;</span>], __);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">health</span> = player_stats.<span class="hljs-title function_ invoke__">entry</span>(<span class="hljs-string">&quot;health&quot;</span>).<span class="hljs-title function_ invoke__">or_insert</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(health, __);<br>    *health -= <span class="hljs-number">50</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(*health, __);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">random_stat_buff</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u8</span> &#123;<br>    <span class="hljs-comment">// ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨éšæœºï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå›ºå®šçš„å€¼</span><br>    <span class="hljs-number">42</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®åç»­çš„ä½¿ç”¨æƒ…å†µå¸®æˆ‘è‡ªåŠ¨æ¨æ–­å‡º HashMap çš„ç±»å‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ˜¾å¼åœ°æ ‡æ³¨ç±»å‹ï¼šHashMap&lt;&amp;str, u8&gt;</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">player_stats</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-comment">// æŸ¥è¯¢æŒ‡å®šçš„ key, è‹¥ä¸å­˜åœ¨æ—¶ï¼Œåˆ™æ’å…¥æ–°çš„ kv å€¼</span><br>    player_stats.<span class="hljs-title function_ invoke__">entry</span>(<span class="hljs-string">&quot;health&quot;</span>).<span class="hljs-title function_ invoke__">or_insert</span>(<span class="hljs-number">100</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(player_stats[<span class="hljs-string">&quot;health&quot;</span>], <span class="hljs-number">100</span>);<br><br>    <span class="hljs-comment">// é€šè¿‡å‡½æ•°æ¥è¿”å›æ–°çš„å€¼</span><br>    player_stats.<span class="hljs-title function_ invoke__">entry</span>(<span class="hljs-string">&quot;health&quot;</span>).<span class="hljs-title function_ invoke__">or_insert_with</span>(random_stat_buff);<br>    <span class="hljs-built_in">assert_eq!</span>(player_stats[<span class="hljs-string">&quot;health&quot;</span>], <span class="hljs-number">100</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">health</span> = player_stats.<span class="hljs-title function_ invoke__">entry</span>(<span class="hljs-string">&quot;health&quot;</span>).<span class="hljs-title function_ invoke__">or_insert</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(health, &amp;<span class="hljs-number">100</span>);<br>    *health -= <span class="hljs-number">50</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(*health, <span class="hljs-number">50</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">random_stat_buff</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u8</span> &#123;<br>    <span class="hljs-comment">// ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨éšæœºï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå›ºå®šçš„å€¼</span><br>    <span class="hljs-number">42</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="HashMap-key-çš„é™åˆ¶"><a href="#HashMap-key-çš„é™åˆ¶" class="headerlink" title="HashMap key çš„é™åˆ¶"></a>HashMap key çš„é™åˆ¶</h2><p>ä»»ä½•å®ç°äº† Eq å’Œ Hash ç‰¹å¾çš„ç±»å‹éƒ½å¯ä»¥ç”¨äº HashMap çš„ keyï¼ŒåŒ…æ‹¬:</p><ul><li>bool (è™½ç„¶å¾ˆå°‘ç”¨åˆ°ï¼Œå› ä¸ºå®ƒåªèƒ½è¡¨è¾¾ä¸¤ç§ key)</li><li>int, uint ä»¥åŠå®ƒä»¬çš„å˜ä½“ï¼Œä¾‹å¦‚ u8ã€i32 ç­‰</li><li>String å’Œ &amp;str (æç¤º: HashMap çš„ key æ˜¯ String ç±»å‹æ—¶ï¼Œä½ å…¶å®å¯ä»¥ä½¿ç”¨ &amp;str é…åˆ get æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œf32 å’Œ f64 å¹¶æ²¡æœ‰å®ç° Hashï¼ŒåŸå› æ˜¯ æµ®ç‚¹æ•°ç²¾åº¦ çš„é—®é¢˜ä¼šå¯¼è‡´å®ƒä»¬æ— æ³•è¿›è¡Œç›¸ç­‰æ¯”è¾ƒã€‚</li></ul><p>å¦‚æœä¸€ä¸ªé›†åˆç±»å‹çš„æ‰€æœ‰å­—æ®µéƒ½å®ç°äº† Eq å’Œ Hash,é‚£è¯¥é›†åˆç±»å‹ä¼šè‡ªåŠ¨å®ç° Eq å’Œ Hashã€‚ä¾‹å¦‚ Vect<T> è¦å®ç° Hashï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦ T å®ç° Hashã€‚</p><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-comment">// æç¤º: `derive` æ˜¯å®ç°ä¸€äº›å¸¸ç”¨ç‰¹å¾çš„å¥½åŠæ³•</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Viking</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    country: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Viking</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(name: &amp;<span class="hljs-type">str</span>, country: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> Viking &#123;<br>        Viking &#123;<br>            name: name.<span class="hljs-title function_ invoke__">to_string</span>(),<br>            country: country.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ HashMap æ¥å­˜å‚¨ viking çš„ç”Ÿå‘½å€¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">vikings</span> = HashMap::<span class="hljs-title function_ invoke__">from</span>([<br>        (Viking::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Einar&quot;</span>, <span class="hljs-string">&quot;Norway&quot;</span>), <span class="hljs-number">25</span>),<br>        (Viking::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Olaf&quot;</span>, <span class="hljs-string">&quot;Denmark&quot;</span>), <span class="hljs-number">24</span>),<br>        (Viking::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Harald&quot;</span>, <span class="hljs-string">&quot;Iceland&quot;</span>), <span class="hljs-number">12</span>),<br>    ]);<br><br>    <span class="hljs-comment">// ä½¿ç”¨ derive çš„æ–¹å¼æ¥æ‰“å° viking çš„å½“å‰çŠ¶æ€</span><br>    <span class="hljs-keyword">for</span> (viking, health) <span class="hljs-keyword">in</span> &amp;vikings &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125; has &#123;&#125; hp&quot;</span>, viking, health);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-comment">// æç¤º: `derive` æ˜¯å®ç°ä¸€äº›å¸¸ç”¨ç‰¹å¾çš„å¥½åŠæ³•</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><br><span class="hljs-meta">#[derive(Hash, Eq, PartialEq, Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Viking</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    country: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Viking</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(name: &amp;<span class="hljs-type">str</span>, country: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> Viking &#123;<br>        Viking &#123;<br>            name: name.<span class="hljs-title function_ invoke__">to_string</span>(),<br>            country: country.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ HashMap æ¥å­˜å‚¨ viking çš„ç”Ÿå‘½å€¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">vikings</span> = HashMap::<span class="hljs-title function_ invoke__">from</span>([<br>        (Viking::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Einar&quot;</span>, <span class="hljs-string">&quot;Norway&quot;</span>), <span class="hljs-number">25</span>),<br>        (Viking::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Olaf&quot;</span>, <span class="hljs-string">&quot;Denmark&quot;</span>), <span class="hljs-number">24</span>),<br>        (Viking::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Harald&quot;</span>, <span class="hljs-string">&quot;Iceland&quot;</span>), <span class="hljs-number">12</span>),<br>    ]);<br><br>    <span class="hljs-comment">// ä½¿ç”¨ derive çš„æ–¹å¼æ¥æ‰“å° viking çš„å½“å‰çŠ¶æ€</span><br>    <span class="hljs-keyword">for</span> (viking, health) <span class="hljs-keyword">in</span> &amp;vikings &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125; has &#123;&#125; hp&quot;</span>, viking, health);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®¹é‡"><a href="#å®¹é‡" class="headerlink" title="å®¹é‡"></a>å®¹é‡</h2><p>å…³äºå®¹é‡ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„ Vector ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè€Œ HashMap ä¹Ÿå¯ä»¥è°ƒæ•´å®¹é‡: ä½ å¯ä»¥é€šè¿‡ HashMap::with_capacity(uint) ä½¿ç”¨æŒ‡å®šçš„å®¹é‡æ¥åˆå§‹åŒ–ï¼Œæˆ–è€…ä½¿ç”¨ HashMap::new() ï¼Œåè€…ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å®¹é‡ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">map</span>: HashMap&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>&gt; = HashMap::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">100</span>);<br>    map.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>    map.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br>    <span class="hljs-comment">// äº‹å®ä¸Šï¼Œè™½ç„¶æˆ‘ä»¬ä½¿ç”¨äº† 100 å®¹é‡æ¥åˆå§‹åŒ–ï¼Œä½†æ˜¯ map çš„å®¹é‡å¾ˆå¯èƒ½ä¼šæ¯” 100 æ›´å¤š</span><br>    <span class="hljs-built_in">assert!</span>(map.<span class="hljs-title function_ invoke__">capacity</span>() &gt;= <span class="hljs-number">100</span>);<br><br>    <span class="hljs-comment">// å¯¹å®¹é‡è¿›è¡Œæ”¶ç¼©ï¼Œä½ æä¾›çš„å€¼ä»…ä»…æ˜¯ä¸€ä¸ªå…è®¸çš„æœ€å°å€¼ï¼Œå®é™…ä¸Šï¼ŒRust ä¼šæ ¹æ®å½“å‰å­˜å‚¨çš„æ•°æ®é‡è¿›è¡Œè‡ªåŠ¨è®¾ç½®ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªå€¼ä¼šå°½é‡é è¿‘ä½ æä¾›çš„å€¼ï¼ŒåŒæ—¶è¿˜å¯èƒ½ä¼šé¢„ç•™ä¸€äº›è°ƒæ•´ç©ºé—´</span><br><br>    map.<span class="hljs-title function_ invoke__">shrink_to</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-built_in">assert!</span>(map.<span class="hljs-title function_ invoke__">capacity</span>() &gt;= <span class="hljs-number">50</span>);<br><br>    <span class="hljs-comment">// è®© Rust  è‡ªè¡Œè°ƒæ•´åˆ°ä¸€ä¸ªåˆé€‚çš„å€¼ï¼Œå‰©ä½™ç­–ç•¥åŒä¸Š</span><br>    map.<span class="hljs-title function_ invoke__">shrink_to_fit</span>();<br>    <span class="hljs-built_in">assert!</span>(map.<span class="hljs-title function_ invoke__">capacity</span>() &gt;= <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ‰€æœ‰æƒ"><a href="#æ‰€æœ‰æƒ" class="headerlink" title="æ‰€æœ‰æƒ"></a>æ‰€æœ‰æƒ</h2><p>å¯¹äºå®ç°äº† Copy ç‰¹å¾çš„ç±»å‹ï¼Œä¾‹å¦‚ i32ï¼Œé‚£ç±»å‹çš„å€¼ä¼šè¢«æ‹·è´åˆ° HashMap ä¸­ã€‚è€Œå¯¹äºæœ‰æ‰€æœ‰æƒçš„ç±»å‹ï¼Œä¾‹å¦‚ Stringï¼Œå®ƒä»¬çš„å€¼çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»åˆ° HashMap ä¸­ã€‚</p><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œå°½å¯èƒ½å°‘çš„å»ä¿®æ”¹ä»£ç </span><br><span class="hljs-comment">// ä¸è¦ç§»é™¤ä»»ä½•ä»£ç è¡Œï¼</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>  <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = <span class="hljs-number">10</span>;<br>  <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">m1</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>  m1.<span class="hljs-title function_ invoke__">insert</span>(v1, v1);<br>  <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;v1 is still usable after inserting to hashmap : &#123;&#125;&quot;</span>, v1);<br><br>  <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span> = <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>  <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">m2</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>  <span class="hljs-comment">// æ‰€æœ‰æƒåœ¨è¿™é‡Œå‘ç”Ÿäº†è½¬ç§»</span><br>  m2.<span class="hljs-title function_ invoke__">insert</span>(v2, v1);<br><br>  <span class="hljs-built_in">assert_eq!</span>(v2, <span class="hljs-string">&quot;hello&quot;</span>);<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œå°½å¯èƒ½å°‘çš„å»ä¿®æ”¹ä»£ç </span><br><span class="hljs-comment">// ä¸è¦ç§»é™¤ä»»ä½•ä»£ç è¡Œï¼</span><br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>  <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = <span class="hljs-number">10</span>;<br>  <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">m1</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>  m1.<span class="hljs-title function_ invoke__">insert</span>(v1, v1);<br>  <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;v1 is still usable after inserting to hashmap : &#123;&#125;&quot;</span>, v1);<br><br>  <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br>  <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">m2</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>  <span class="hljs-comment">// æ‰€æœ‰æƒåœ¨è¿™é‡Œå‘ç”Ÿäº†è½¬ç§»</span><br>  m2.<span class="hljs-title function_ invoke__">insert</span>(v2, v1);<br><br>  <span class="hljs-built_in">assert_eq!</span>(v2, <span class="hljs-string">&quot;hello&quot;</span>);<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰æ–¹åº“-Hash-åº“"><a href="#ä¸‰æ–¹åº“-Hash-åº“" class="headerlink" title="ä¸‰æ–¹åº“ Hash åº“"></a>ä¸‰æ–¹åº“ Hash åº“</h2><p>åœ¨å¼€å¤´ï¼Œæˆ‘ä»¬æåˆ°è¿‡å¦‚æœç°æœ‰çš„ SipHash 1-3 çš„æ€§èƒ½æ— æ³•æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç¤¾åŒºæä¾›çš„æ›¿ä»£ç®—æ³•ã€‚</p><p>ä¾‹å¦‚å…¶ä¸­ä¸€ä¸ªç¤¾åŒºåº“çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::hash::BuildHasherDefault;<br><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-comment">// å¼•å…¥ç¬¬ä¸‰æ–¹çš„å“ˆå¸Œå‡½æ•°</span><br><span class="hljs-keyword">use</span> twox_hash::XxHash64;<br><br><br><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">hash</span>: HashMap&lt;_, _, BuildHasherDefault&lt;XxHash64&gt;&gt; = <span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>();<br>hash.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-number">42</span>, <span class="hljs-string">&quot;the answer&quot;</span>);<br><span class="hljs-built_in">assert_eq!</span>(hash.<span class="hljs-title function_ invoke__">get</span>(&amp;<span class="hljs-number">42</span>), <span class="hljs-title function_ invoke__">Some</span>(&amp;<span class="hljs-string">&quot;the answer&quot;</span>));<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;HashMap é»˜è®¤ä½¿ç”¨ SipHash 1-3 å“ˆå¸Œç®—æ³•ï¼Œè¯¥ç®—æ³•å¯¹äºæŠµæŠ— HashDos æ”»å‡»éå¸¸æœ‰æ•ˆã€‚åœ¨æ€§èƒ½æ–¹é¢ï¼Œå¦‚æœä½ çš„ key æ˜¯ä¸­å‹å¤§å°çš„ï¼Œé‚£è¯¥ç®—æ³•éå¸¸ä¸é”™ï¼Œä½†æ˜¯å¦‚æœæ˜¯å°å‹çš„ key( ä¾‹å¦‚æ•´æ•° )äº¦æˆ–æ˜¯å¤§å‹çš„ key ( ä¾‹å¦‚å­—ç¬¦ä¸² )ï¼Œé‚£ä½ éœ€è¦é‡‡ç”¨ç¤¾åŒºæä¾›çš„å…¶å®ƒç®—æ³•æ¥æé«˜æ€§èƒ½ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºæ•™å­¦ä¸­æ¶ˆå¤±çš„ä¸€ä¸ªå­¦æœŸ</title>
    <link href="https://lilinzta.github.io/2023/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%95%99%E5%AD%A6%E4%B8%AD%E6%B6%88%E5%A4%B1%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AD%A6%E6%9C%9F/"/>
    <id>https://lilinzta.github.io/2023/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%95%99%E5%AD%A6%E4%B8%AD%E6%B6%88%E5%A4%B1%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AD%A6%E6%9C%9F/</id>
    <published>2023-09-18T12:55:46.000Z</published>
    <updated>2024-01-17T15:05:42.365Z</updated>
    
    <content type="html"><![CDATA[<p>æ­£å¦‚è¯¾ç¨‹åå­—æ‰€è¨€ï¼šâ€œè®¡ç®—æœºæ•™å­¦ä¸­æ¶ˆå¤±çš„ä¸€ä¸ªå­¦æœŸâ€ï¼Œè¿™é—¨è¯¾å°†ä¼šæ•™ä¼šä½ è®¸å¤šå¤§å­¦çš„è¯¾å ‚ä¸Šä¸ä¼šæ¶‰åŠä½†å´å¯¹æ¯ä¸ª CSer æ— æ¯”é‡è¦çš„å·¥å…·æˆ–è€…çŸ¥è¯†ç‚¹ã€‚</p><span id="more"></span><p>ä¾‹å¦‚ Shell ç¼–ç¨‹ã€å‘½ä»¤è¡Œé…ç½®ã€Gitã€Vimã€tmuxã€ssh ç­‰ç­‰ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªè®¡ç®—æœºå°ç™½ï¼Œé‚£ä¹ˆéå¸¸å»ºè®®ä½ å­¦ä¹ ä¸€ä¸‹è¿™é—¨è¯¾ã€‚</p><p>å­¦ä¹ æ—¶é•¿ï¼š10å°æ—¶</p><h3 id="è¯¾ç¨‹èµ„æº"><a href="#è¯¾ç¨‹èµ„æº" class="headerlink" title="è¯¾ç¨‹èµ„æº"></a>è¯¾ç¨‹èµ„æº</h3><ul><li>è¯¾ç¨‹ç½‘ç«™ï¼š<a href="https://missing.csail.mit.edu/2020/">https://missing.csail.mit.edu/2020/</a></li><li>è¯¾ç¨‹ä¸­æ–‡ç½‘ç«™: <a href="https://missing-semester-cn.github.io/">https://missing-semester-cn.github.io/</a></li><li>è¯¾ç¨‹è§†é¢‘ï¼š<a href="https://www.youtube.com/playlist?list=PLyzOVJj3bHQuloKGG59rS43e29ro7I57J">https://www.youtube.com/playlist?list=PLyzOVJj3bHQuloKGG59rS43e29ro7I57J</a></li><li>è¯¾ç¨‹ä¸­æ–‡å­—å¹•è§†é¢‘ï¼š<ul><li>Missing_Semi_ä¸­è¯‘ç»„ï¼ˆæœªå®Œç»“ï¼‰ï¼š<a href="https://space.bilibili.com/1010983811?spm_id_from=333.337.search-card.all.click">https://space.bilibili.com/1010983811?spm_id_from=333.337.search-card.all.click</a></li><li>åˆ˜é»‘é»‘aï¼ˆå·²å®Œç»“ï¼‰ï¼š<a href="https://space.bilibili.com/518734451?spm_id_from=333.337.search-card.all.click">https://space.bilibili.com/518734451?spm_id_from=333.337.search-card.all.click</a></li></ul></li><li>è¯¾ç¨‹ä½œä¸šï¼šä¸€äº›éšå ‚å°ç»ƒä¹ ï¼Œå…·ä½“è§è¯¾ç¨‹ç½‘ç«™ã€‚<blockquote><p>source: <a href="https://csdiy.wiki/">csè‡ªå­¦æŒ‡å—</a></p></blockquote></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ­£å¦‚è¯¾ç¨‹åå­—æ‰€è¨€ï¼šâ€œè®¡ç®—æœºæ•™å­¦ä¸­æ¶ˆå¤±çš„ä¸€ä¸ªå­¦æœŸâ€ï¼Œè¿™é—¨è¯¾å°†ä¼šæ•™ä¼šä½ è®¸å¤šå¤§å­¦çš„è¯¾å ‚ä¸Šä¸ä¼šæ¶‰åŠä½†å´å¯¹æ¯ä¸ª CSer æ— æ¯”é‡è¦çš„å·¥å…·æˆ–è€…çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Share" scheme="https://lilinzta.github.io/tags/Share/"/>
    
  </entry>
  
  <entry>
    <title>11.2.åŠ¨æ€æ•°ç»„ Vector</title>
    <link href="https://lilinzta.github.io/2023/09/18/11-2-%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84-Vector/"/>
    <id>https://lilinzta.github.io/2023/09/18/11-2-%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84-Vector/</id>
    <published>2023-09-18T12:01:37.000Z</published>
    <updated>2024-01-20T11:35:40.998Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸æ¯” [T; N] å½¢å¼çš„æ•°ç»„ï¼Œ Vector æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥åŠ¨æ€è°ƒæ•´é•¿åº¦ã€‚</p><span id="more"></span><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="1-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">u8</span>; <span class="hljs-number">3</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>(arr);<br>    <span class="hljs-title function_ invoke__">is_vec</span>(v);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-title function_ invoke__">is_vec</span>(v);<br><br>    <span class="hljs-comment">// vec!(..) å’Œ vec![..] æ˜¯åŒæ ·çš„å®ï¼Œå®å¯ä»¥ä½¿ç”¨ []ã€()ã€&#123;&#125;ä¸‰ç§å½¢å¼ï¼Œå› æ­¤...</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-title function_ invoke__">is_vec</span>(v);<br><br>    <span class="hljs-comment">// ...åœ¨ä¸‹é¢çš„ä»£ç ä¸­, v æ˜¯ Vec&lt;[u8; 3]&gt; , è€Œä¸æ˜¯ Vec&lt;u8&gt;</span><br>    <span class="hljs-comment">// ä½¿ç”¨ Vec::new å’Œ `for` æ¥é‡å†™ä¸‹é¢è¿™æ®µä»£ç </span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = <span class="hljs-built_in">vec!</span>(arr);<br>    <span class="hljs-title function_ invoke__">is_vec</span>(v1);<br><br>    <span class="hljs-built_in">assert_eq!</span>(v, v1);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_vec</span>(v: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;) &#123;&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">u8</span>; <span class="hljs-number">3</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>(arr);<br>    <span class="hljs-title function_ invoke__">is_vec</span>(&amp;v);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-title function_ invoke__">is_vec</span>(&amp;v);<br><br>    <span class="hljs-comment">// vec!(..) å’Œ vec![..] æ˜¯åŒæ ·çš„å®ï¼Œå®å¯ä»¥ä½¿ç”¨ []ã€()ã€&#123;&#125;ä¸‰ç§å½¢å¼ï¼Œå› æ­¤...</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-title function_ invoke__">is_vec</span>(&amp;v);<br><br>    <span class="hljs-comment">// ...åœ¨ä¸‹é¢çš„ä»£ç ä¸­, v æ˜¯ Vec&lt;[u8; 3]&gt; , è€Œä¸æ˜¯ Vec&lt;u8&gt;</span><br>    <span class="hljs-comment">// ä½¿ç”¨ Vec::new å’Œ `for` æ¥é‡å†™ä¸‹é¢è¿™æ®µä»£ç </span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v1</span> = <span class="hljs-built_in">vec!</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> &amp;v &#123;<br>        v1.<span class="hljs-title function_ invoke__">push</span>(*i);<br>    &#125;<br>    <span class="hljs-title function_ invoke__">is_vec</span>(&amp;v1);<br><br>    <span class="hljs-built_in">assert_eq!</span>(v, v1);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_vec</span>(v: &amp;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;) &#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-Vec-å¯ä»¥ä½¿ç”¨-extend-æ–¹æ³•è¿›è¡Œæ‰©å±•"><a href="#2-ğŸŒŸğŸŒŸ-Vec-å¯ä»¥ä½¿ç”¨-extend-æ–¹æ³•è¿›è¡Œæ‰©å±•" class="headerlink" title="2.ğŸŒŸğŸŒŸ Vec å¯ä»¥ä½¿ç”¨ extend æ–¹æ³•è¿›è¡Œæ‰©å±•"></a>2.ğŸŒŸğŸŒŸ Vec å¯ä»¥ä½¿ç”¨ extend æ–¹æ³•è¿›è¡Œæ‰©å±•</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v1</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]);<br>    v1.<span class="hljs-title function_ invoke__">pop</span>();<br>    v1.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v2</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    v2.__;<br><br>    <span class="hljs-built_in">assert_eq!</span>(v1, v2);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v1</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]);<br>    v1.<span class="hljs-title function_ invoke__">pop</span>();<br>    v1.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v2</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    v2.<span class="hljs-title function_ invoke__">extend</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);<br><br>    <span class="hljs-built_in">assert_eq!</span>(v1, v2);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å°†-X-ç±»å‹è½¬æ¢-From-Into-ç‰¹å¾-æˆ-Vec"><a href="#å°†-X-ç±»å‹è½¬æ¢-From-Into-ç‰¹å¾-æˆ-Vec" class="headerlink" title="å°† X ç±»å‹è½¬æ¢(From&#x2F;Into ç‰¹å¾)æˆ Vec"></a>å°† X ç±»å‹è½¬æ¢(From&#x2F;Into ç‰¹å¾)æˆ Vec</h2><p>åªè¦ä¸º Vec å®ç°äº† From<T> ç‰¹å¾ï¼Œé‚£ä¹ˆ T å°±å¯ä»¥è¢«è½¬æ¢æˆ Vecã€‚</p><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// array -&gt; Vec</span><br>    <span class="hljs-comment">// impl From&lt;[T; N]&gt; for Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = __(arr);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = arr.__();<br><br>    <span class="hljs-built_in">assert_eq!</span>(v1, v2);<br><br><br>    <span class="hljs-comment">// String -&gt; Vec</span><br>    <span class="hljs-comment">// impl From&lt;String&gt; for Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt; = s.__();<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span> = s.<span class="hljs-title function_ invoke__">into_bytes</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(v1, v2);<br><br>    <span class="hljs-comment">// impl&lt;&#x27;_&gt; From&lt;&amp;&#x27;_ str&gt; for Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v3</span> = <span class="hljs-type">Vec</span>::__(s);<br>    <span class="hljs-built_in">assert_eq!</span>(v2, v3);<br><br>    <span class="hljs-comment">// è¿­ä»£å™¨ Iterators å¯ä»¥é€šè¿‡ collect å˜æˆ Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v4</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = [<span class="hljs-number">0</span>; <span class="hljs-number">10</span>].<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(v4, <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0</span>; <span class="hljs-number">10</span>]);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br> &#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// array -&gt; Vec</span><br>    <span class="hljs-comment">// impl From&lt;[T; N]&gt; for Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>(arr);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = arr.<span class="hljs-title function_ invoke__">into</span>();<br><br>    <span class="hljs-built_in">assert_eq!</span>(v1, v2);<br><br><br>    <span class="hljs-comment">// String -&gt; Vec</span><br>    <span class="hljs-comment">// impl From&lt;String&gt; for Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt; = s.<span class="hljs-title function_ invoke__">into</span>();<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span> = s.<span class="hljs-title function_ invoke__">into_bytes</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(v1, v2);<br><br>    <span class="hljs-comment">// impl&lt;&#x27;_&gt; From&lt;&amp;&#x27;_ str&gt; for Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v3</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>(s);<br>    <span class="hljs-built_in">assert_eq!</span>(v2, v3);<br><br>    <span class="hljs-comment">// è¿­ä»£å™¨ Iterators å¯ä»¥é€šè¿‡ collect å˜æˆ Vec</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v4</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = [<span class="hljs-number">0</span>; <span class="hljs-number">10</span>].<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(v4, <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0</span>; <span class="hljs-number">10</span>]);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br> &#125;<br></code></pre></td></tr></table></figure><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><h3 id="4-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯å¹¶å®ç°ç¼ºå¤±çš„ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, v[i])<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> &#123;<br>       <span class="hljs-comment">// å®ç°è¿™é‡Œçš„ä»£ç ...</span><br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(v, <span class="hljs-built_in">vec!</span>[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯å¹¶å®ç°ç¼ºå¤±çš„ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">from</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, v.<span class="hljs-title function_ invoke__">get</span>(i))<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> &#123;<br>       <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(x) = v.<span class="hljs-title function_ invoke__">get</span>(i) &#123;<br>           v[i] =  x + <span class="hljs-number">1</span><br>       &#125; <span class="hljs-keyword">else</span> &#123;<br>           v.<span class="hljs-title function_ invoke__">push</span>(i + <span class="hljs-number">2</span>)<br>       &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(v, <span class="hljs-built_in">vec!</span>[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h2><p>ä¸ String çš„åˆ‡ç‰‡ç±»ä¼¼ï¼Œ Vec ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ‡ç‰‡ã€‚å¦‚æœè¯´ Vec æ˜¯å¯å˜çš„ï¼Œé‚£å®ƒçš„åˆ‡ç‰‡å°±æ˜¯ä¸å¯å˜æˆ–è€…è¯´åªè¯»çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &amp; æ¥è·å–åˆ‡ç‰‡ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œå°†åˆ‡ç‰‡ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’æ˜¯æ›´å¸¸è§çš„ä½¿ç”¨æ–¹å¼ï¼Œä¾‹å¦‚å½“ä¸€ä¸ªå‡½æ•°åªéœ€è¦å¯è¯»æ€§æ—¶ï¼Œé‚£ä¼ é€’ Vec æˆ– String çš„åˆ‡ç‰‡ &amp;[T] &#x2F; &amp;str ä¼šæ›´åŠ é€‚åˆã€‚</p><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span> = &amp;v[..];<br>    <span class="hljs-comment">// è¶Šç•Œè®¿é—®å°†å¯¼è‡´ panic.</span><br>    <span class="hljs-comment">// ä¿®æ”¹æ—¶å¿…é¡»ä½¿ç”¨ `v.len`</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = &amp;v[<span class="hljs-number">0</span>..<span class="hljs-number">4</span>];<br><br>    <span class="hljs-built_in">assert_eq!</span>(slice1, slice2);<br><br>    <span class="hljs-comment">// åˆ‡ç‰‡æ˜¯åªè¯»çš„</span><br>    <span class="hljs-comment">// æ³¨æ„ï¼šåˆ‡ç‰‡å’Œ `&amp;Vec` æ˜¯ä¸åŒçš„ç±»å‹ï¼Œåè€…ä»…ä»…æ˜¯ `Vec` çš„å¼•ç”¨ï¼Œå¹¶å¯ä»¥é€šè¿‡è§£å¼•ç”¨ç›´æ¥è·å– `Vec`</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">vec_ref</span>: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = &amp;<span class="hljs-keyword">mut</span> v;<br>    (*vec_ref).<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">4</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice3</span> = &amp;<span class="hljs-keyword">mut</span> v[<span class="hljs-number">0</span>..<span class="hljs-number">3</span>];<br>    slice3.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">4</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(slice3, &amp;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span> = &amp;v[..];<br>    <span class="hljs-comment">// è¶Šç•Œè®¿é—®å°†å¯¼è‡´ panic.</span><br>    <span class="hljs-comment">// ä¿®æ”¹æ—¶å¿…é¡»ä½¿ç”¨ `v.len`</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = &amp;v[<span class="hljs-number">0</span>..v.<span class="hljs-title function_ invoke__">len</span>()];<br><br>    <span class="hljs-built_in">assert_eq!</span>(slice1, slice2);<br><br>    <span class="hljs-comment">// åˆ‡ç‰‡æ˜¯åªè¯»çš„</span><br>    <span class="hljs-comment">// æ³¨æ„ï¼šåˆ‡ç‰‡å’Œ `&amp;Vec` æ˜¯ä¸åŒçš„ç±»å‹ï¼Œåè€…ä»…ä»…æ˜¯ `Vec` çš„å¼•ç”¨ï¼Œå¹¶å¯ä»¥é€šè¿‡è§£å¼•ç”¨ç›´æ¥è·å– `Vec`</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">vec_ref</span>: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = &amp;<span class="hljs-keyword">mut</span> v;<br>    (*vec_ref).<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">4</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice3</span> = &amp;<span class="hljs-keyword">mut</span> v[<span class="hljs-number">0</span>..];<br><br>    <span class="hljs-built_in">assert_eq!</span>(slice3, &amp;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®¹é‡"><a href="#å®¹é‡" class="headerlink" title="å®¹é‡"></a>å®¹é‡</h2><p>å®¹é‡ capacity æ˜¯å·²ç»åˆ†é…å¥½çš„å†…å­˜ç©ºé—´ï¼Œç”¨äºå­˜å‚¨æœªæ¥æ·»åŠ åˆ° Vec ä¸­çš„å…ƒç´ ã€‚è€Œé•¿åº¦ len åˆ™æ˜¯å½“å‰ Vec ä¸­å·²ç»å­˜å‚¨çš„å…ƒç´ æ•°é‡ã€‚å¦‚æœè¦æ·»åŠ æ–°å…ƒç´ æ—¶ï¼Œé•¿åº¦å°†è¦è¶…è¿‡å·²æœ‰çš„å®¹é‡ï¼Œé‚£å®¹é‡ä¼šè‡ªåŠ¨è¿›è¡Œå¢é•¿ï¼šRust ä¼šé‡æ–°åˆ†é…ä¸€å—æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå°†ä¹‹å‰çš„ Vec æ‹·è´è¿‡å»ï¼Œå› æ­¤ï¼Œè¿™é‡Œå°±ä¼šå‘ç”Ÿæ–°çš„å†…å­˜åˆ†é…( ç›®å‰ Rust çš„å®¹é‡è°ƒæ•´ç­–ç•¥æ˜¯åŠ å€ï¼Œä¾‹å¦‚ 2 -&gt; 4 -&gt; 8 ..)ã€‚</p><p>è‹¥è¿™æ®µä»£ç ä¼šé¢‘ç¹å‘ç”Ÿï¼Œé‚£é¢‘ç¹çš„å†…å­˜åˆ†é…ä¼šå¤§å¹…å½±å“æˆ‘ä»¬ç³»ç»Ÿçš„æ€§èƒ½ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯æå‰åˆ†é…å¥½è¶³å¤Ÿçš„å®¹é‡ï¼Œå°½é‡å‡å°‘å†…å­˜åˆ†é…ã€‚</p><h3 id="6-ğŸŒŸğŸŒŸ"><a href="#6-ğŸŒŸğŸŒŸ" class="headerlink" title="6.ğŸŒŸğŸŒŸ"></a>6.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">vec</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">10</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), __);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>(), <span class="hljs-number">10</span>);<br><br>    <span class="hljs-comment">// ç”±äºæå‰è®¾ç½®äº†è¶³å¤Ÿçš„å®¹é‡ï¼Œè¿™é‡Œçš„å¾ªç¯ä¸ä¼šé€ æˆä»»ä½•å†…å­˜åˆ†é…...</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> &#123;<br>        vec.<span class="hljs-title function_ invoke__">push</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), __);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>(), __);<br><br>    <span class="hljs-comment">// ...ä½†æ˜¯ä¸‹é¢çš„ä»£ç ä¼šé€ æˆæ–°çš„å†…å­˜åˆ†é…</span><br>    vec.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">11</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), <span class="hljs-number">11</span>);<br>    <span class="hljs-built_in">assert!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>() &gt;= <span class="hljs-number">11</span>);<br><br><br>    <span class="hljs-comment">// å¡«å†™ä¸€ä¸ªåˆé€‚çš„å€¼ï¼Œåœ¨ `for` å¾ªç¯è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šé€ æˆä»»ä½•å†…å­˜åˆ†é…</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">vec</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(__);<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">100</span> &#123;<br>        vec.<span class="hljs-title function_ invoke__">push</span>(i);<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), __);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>(), __);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">vec</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">10</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), <span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>(), <span class="hljs-number">10</span>);<br><br>    <span class="hljs-comment">// ç”±äºæå‰è®¾ç½®äº†è¶³å¤Ÿçš„å®¹é‡ï¼Œè¿™é‡Œçš„å¾ªç¯ä¸ä¼šé€ æˆä»»ä½•å†…å­˜åˆ†é…...</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> &#123;<br>        vec.<span class="hljs-title function_ invoke__">push</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), <span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>(), <span class="hljs-number">10</span>);<br><br>    <span class="hljs-comment">// ...ä½†æ˜¯ä¸‹é¢çš„ä»£ç ä¼šé€ æˆæ–°çš„å†…å­˜åˆ†é…</span><br>    vec.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">11</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), <span class="hljs-number">11</span>);<br>    <span class="hljs-built_in">assert!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>() &gt;= <span class="hljs-number">11</span>);<br><br><br>    <span class="hljs-comment">// å¡«å†™ä¸€ä¸ªåˆé€‚çš„å€¼ï¼Œåœ¨ `for` å¾ªç¯è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šé€ æˆä»»ä½•å†…å­˜åˆ†é…</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">vec</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">100</span> &#123;<br>        vec.<span class="hljs-title function_ invoke__">push</span>(i);<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">len</span>(), <span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(vec.<span class="hljs-title function_ invoke__">capacity</span>(), <span class="hljs-number">100</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åœ¨-Vec-ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ "><a href="#åœ¨-Vec-ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ " class="headerlink" title="åœ¨ Vec ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ "></a>åœ¨ Vec ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ </h2><p>Vec ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç ä¼šå‘ç”Ÿé”™è¯¯:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æšä¸¾æˆ–ç‰¹å¾å¯¹è±¡æ¥å­˜å‚¨ä¸åŒçš„ç±»å‹.</p><h3 id="7-ğŸŒŸğŸŒŸ"><a href="#7-ğŸŒŸğŸŒŸ" class="headerlink" title="7.ğŸŒŸğŸŒŸ"></a>7.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">IpAddr</span> &#123;<br>    <span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-type">String</span>),<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> : <span class="hljs-type">Vec</span>&lt;IpAddr&gt;= __;<br><br>    <span class="hljs-comment">// æšä¸¾çš„æ¯”è¾ƒéœ€è¦æ´¾ç”Ÿ PartialEq ç‰¹å¾</span><br>    <span class="hljs-built_in">assert_eq!</span>(v[<span class="hljs-number">0</span>], IpAddr::<span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()));<br>    <span class="hljs-built_in">assert_eq!</span>(v[<span class="hljs-number">1</span>], IpAddr::<span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-string">&quot;::1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">IpAddr</span> &#123;<br>    <span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-type">String</span>),<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> : <span class="hljs-type">Vec</span>&lt;IpAddr&gt;= <span class="hljs-built_in">vec!</span>[<br>        IpAddr::<span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()),<br>        IpAddr::<span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-string">&quot;::1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>())<br>    ];<br><br>    <span class="hljs-comment">// æšä¸¾çš„æ¯”è¾ƒéœ€è¦æ´¾ç”Ÿ PartialEq ç‰¹å¾</span><br>    <span class="hljs-built_in">assert_eq!</span>(v[<span class="hljs-number">0</span>], IpAddr::<span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()));<br>    <span class="hljs-built_in">assert_eq!</span>(v[<span class="hljs-number">1</span>], IpAddr::<span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-string">&quot;::1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ"><a href="#8-ğŸŒŸğŸŒŸ" class="headerlink" title="8.ğŸŒŸğŸŒŸ"></a>8.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">IpAddr</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">display</span>(&amp;<span class="hljs-keyword">self</span>);<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">V4</span>(<span class="hljs-type">String</span>);<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">IpAddr</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">V4</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">display</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ipv4: &#123;:?&#125;&quot;</span>,<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">V6</span>(<span class="hljs-type">String</span>);<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">IpAddr</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">V6</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">display</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ipv6: &#123;:?&#125;&quot;</span>,<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: __= <span class="hljs-built_in">vec!</span>[<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>())),<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-string">&quot;::1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>())),<br>    ];<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">ip</span> <span class="hljs-keyword">in</span> v &#123;<br>        ip.<span class="hljs-title function_ invoke__">display</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">IpAddr</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">display</span>(&amp;<span class="hljs-keyword">self</span>);<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">V4</span>(<span class="hljs-type">String</span>);<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">IpAddr</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">V4</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">display</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ipv4: &#123;:?&#125;&quot;</span>,<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">V6</span>(<span class="hljs-type">String</span>);<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">IpAddr</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">V6</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">display</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ipv6: &#123;:?&#125;&quot;</span>,<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> IpAddr&gt;&gt; = <span class="hljs-built_in">vec!</span>[<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>())),<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-string">&quot;::1&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>())),<br>    ];<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">ip</span> <span class="hljs-keyword">in</span> v &#123;<br>        ip.<span class="hljs-title function_ invoke__">display</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç›¸æ¯” [T; N] å½¢å¼çš„æ•°ç»„ï¼Œ Vector æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥åŠ¨æ€è°ƒæ•´é•¿åº¦ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>11.1.åŠ¨æ€å­—ç¬¦ä¸² String</title>
    <link href="https://lilinzta.github.io/2023/09/17/11-1-%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2-String/"/>
    <id>https://lilinzta.github.io/2023/09/17/11-1-%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2-String/</id>
    <published>2023-09-17T03:21:46.000Z</published>
    <updated>2024-01-20T11:35:54.968Z</updated>
    
    <content type="html"><![CDATA[<p>std::string::String æ˜¯ UTF-8 ç¼–ç ã€å¯å¢é•¿çš„åŠ¨æ€å­—ç¬¦ä¸². å®ƒä¹Ÿæ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸ç”¨çš„å­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒæ—¶å¯¹äºå®ƒæ‰€æ‹¥æœ‰çš„å†…å®¹æ‹¥æœ‰æ‰€æœ‰æƒã€‚</p><span id="more"></span><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-comment">// 1. ä¸è¦ä½¿ç”¨ `to_string()`</span><br><span class="hljs-comment">// 2. ä¸è¦æ·»åŠ /åˆ é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;hello, &quot;</span>;<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>());<br>    s.<span class="hljs-title function_ invoke__">push</span>(__);<br><br>    <span class="hljs-title function_ invoke__">move_ownership</span>(s);<br><br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-string">&quot;hello, world!&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">move_ownership</span>(s: <span class="hljs-type">String</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ownership of \&quot;&#123;&#125;\&quot; is moved here!&quot;</span>, s)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-comment">// 1. ä¸è¦ä½¿ç”¨ `to_string()`</span><br><span class="hljs-comment">// 2. ä¸è¦æ·»åŠ /åˆ é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>);<br>    s.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&#x27;!&#x27;</span>);<br><br>    <span class="hljs-title function_ invoke__">move_ownership</span>(s.<span class="hljs-title function_ invoke__">clone</span>());<br><br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-string">&quot;hello, world!&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">move_ownership</span>(s: <span class="hljs-type">String</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ownership of \&quot;&#123;&#125;\&quot; is moved here!&quot;</span>, s)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="String-and-str"><a href="#String-and-str" class="headerlink" title="String and &amp;str"></a>String and &amp;str</h2><p>è™½ç„¶ String çš„åº•å±‚æ˜¯ Vec<u8> ä¹Ÿå°±æ˜¯å­—èŠ‚æ•°ç»„çš„å½¢å¼å­˜å‚¨çš„ï¼Œä½†æ˜¯å®ƒæ˜¯åŸºäº UTF-8 ç¼–ç çš„å­—ç¬¦åºåˆ—ã€‚String åˆ†é…åœ¨å †ä¸Šã€å¯å¢é•¿ä¸”ä¸æ˜¯ä»¥ null ç»“å°¾ã€‚<br>è€Œ &amp;str æ˜¯åˆ‡ç‰‡å¼•ç”¨ç±»å‹( &amp;[u8] )ï¼ŒæŒ‡å‘ä¸€ä¸ªåˆæ³•çš„ UTF-8 å­—ç¬¦åºåˆ—ï¼Œæ€»ä¹‹ï¼Œ&amp;str å’Œ String çš„å…³ç³»ç±»ä¼¼äº &amp;[T] å’Œ Vec<T> ã€‚</p><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span>: &amp;<span class="hljs-type">str</span> = __; <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•</span><br>   <span class="hljs-built_in">assert_eq!</span>(slice1, <span class="hljs-string">&quot;hello, world&quot;</span>);<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = __;<br>   <span class="hljs-built_in">assert_eq!</span>(slice2, <span class="hljs-string">&quot;hello&quot;</span>);<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice3</span>: __ = __;<br>   slice3.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&#x27;!&#x27;</span>);<br>   <span class="hljs-built_in">assert_eq!</span>(slice3, <span class="hljs-string">&quot;hello, world!&quot;</span>);<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span>: &amp;<span class="hljs-type">str</span> = &amp;s; <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•</span><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span>: &amp;<span class="hljs-type">str</span> = s.<span class="hljs-title function_ invoke__">as_str</span>(); <span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•</span><br>   <span class="hljs-built_in">assert_eq!</span>(slice1, <span class="hljs-string">&quot;hello, world&quot;</span>);<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">5</span>];<br>   <span class="hljs-built_in">assert_eq!</span>(slice2, <span class="hljs-string">&quot;hello&quot;</span>);<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice3</span>: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>   slice3.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&#x27;!&#x27;</span>);<br>   <span class="hljs-built_in">assert_eq!</span>(slice3, <span class="hljs-string">&quot;hello, world!&quot;</span>);<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// é—®é¢˜:  æˆ‘ä»¬çš„ä»£ç ä¸­å‘ç”Ÿäº†å¤šå°‘æ¬¡å †å†…å­˜åˆ†é…ï¼Ÿ</span><br><span class="hljs-comment">// ä½ çš„å›ç­”: 2</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// åŸºäº `&amp;str` ç±»å‹åˆ›å»ºä¸€ä¸ª String,</span><br>    <span class="hljs-comment">// å­—ç¬¦ä¸²å­—é¢é‡çš„ç±»å‹æ˜¯ `&amp;str`</span><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world!&quot;</span>);<br><br>   <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨æŒ‡å‘ String `s`</span><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span>: &amp;<span class="hljs-type">str</span> = &amp;s;<br><br>   <span class="hljs-comment">// åŸºäºåˆšåˆ›å»ºçš„åˆ‡ç‰‡æ¥åˆ›å»ºä¸€ä¸ª String</span><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">String</span> = slice.<span class="hljs-title function_ invoke__">to_string</span>();<br><br>   <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-string">&quot;hello, world!&quot;</span>);<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="UTF-8-ç´¢å¼•"><a href="#UTF-8-ç´¢å¼•" class="headerlink" title="UTF-8 &amp; ç´¢å¼•"></a>UTF-8 &amp; ç´¢å¼•</h2><p>ç”±äº String éƒ½æ˜¯ UTF-8 ç¼–ç çš„ï¼Œè¿™ä¼šå¸¦æ¥å‡ ä¸ªå½±å“:</p><ul><li>å¦‚æœä½ éœ€è¦çš„æ˜¯é UTF-8 å­—ç¬¦ä¸²ï¼Œå¯ä»¥è€ƒè™‘ OsString</li><li>æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼è®¿é—®ä¸€ä¸ª String</li></ul><h3 id="4-ğŸŒŸğŸŒŸğŸŒŸ-æˆ‘ä»¬æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åˆ‡ç‰‡çš„æ–¹å¼æ¥è·å–å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†-s1-start-end"><a href="#4-ğŸŒŸğŸŒŸğŸŒŸ-æˆ‘ä»¬æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åˆ‡ç‰‡çš„æ–¹å¼æ¥è·å–å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†-s1-start-end" class="headerlink" title="4.ğŸŒŸğŸŒŸğŸŒŸ æˆ‘ä»¬æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åˆ‡ç‰‡çš„æ–¹å¼æ¥è·å–å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ† &amp;s1[start..end]"></a>4.ğŸŒŸğŸŒŸğŸŒŸ æˆ‘ä»¬æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åˆ‡ç‰‡çš„æ–¹å¼æ¥è·å–å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ† &amp;s1[start..end]</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, ä¸–ç•Œ&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span> = s[<span class="hljs-number">0</span>]; <span class="hljs-comment">//æç¤º: `h` åœ¨ UTF-8 ç¼–ç ä¸­åªå ç”¨ 1 ä¸ªå­—èŠ‚</span><br>    <span class="hljs-built_in">assert_eq!</span>(slice1, <span class="hljs-string">&quot;h&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = &amp;s[<span class="hljs-number">3</span>..<span class="hljs-number">5</span>];<span class="hljs-comment">// æç¤º: `ä¸–` åœ¨ UTF-8 ç¼–ç ä¸­å ç”¨ 3 ä¸ªå­—èŠ‚</span><br>    <span class="hljs-built_in">assert_eq!</span>(slice2, <span class="hljs-string">&quot;ä¸–&quot;</span>);<br><br>    <span class="hljs-comment">// è¿­ä»£ s ä¸­çš„æ‰€æœ‰å­—ç¬¦</span><br>    <span class="hljs-keyword">for</span> (i, c) <span class="hljs-keyword">in</span> s.__ &#123;<br>        <span class="hljs-keyword">if</span> i == <span class="hljs-number">7</span> &#123;<br>            <span class="hljs-built_in">assert_eq!</span>(c, <span class="hljs-string">&#x27;ä¸–&#x27;</span>)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, ä¸–ç•Œ&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">1</span>]; <span class="hljs-comment">//æç¤º: `h` åœ¨ UTF-8 ç¼–ç ä¸­åªå ç”¨ 1 ä¸ªå­—èŠ‚</span><br>    <span class="hljs-built_in">assert_eq!</span>(slice1, <span class="hljs-string">&quot;h&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = &amp;s[<span class="hljs-number">7</span>..<span class="hljs-number">10</span>];<span class="hljs-comment">// æç¤º: `ä¸–` åœ¨ UTF-8 ç¼–ç ä¸­å ç”¨ 3 ä¸ªå­—èŠ‚</span><br>    <span class="hljs-built_in">assert_eq!</span>(slice2, <span class="hljs-string">&quot;ä¸–&quot;</span>);<br><br>    <span class="hljs-comment">// è¿­ä»£ s ä¸­çš„æ‰€æœ‰å­—ç¬¦</span><br>    <span class="hljs-keyword">for</span> (i, c) <span class="hljs-keyword">in</span> s.<span class="hljs-title function_ invoke__">chars</span>().<span class="hljs-title function_ invoke__">enumerate</span>() &#123;<br>        <span class="hljs-keyword">if</span> i == <span class="hljs-number">7</span> &#123;<br>            <span class="hljs-built_in">assert_eq!</span>(c, <span class="hljs-string">&#x27;ä¸–&#x27;</span>)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="utf8-slice"><a href="#utf8-slice" class="headerlink" title="utf8_slice"></a>utf8_slice</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ utf8_slice æ¥æŒ‰ç…§å­—ç¬¦çš„è‡ªç„¶ç´¢å¼•æ–¹å¼å¯¹ UTF-8 å­—ç¬¦ä¸²è¿›è¡Œåˆ‡ç‰‡è®¿é—®ï¼Œä¸ä¹‹å‰çš„åˆ‡ç‰‡æ–¹å¼ç›¸æ¯”ï¼Œå®ƒç´¢å¼•çš„æ˜¯å­—ç¬¦ï¼Œè€Œä¹‹å‰çš„æ–¹å¼ç´¢å¼•çš„æ˜¯å­—èŠ‚.</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> utf8_slice;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;The ğŸš€ goes to the ğŸŒ‘!&quot;</span>;<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">rocket</span> = utf8_slice::<span class="hljs-title function_ invoke__">slice</span>(s, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br>   <span class="hljs-comment">// Will equal &quot;ğŸš€&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸğŸŒŸ</h3><blockquote><p>tips:ä¹Ÿè®¸ä½ éœ€è¦ä½¿ç”¨ from_utf8 æ–¹æ³•<br>Q:</p></blockquote><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    __;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">104</span>, <span class="hljs-number">101</span>, <span class="hljs-number">108</span>, <span class="hljs-number">108</span>, <span class="hljs-number">111</span>];<br><br>    <span class="hljs-comment">// å°†å­—èŠ‚æ•°ç»„è½¬æ¢æˆ String</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = __;<br><br><br>    <span class="hljs-built_in">assert_eq!</span>(s, s1);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">104</span>, <span class="hljs-number">101</span>, <span class="hljs-number">108</span>, <span class="hljs-number">108</span>, <span class="hljs-number">111</span>];<br><br>    <span class="hljs-comment">// å°†å­—èŠ‚æ•°ç»„è½¬æ¢æˆ String</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_utf8</span>(v).<span class="hljs-title function_ invoke__">unwrap</span>();<br><br><br>    <span class="hljs-built_in">assert_eq!</span>(s, s1);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å†…éƒ¨è¡¨ç¤º"><a href="#å†…éƒ¨è¡¨ç¤º" class="headerlink" title="å†…éƒ¨è¡¨ç¤º"></a>å†…éƒ¨è¡¨ç¤º</h2><p>äº‹å®ä¸Š String æ˜¯ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒä½œä¸ºä¸€ä¸ªç»“æ„ä½“å­˜å‚¨åœ¨æ ˆä¸Šï¼Œç„¶åæŒ‡å‘å­˜å‚¨åœ¨å †ä¸Šçš„å­—ç¬¦ä¸²åº•å±‚æ•°æ®ã€‚<br>å­˜å‚¨åœ¨æ ˆä¸Šçš„æ™ºèƒ½æŒ‡é’ˆç»“æ„ä½“ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªæŒ‡é’ˆåªæŒ‡å‘å †ä¸Šçš„å­—èŠ‚æ•°ç»„ï¼Œå·²ä½¿ç”¨çš„é•¿åº¦ä»¥åŠå·²åˆ†é…çš„å®¹é‡ capacity (å·²ä½¿ç”¨çš„é•¿åº¦å°äºç­‰äºå·²åˆ†é…çš„å®¹é‡ï¼Œå½“å®¹é‡ä¸å¤Ÿæ—¶ï¼Œä¼šé‡æ–°åˆ†é…å†…å­˜ç©ºé—´)ã€‚</p><h3 id="6-ğŸŒŸğŸŒŸ-å¦‚æœ-String-çš„å½“å‰å®¹é‡è¶³å¤Ÿï¼Œé‚£ä¹ˆæ·»åŠ å­—ç¬¦å°†ä¸ä¼šå¯¼è‡´æ–°çš„å†…å­˜åˆ†é…"><a href="#6-ğŸŒŸğŸŒŸ-å¦‚æœ-String-çš„å½“å‰å®¹é‡è¶³å¤Ÿï¼Œé‚£ä¹ˆæ·»åŠ å­—ç¬¦å°†ä¸ä¼šå¯¼è‡´æ–°çš„å†…å­˜åˆ†é…" class="headerlink" title="6.ğŸŒŸğŸŒŸ å¦‚æœ String çš„å½“å‰å®¹é‡è¶³å¤Ÿï¼Œé‚£ä¹ˆæ·»åŠ å­—ç¬¦å°†ä¸ä¼šå¯¼è‡´æ–°çš„å†…å­˜åˆ†é…"></a>6.ğŸŒŸğŸŒŸ å¦‚æœ String çš„å½“å‰å®¹é‡è¶³å¤Ÿï¼Œé‚£ä¹ˆæ·»åŠ å­—ç¬¦å°†ä¸ä¼šå¯¼è‡´æ–°çš„å†…å­˜åˆ†é…</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ä¸‹é¢çš„ä»£ç ä»¥æ‰“å°å¦‚ä¸‹å†…å®¹:</span><br><span class="hljs-comment">// 25</span><br><span class="hljs-comment">// 25</span><br><span class="hljs-comment">// 25</span><br><span class="hljs-comment">// å¾ªç¯ä¸­ä¸ä¼šå‘ç”Ÿä»»ä½•å†…å­˜åˆ†é…</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">capacity</span>());<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">2</span> &#123;<br>        s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">capacity</span>());<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ä¸‹é¢çš„ä»£ç ä»¥æ‰“å°å¦‚ä¸‹å†…å®¹:</span><br><span class="hljs-comment">// 25</span><br><span class="hljs-comment">// 25</span><br><span class="hljs-comment">// 25</span><br><span class="hljs-comment">// å¾ªç¯ä¸­ä¸ä¼šå‘ç”Ÿä»»ä½•å†…å­˜åˆ†é…</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">25</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">capacity</span>());<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">2</span> &#123;<br>        s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">capacity</span>());<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#7-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="7.ğŸŒŸğŸŒŸğŸŒŸ"></a>7.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">use</span> std::mem;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">story</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Rust By Practice&quot;</span>);<br><br>    <span class="hljs-comment">// é˜»æ­¢ String çš„æ•°æ®è¢«è‡ªåŠ¨ drop</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">story</span> = mem::ManuallyDrop::<span class="hljs-title function_ invoke__">new</span>(story);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ptr</span> = story.__();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">len</span> = story.__();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">capacity</span> = story.__();<br><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">16</span>, len);<br><br>    <span class="hljs-comment">// æˆ‘ä»¬å¯ä»¥åŸºäº ptr æŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡æ¥é‡æ–°æ„å»º String.</span><br>    <span class="hljs-comment">// è¿™ç§æ“ä½œå¿…é¡»æ ‡è®°ä¸º unsafeï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è‡ªå·±æ¥ç¡®ä¿è¿™é‡Œçš„æ“ä½œæ˜¯å®‰å…¨çš„</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-keyword">unsafe</span> &#123; <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_raw_parts</span>(ptr, len, capacity) &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(*story, s);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">use</span> std::mem;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">story</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Rust By Practice&quot;</span>);<br><br>    <span class="hljs-comment">// é˜»æ­¢ String çš„æ•°æ®è¢«è‡ªåŠ¨ drop</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">story</span> = mem::ManuallyDrop::<span class="hljs-title function_ invoke__">new</span>(story);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ptr</span> = story.<span class="hljs-title function_ invoke__">as_mut_ptr</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">len</span> = story.<span class="hljs-title function_ invoke__">len</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">capacity</span> = story.<span class="hljs-title function_ invoke__">capacity</span>();<br><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">16</span>, len);<br><br>    <span class="hljs-comment">// æˆ‘ä»¬å¯ä»¥åŸºäº ptr æŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡æ¥é‡æ–°æ„å»º String.</span><br>    <span class="hljs-comment">// è¿™ç§æ“ä½œå¿…é¡»æ ‡è®°ä¸º unsafeï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è‡ªå·±æ¥ç¡®ä¿è¿™é‡Œçš„æ“ä½œæ˜¯å®‰å…¨çš„</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-keyword">unsafe</span> &#123; <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_raw_parts</span>(ptr, len, capacity) &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(*story, s);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;std::string::String æ˜¯ UTF-8 ç¼–ç ã€å¯å¢é•¿çš„åŠ¨æ€å­—ç¬¦ä¸². å®ƒä¹Ÿæ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸ç”¨çš„å­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒæ—¶å¯¹äºå®ƒæ‰€æ‹¥æœ‰çš„å†…å®¹æ‹¥æœ‰æ‰€æœ‰æƒã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>10.5.è¿›ä¸€æ­¥æ·±å…¥ç‰¹å¾</title>
    <link href="https://lilinzta.github.io/2023/09/15/10-5-%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%B7%B1%E5%85%A5%E7%89%B9%E5%BE%81/"/>
    <id>https://lilinzta.github.io/2023/09/15/10-5-%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%B7%B1%E5%85%A5%E7%89%B9%E5%BE%81/</id>
    <published>2023-09-15T15:22:23.000Z</published>
    <updated>2024-01-17T15:05:42.358Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…³è”ç±»å‹"><a href="#å…³è”ç±»å‹" class="headerlink" title="å…³è”ç±»å‹"></a>å…³è”ç±»å‹</h2><p>å…³è”ç±»å‹ä¸»è¦ç”¨äºæå‡ä»£ç çš„å¯è¯»æ€§ï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç :</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">CacheableItem</span>: <span class="hljs-built_in">Clone</span> + <span class="hljs-built_in">Default</span> + fmt::<span class="hljs-built_in">Debug</span> + Decodable + Encodable &#123;<br>  <span class="hljs-keyword">type</span> <span class="hljs-title class_">Address</span>: <span class="hljs-built_in">AsRef</span>&lt;[<span class="hljs-type">u8</span>]&gt; + <span class="hljs-built_in">Clone</span> + fmt::<span class="hljs-built_in">Debug</span> + <span class="hljs-built_in">Eq</span> + Hash;<br>  <span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_null</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç›¸æ¯” AsRef&lt;[u8]&gt; + Clone + fmt::Debug + Eq + Hashï¼Œ Address çš„ä½¿ç”¨å¯ä»¥æå¤§çš„å‡å°‘å…¶å®ƒç±»å‹åœ¨å®ç°è¯¥ç‰¹å¾æ—¶æ‰€éœ€çš„æ¨¡ç‰ˆä»£ç .</p><h3 id="1-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Container</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>);<br><br><span class="hljs-comment">// ä½¿ç”¨å…³è”ç±»å‹å®ç°é‡æ–°å®ç°ä»¥ä¸‹ç‰¹å¾</span><br><span class="hljs-comment">// trait Contains &#123;</span><br><span class="hljs-comment">//    type A;</span><br><span class="hljs-comment">//    type B;</span><br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Contains</span>&lt;A, B&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">contains</span>(&amp;<span class="hljs-keyword">self</span>, _: &amp;A, _: &amp;B) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span>;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">first</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">last</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Contains</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">contains</span>(&amp;<span class="hljs-keyword">self</span>, number_1: &amp;<span class="hljs-type">i32</span>, number_2: &amp;<span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        (&amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span> == number_1) &amp;&amp; (&amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">1</span> == number_2)<br>    &#125;<br>    <span class="hljs-comment">// Grab the first number.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">first</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123; <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span> &#125;<br><br>    <span class="hljs-comment">// Grab the last number.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">last</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123; <span class="hljs-keyword">self</span>.<span class="hljs-number">1</span> &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">difference</span>&lt;A, B, C: Contains&lt;A, B&gt;&gt;(container: &amp;C) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    container.<span class="hljs-title function_ invoke__">last</span>() - container.<span class="hljs-title function_ invoke__">first</span>()<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">number_1</span> = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">number_2</span> = <span class="hljs-number">10</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">container</span> = <span class="hljs-title function_ invoke__">Container</span>(number_1, number_2);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Does container contain &#123;&#125; and &#123;&#125;: &#123;&#125;&quot;</span>,<br>        &amp;number_1, &amp;number_2,<br>        container.<span class="hljs-title function_ invoke__">contains</span>(&amp;number_1, &amp;number_2));<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;First number: &#123;&#125;&quot;</span>, container.<span class="hljs-title function_ invoke__">first</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Last number: &#123;&#125;&quot;</span>, container.<span class="hljs-title function_ invoke__">last</span>());<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The difference is: &#123;&#125;&quot;</span>, <span class="hljs-title function_ invoke__">difference</span>(&amp;container));<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Container</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>);<br><br><span class="hljs-comment">// ä½¿ç”¨å…³è”ç±»å‹å®ç°é‡æ–°å®ç°ä»¥ä¸‹ç‰¹å¾</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Contains</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">A</span>;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">B</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">contains</span>(&amp;<span class="hljs-keyword">self</span>, _: &amp;<span class="hljs-keyword">Self</span>::A, _: &amp;<span class="hljs-keyword">Self</span>::B) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span>;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">first</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">last</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Contains</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">A</span> = <span class="hljs-type">i32</span>;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">B</span> = <span class="hljs-type">i32</span>;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">contains</span>(&amp;<span class="hljs-keyword">self</span>, number_1: &amp;<span class="hljs-type">i32</span>, number_2: &amp;<span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        (&amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span> == number_1) &amp;&amp; (&amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">1</span> == number_2)<br>    &#125;<br>    <span class="hljs-comment">// Grab the first number.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">first</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123; <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span> &#125;<br><br>    <span class="hljs-comment">// Grab the last number.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">last</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123; <span class="hljs-keyword">self</span>.<span class="hljs-number">1</span> &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">difference</span>&lt;C: Contains&gt;(container: &amp;C) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    container.<span class="hljs-title function_ invoke__">last</span>() - container.<span class="hljs-title function_ invoke__">first</span>()<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">number_1</span> = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">number_2</span> = <span class="hljs-number">10</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">container</span> = <span class="hljs-title function_ invoke__">Container</span>(number_1, number_2);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Does container contain &#123;&#125; and &#123;&#125;: &#123;&#125;&quot;</span>,<br>        &amp;number_1, &amp;number_2,<br>        container.<span class="hljs-title function_ invoke__">contains</span>(&amp;number_1, &amp;number_2));<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;First number: &#123;&#125;&quot;</span>, container.<span class="hljs-title function_ invoke__">first</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Last number: &#123;&#125;&quot;</span>, container.<span class="hljs-title function_ invoke__">last</span>());<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The difference is: &#123;&#125;&quot;</span>, <span class="hljs-title function_ invoke__">difference</span>(&amp;container));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®šä¹‰é»˜è®¤çš„æ³›å‹ç±»å‹å‚æ•°"><a href="#å®šä¹‰é»˜è®¤çš„æ³›å‹ç±»å‹å‚æ•°" class="headerlink" title="å®šä¹‰é»˜è®¤çš„æ³›å‹ç±»å‹å‚æ•°"></a>å®šä¹‰é»˜è®¤çš„æ³›å‹ç±»å‹å‚æ•°</h2><p>å½“æˆ‘ä»¬ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°æ—¶ï¼Œå¯ä»¥ä¸ºè¯¥æ³›å‹å‚æ•°æŒ‡å®šä¸€ä¸ªå…·ä½“çš„é»˜è®¤ç±»å‹ï¼Œè¿™æ ·å½“å®ç°è¯¥ç‰¹å¾æ—¶ï¼Œå¦‚æœè¯¥é»˜è®¤ç±»å‹å¯ä»¥ä½¿ç”¨ï¼Œé‚£ç”¨æˆ·å†æ— éœ€æ‰‹åŠ¨æŒ‡å®šå…·ä½“çš„ç±»å‹ã€‚</p><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::ops::Sub;<br><br><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-comment">// ç”¨ä¸‰ç§æ–¹æ³•å¡«ç©º: å…¶ä¸­ä¸¤ç§ä½¿ç”¨é»˜è®¤çš„æ³›å‹å‚æ•°ï¼Œå¦å¤–ä¸€ç§ä¸ä½¿ç”¨</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">__</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = <span class="hljs-keyword">Self</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sub</span>(<span class="hljs-keyword">self</span>, other: <span class="hljs-keyword">Self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Output &#123;<br>        Point &#123;<br>            x: <span class="hljs-keyword">self</span>.x - other.x,<br>            y: <span class="hljs-keyword">self</span>.y - other.y,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(Point &#123; x: <span class="hljs-number">2</span>, y: <span class="hljs-number">3</span> &#125; - Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">0</span> &#125;,<br>        Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">3</span> &#125;);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::ops::Sub;<br><br><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-comment">// ç”¨ä¸‰ç§æ–¹æ³•å¡«ç©º: å…¶ä¸­ä¸¤ç§ä½¿ç”¨é»˜è®¤çš„æ³›å‹å‚æ•°ï¼Œå¦å¤–ä¸€ç§ä¸ä½¿ç”¨</span><br><span class="hljs-keyword">impl</span>&lt;T: Sub&lt;Output = T&gt;&gt; Sub&lt;Point&lt;T&gt;&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = <span class="hljs-keyword">Self</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sub</span>(<span class="hljs-keyword">self</span>, other: <span class="hljs-keyword">Self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Output &#123;<br>        Point &#123;<br>            x: <span class="hljs-keyword">self</span>.x - other.x,<br>            y: <span class="hljs-keyword">self</span>.y - other.y,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(Point &#123; x: <span class="hljs-number">2</span>, y: <span class="hljs-number">3</span> &#125; - Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">0</span> &#125;,<br>        Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">3</span> &#125;);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::ops::Sub;<br><br><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-comment">// ç”¨ä¸‰ç§æ–¹æ³•å¡«ç©º: å…¶ä¸­ä¸¤ç§ä½¿ç”¨é»˜è®¤çš„æ³›å‹å‚æ•°ï¼Œå¦å¤–ä¸€ç§ä¸ä½¿ç”¨</span><br><span class="hljs-keyword">impl</span>&lt;T: Sub&lt;Output = T&gt;&gt; Sub&lt;<span class="hljs-keyword">Self</span>&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = <span class="hljs-keyword">Self</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sub</span>(<span class="hljs-keyword">self</span>, other: <span class="hljs-keyword">Self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Output &#123;<br>        Point &#123;<br>            x: <span class="hljs-keyword">self</span>.x - other.x,<br>            y: <span class="hljs-keyword">self</span>.y - other.y,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(Point &#123; x: <span class="hljs-number">2</span>, y: <span class="hljs-number">3</span> &#125; - Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">0</span> &#125;,<br>        Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">3</span> &#125;);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::ops::Sub;<br><br><span class="hljs-meta">#[derive(Debug, PartialEq)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-comment">// ç”¨ä¸‰ç§æ–¹æ³•å¡«ç©º: å…¶ä¸­ä¸¤ç§ä½¿ç”¨é»˜è®¤çš„æ³›å‹å‚æ•°ï¼Œå¦å¤–ä¸€ç§ä¸ä½¿ç”¨</span><br><span class="hljs-keyword">impl</span>&lt;T: Sub&lt;Output = T&gt;&gt; Sub <span class="hljs-keyword">for</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = <span class="hljs-keyword">Self</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sub</span>(<span class="hljs-keyword">self</span>, other: <span class="hljs-keyword">Self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Output &#123;<br>        Point &#123;<br>            x: <span class="hljs-keyword">self</span>.x - other.x,<br>            y: <span class="hljs-keyword">self</span>.y - other.y,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(Point &#123; x: <span class="hljs-number">2</span>, y: <span class="hljs-number">3</span> &#125; - Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">0</span> &#125;,<br>        Point &#123; x: <span class="hljs-number">1</span>, y: <span class="hljs-number">3</span> &#125;);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®Œå…¨é™å®šè¯­æ³•"><a href="#å®Œå…¨é™å®šè¯­æ³•" class="headerlink" title="å®Œå…¨é™å®šè¯­æ³•"></a>å®Œå…¨é™å®šè¯­æ³•</h2><p>åœ¨ Rust ä¸­ï¼Œä¸¤ä¸ªä¸åŒç‰¹å¾çš„æ–¹æ³•å®Œå…¨å¯ä»¥åŒåï¼Œä¸”ä½ å¯ä»¥ä¸ºåŒä¸€ä¸ªç±»å‹åŒæ—¶å®ç°è¿™ä¸¤ä¸ªç‰¹å¾ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå°±å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼šè¯¥å¦‚ä½•è°ƒç”¨è¿™ä¸¤ä¸ªç‰¹å¾ä¸Šå®šä¹‰çš„åŒåæ–¹æ³•ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å®Œå…¨é™å®šè¯­æ³•( Fully Qualified Syntax )ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">UsernameWidget</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">AgeWidget</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u8</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Form</span> &#123;<br>    username: <span class="hljs-type">String</span>,<br>    age: <span class="hljs-type">u8</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">UsernameWidget</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Form</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">self</span>.username.<span class="hljs-title function_ invoke__">clone</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">AgeWidget</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Form</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u8</span> &#123;<br>        <span class="hljs-keyword">self</span>.age<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">form</span> = Form&#123;<br>        username: <span class="hljs-string">&quot;rustacean&quot;</span>.<span class="hljs-title function_ invoke__">to_owned</span>(),<br>        age: <span class="hljs-number">28</span>,<br>    &#125;;<br><br>    <span class="hljs-comment">// å¦‚æœä½ åæ³¨é‡Šä¸‹é¢ä¸€è¡Œä»£ç ï¼Œå°†çœ‹åˆ°ä¸€ä¸ªé”™è¯¯: Fully Qualified Syntax</span><br>    <span class="hljs-comment">// æ¯•ç«Ÿï¼Œè¿™é‡Œæœ‰å¥½å‡ ä¸ªåŒåçš„ `get` æ–¹æ³•</span><br>    <span class="hljs-comment">//</span><br>    <span class="hljs-comment">// println!(&quot;&#123;&#125;&quot;, form.get());</span><br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">username</span> = UsernameWidget::<span class="hljs-title function_ invoke__">get</span>(&amp;form);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-string">&quot;rustacean&quot;</span>.<span class="hljs-title function_ invoke__">to_owned</span>(), username);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = AgeWidget::<span class="hljs-title function_ invoke__">get</span>(&amp;form); <span class="hljs-comment">// ä½ è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³• `&lt;Form as AgeWidget&gt;::get`</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">28</span>, age);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Pilot</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Wizard</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Human</span>;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Pilot</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Human</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;This is your captain speaking.&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Wizard</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Human</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Up!&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Human</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;*waving arms furiously*&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">person</span> = Human;<br><br>    <span class="hljs-built_in">assert_eq!</span>(__, <span class="hljs-string">&quot;This is your captain speaking.&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(__, <span class="hljs-string">&quot;Up!&quot;</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(__, <span class="hljs-string">&quot;*waving arms furiously*&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Pilot</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Wizard</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Human</span>;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Pilot</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Human</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;This is your captain speaking.&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Wizard</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Human</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Up!&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Human</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;*waving arms furiously*&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">person</span> = Human;<br><br>    <span class="hljs-built_in">assert_eq!</span>(Pilot::<span class="hljs-title function_ invoke__">fly</span>(&amp;person), <span class="hljs-string">&quot;This is your captain speaking.&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(Wizard::<span class="hljs-title function_ invoke__">fly</span>(&amp;person), <span class="hljs-string">&quot;Up!&quot;</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(person.<span class="hljs-title function_ invoke__">fly</span>(), <span class="hljs-string">&quot;*waving arms furiously*&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Supertraits"><a href="#Supertraits" class="headerlink" title="Supertraits"></a>Supertraits</h2><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬å¸Œæœ›åœ¨ç‰¹å¾ä¸Šå®ç°ç±»ä¼¼ç»§æ‰¿çš„ç‰¹æ€§ï¼Œä¾‹å¦‚è®©ä¸€ä¸ªç‰¹å¾ A ä½¿ç”¨å¦ä¸€ä¸ªç‰¹å¾ B çš„åŠŸèƒ½ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»å‹è¦å®ç°ç‰¹å¾ A é¦–å…ˆè¦å®ç°ç‰¹å¾ Bï¼Œ ç‰¹å¾ B å°±è¢«ç§°ä¸º supertrait</p><h3 id="4-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-comment">// Person æ˜¯ Student çš„ supertrait .</span><br><span class="hljs-comment">// å®ç° Student éœ€è¦åŒæ—¶å®ç° Person.</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Student</span>: Person &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">university</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Programmer</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fav_language</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-comment">// CompSciStudent (computer science student) æ˜¯ Programmer</span><br><span class="hljs-comment">// å’Œ Student çš„ subtrait. å®ç° CompSciStudent éœ€è¦å…ˆå®ç°è¿™ä¸¤ä¸ª supertraits.</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">CompSciStudent</span>: Programmer + Student &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">git_username</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">comp_sci_student_greeting</span>(student: &amp;<span class="hljs-keyword">dyn</span> CompSciStudent) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-built_in">format!</span>(<br>        <span class="hljs-string">&quot;My name is &#123;&#125; and I attend &#123;&#125;. My favorite language is &#123;&#125;. My Git username is &#123;&#125;&quot;</span>,<br>        student.<span class="hljs-title function_ invoke__">name</span>(),<br>        student.<span class="hljs-title function_ invoke__">university</span>(),<br>        student.<span class="hljs-title function_ invoke__">fav_language</span>(),<br>        student.<span class="hljs-title function_ invoke__">git_username</span>()<br>    )<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">CSStudent</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    university: <span class="hljs-type">String</span>,<br>    fav_language: <span class="hljs-type">String</span>,<br>    git_username: <span class="hljs-type">String</span><br>&#125;<br><br><span class="hljs-comment">// ä¸º CSStudent å®ç°æ‰€éœ€çš„ç‰¹å¾</span><br><span class="hljs-keyword">impl</span> ...<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">student</span> = CSStudent &#123;<br>        name: <span class="hljs-string">&quot;Sunfei&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        university: <span class="hljs-string">&quot;XXX&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        fav_language: <span class="hljs-string">&quot;Rust&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        git_username: <span class="hljs-string">&quot;sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;;<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-title function_ invoke__">comp_sci_student_greeting</span>(__));<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-comment">// Person æ˜¯ Student çš„ supertrait .</span><br><span class="hljs-comment">// å®ç° Student éœ€è¦åŒæ—¶å®ç° Person.</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Student</span>: Person &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">university</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Programmer</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fav_language</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-comment">// CompSciStudent (computer science student) æ˜¯ Programmer </span><br><span class="hljs-comment">// å’Œ Student çš„ subtrait. å®ç° CompSciStudent éœ€è¦å…ˆå®ç°è¿™ä¸¤ä¸ª supertraits.</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">CompSciStudent</span>: Programmer + Student &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">git_username</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">comp_sci_student_greeting</span>(student: &amp;<span class="hljs-keyword">dyn</span> CompSciStudent) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-built_in">format!</span>(<br>        <span class="hljs-string">&quot;My name is &#123;&#125; and I attend &#123;&#125;. My favorite language is &#123;&#125;. My Git username is &#123;&#125;&quot;</span>,<br>        student.<span class="hljs-title function_ invoke__">name</span>(),<br>        student.<span class="hljs-title function_ invoke__">university</span>(),<br>        student.<span class="hljs-title function_ invoke__">fav_language</span>(),<br>        student.<span class="hljs-title function_ invoke__">git_username</span>()<br>    )<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">CSStudent</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    university: <span class="hljs-type">String</span>,<br>    fav_language: <span class="hljs-type">String</span>,<br>    git_username: <span class="hljs-type">String</span><br>&#125;<br><br><span class="hljs-comment">// ä¸º CSStudent å®ç°æ‰€éœ€çš„ç‰¹å¾</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">CSStudent</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">self</span>.name.<span class="hljs-title function_ invoke__">clone</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">CSStudent</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">university</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">self</span>.university.<span class="hljs-title function_ invoke__">clone</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Programmer</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">CSStudent</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fav_language</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">self</span>.fav_language.<span class="hljs-title function_ invoke__">clone</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">CompSciStudent</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">CSStudent</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">git_username</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">self</span>.git_username.<span class="hljs-title function_ invoke__">clone</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">student</span> = CSStudent &#123;<br>        name: <span class="hljs-string">&quot;Sunfei&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        university: <span class="hljs-string">&quot;XXX&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        fav_language: <span class="hljs-string">&quot;Rust&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        git_username: <span class="hljs-string">&quot;sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;;<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-title function_ invoke__">comp_sci_student_greeting</span>(&amp;student));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å­¤å„¿åŸåˆ™"><a href="#å­¤å„¿åŸåˆ™" class="headerlink" title="å­¤å„¿åŸåˆ™"></a>å­¤å„¿åŸåˆ™</h2><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fmt;<br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª newtype `Pretty`</span><br><br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">Pretty</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> fmt::Formatter) <span class="hljs-punctuation">-&gt;</span> fmt::<span class="hljs-type">Result</span> &#123;<br>        <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">&quot;\&quot;&#123;&#125;\&quot;&quot;</span>, <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>.<span class="hljs-title function_ invoke__">clone</span>() + <span class="hljs-string">&quot;, world&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">w</span> = <span class="hljs-title function_ invoke__">Pretty</span>(<span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;w = &#123;&#125;&quot;</span>, w);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fmt;<br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª newtype `Pretty`</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Pretty</span>(<span class="hljs-type">String</span>);<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">Pretty</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> fmt::Formatter) <span class="hljs-punctuation">-&gt;</span> fmt::<span class="hljs-type">Result</span> &#123;<br>        <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">&quot;\&quot;&#123;&#125;\&quot;&quot;</span>, <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>.<span class="hljs-title function_ invoke__">clone</span>() + <span class="hljs-string">&quot;, world&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">w</span> = <span class="hljs-title function_ invoke__">Pretty</span>(<span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;w = &#123;&#125;&quot;</span>, w);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å…³è”ç±»å‹&quot;&gt;&lt;a href=&quot;#å…³è”ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;å…³è”ç±»å‹&quot;&gt;&lt;/a&gt;å…³è”ç±»å‹&lt;/h2&gt;&lt;p&gt;å…³è”ç±»å‹ä¸»è¦ç”¨äºæå‡ä»£ç çš„å¯è¯»æ€§ï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç :&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;t</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>10.4.ç‰¹å¾å¯¹è±¡</title>
    <link href="https://lilinzta.github.io/2023/09/02/10-4-%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1/"/>
    <id>https://lilinzta.github.io/2023/09/02/10-4-%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1/</id>
    <published>2023-09-02T09:17:10.000Z</published>
    <updated>2024-01-17T15:05:42.358Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç‰¹å¾ç»ƒä¹ ä¸­ æˆ‘ä»¬å·²ç»çŸ¥é“å½“å‡½æ•°è¿”å›å¤šä¸ªç±»å‹æ—¶ï¼Œimpl Trait æ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚</p><p>å¯¹äºæ•°ç»„è€Œè¨€ï¼Œå…¶ä¸­ä¸€ä¸ªé™åˆ¶å°±æ˜¯æ— æ³•å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œä½†æ˜¯é€šè¿‡ä¹‹å‰çš„å­¦ä¹ ï¼Œå¤§å®¶åº”è¯¥çŸ¥é“æšä¸¾å¯ä»¥åœ¨éƒ¨åˆ†åœºæ™¯è§£å†³è¿™ç§é—®é¢˜ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å±€é™æ€§è¾ƒå¤§ã€‚æ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬çš„ä¸»è§’ç™»åœºäº†ã€‚</p><span id="more"></span><h2 id="ä½¿ç”¨-dyn-è¿”å›ç‰¹å¾"><a href="#ä½¿ç”¨-dyn-è¿”å›ç‰¹å¾" class="headerlink" title="ä½¿ç”¨ dyn è¿”å›ç‰¹å¾"></a>ä½¿ç”¨ dyn è¿”å›ç‰¹å¾</h2><p>Rust ç¼–è¯‘å™¨éœ€è¦çŸ¥é“ä¸€ä¸ªå‡½æ•°çš„è¿”å›ç±»å‹å ç”¨å¤šå°‘å†…å­˜ç©ºé—´ã€‚ç”±äºç‰¹å¾çš„ä¸åŒå®ç°ç±»å‹å¯èƒ½ä¼šå ç”¨ä¸åŒçš„å†…å­˜ï¼Œå› æ­¤é€šè¿‡ impl Trait è¿”å›å¤šä¸ªç±»å‹æ˜¯ä¸è¢«å…è®¸çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è¿”å›ä¸€ä¸ª dyn ç‰¹å¾å¯¹è±¡æ¥è§£å†³é—®é¢˜ã€‚</p><h3 id="1-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Bird</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Duck</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">swim</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck is swimming&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Swan</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck.. oh sorry, the swan is flying&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>&#123;<br>        <span class="hljs-string">&quot;duck duck&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>&#123;<br>        <span class="hljs-string">&quot;swan swan&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">duck</span> = __;<br>    duck.<span class="hljs-title function_ invoke__">swim</span>();<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bird</span> = <span class="hljs-title function_ invoke__">hatch_a_bird</span>(<span class="hljs-number">2</span>);<br>    <span class="hljs-comment">// å˜æˆé¸Ÿå„¿åï¼Œå®ƒå¿˜è®°äº†å¦‚ä½•æ¸¸ï¼Œå› æ­¤ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™</span><br>    <span class="hljs-comment">// bird.swim();</span><br>    <span class="hljs-comment">// ä½†å®ƒä¾ç„¶å¯ä»¥å«å”¤</span><br>    <span class="hljs-built_in">assert_eq!</span>(bird.<span class="hljs-title function_ invoke__">quack</span>(), <span class="hljs-string">&quot;duck duck&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bird</span> = <span class="hljs-title function_ invoke__">hatch_a_bird</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// è¿™åªé¸Ÿå„¿å¿˜äº†å¦‚ä½•é£ç¿”ï¼Œå› æ­¤ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™</span><br>    <span class="hljs-comment">// bird.fly();</span><br>    <span class="hljs-comment">// ä½†å®ƒä¹Ÿå¯ä»¥å«å”¤</span><br>    <span class="hljs-built_in">assert_eq!</span>(bird.<span class="hljs-title function_ invoke__">quack</span>(), <span class="hljs-string">&quot;swan swan&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// å®ç°ä»¥ä¸‹å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">hatch_a_bird</span>...<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Bird</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Duck</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">swim</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck is swimming&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Swan</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck.. oh sorry, the swan is flying&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>&#123;<br>        <span class="hljs-string">&quot;duck duck&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>&#123;<br>        <span class="hljs-string">&quot;swan swan&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">duck</span> = Duck;<br>    duck.<span class="hljs-title function_ invoke__">swim</span>();<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bird</span> = <span class="hljs-title function_ invoke__">hatch_a_bird</span>(<span class="hljs-number">2</span>);<br>    <span class="hljs-comment">// å˜æˆé¸Ÿå„¿åï¼Œå®ƒå¿˜è®°äº†å¦‚ä½•æ¸¸ï¼Œå› æ­¤ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™</span><br>    <span class="hljs-comment">// bird.swim();</span><br>    <span class="hljs-comment">// ä½†å®ƒä¾ç„¶å¯ä»¥å«å”¤</span><br>    <span class="hljs-built_in">assert_eq!</span>(bird.<span class="hljs-title function_ invoke__">quack</span>(), <span class="hljs-string">&quot;duck duck&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bird</span> = <span class="hljs-title function_ invoke__">hatch_a_bird</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// è¿™åªé¸Ÿå„¿å¿˜äº†å¦‚ä½•é£ç¿”ï¼Œå› æ­¤ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™</span><br>    <span class="hljs-comment">// bird.fly();</span><br>    <span class="hljs-comment">// ä½†å®ƒä¹Ÿå¯ä»¥å«å”¤</span><br>    <span class="hljs-built_in">assert_eq!</span>(bird.<span class="hljs-title function_ invoke__">quack</span>(), <span class="hljs-string">&quot;swan swan&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// å®ç°ä»¥ä¸‹å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">hatch_a_bird</span>(species: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span><span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Bird&gt; &#123;<br>    <span class="hljs-keyword">if</span> species == <span class="hljs-number">1</span> &#123;<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Swan&#123;&#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Duck&#123;&#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åœ¨æ•°ç»„ä¸­ä½¿ç”¨ç‰¹å¾å¯¹è±¡"><a href="#åœ¨æ•°ç»„ä¸­ä½¿ç”¨ç‰¹å¾å¯¹è±¡" class="headerlink" title="åœ¨æ•°ç»„ä¸­ä½¿ç”¨ç‰¹å¾å¯¹è±¡"></a>åœ¨æ•°ç»„ä¸­ä½¿ç”¨ç‰¹å¾å¯¹è±¡</h2><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Bird</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>);<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Duck</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck is flying&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Swan</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck.. oh sorry, the swan is flying&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;duck duck&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;swan swan&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">birds</span> __;<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">bird</span> <span class="hljs-keyword">in</span> birds &#123;<br>        bird.<span class="hljs-title function_ invoke__">quack</span>();<br>        <span class="hljs-comment">// å½“ duck å’Œ swan å˜æˆ bird åï¼Œå®ƒä»¬éƒ½å¿˜äº†å¦‚ä½•ç¿±ç¿”äºå¤©é™…ï¼Œåªè®°å¾—è¯¥æ€ä¹ˆå«å”¤äº†ã€‚ã€‚</span><br>        <span class="hljs-comment">// å› æ­¤ï¼Œä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™</span><br>        <span class="hljs-comment">// bird.fly();</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Bird</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>);<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Duck</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck is flying&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Swan</span>;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fly</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Look, the duck.. oh sorry, the swan is flying&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Duck</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;duck duck&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Swan</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">quack</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;swan swan&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">birds</span>: [<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Bird&gt;; <span class="hljs-number">2</span>] = [<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Duck &#123;&#125;), <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Swan &#123;&#125;)];<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">bird</span> <span class="hljs-keyword">in</span> birds &#123;<br>        bird.<span class="hljs-title function_ invoke__">quack</span>();<br>        <span class="hljs-comment">// å½“ duck å’Œ swan å˜æˆ bird åï¼Œå®ƒä»¬éƒ½å¿˜äº†å¦‚ä½•ç¿±ç¿”äºå¤©é™…ï¼Œåªè®°å¾—è¯¥æ€ä¹ˆå«å”¤äº†ã€‚ã€‚</span><br>        <span class="hljs-comment">// å› æ­¤ï¼Œä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™</span><br>        <span class="hljs-comment">// bird.fly();</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="dyn-and-Box"><a href="#dyn-and-Box" class="headerlink" title="&amp;dyn and Box"></a>&amp;dyn and Box<dyn></h2><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Draw</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Draw</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">u8</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;u8: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Draw</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">f64</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;f64: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">1.1f64</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-number">8u8</span>;<br><br>    <span class="hljs-comment">// draw x</span><br>    <span class="hljs-title function_ invoke__">draw_with_box</span>(__);<br><br>    <span class="hljs-comment">// draw y</span><br>    <span class="hljs-title function_ invoke__">draw_with_ref</span>(&amp;y);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw_with_box</span>(x: <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Draw&gt;) &#123;<br>    x.<span class="hljs-title function_ invoke__">draw</span>();<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw_with_ref</span>(x: __) &#123;<br>    x.<span class="hljs-title function_ invoke__">draw</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Draw</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Draw</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">u8</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;u8: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Draw</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">f64</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;f64: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">1.1f64</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-number">8u8</span>;<br><br>    <span class="hljs-comment">// draw x</span><br>    <span class="hljs-title function_ invoke__">draw_with_box</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(x));<br><br>    <span class="hljs-comment">// draw y</span><br>    <span class="hljs-title function_ invoke__">draw_with_ref</span>(&amp;y);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw_with_box</span>(x: <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Draw&gt;) &#123;<br>    x.<span class="hljs-title function_ invoke__">draw</span>();<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw_with_ref</span>(x: &amp;<span class="hljs-keyword">dyn</span> Draw) &#123;<br>    x.<span class="hljs-title function_ invoke__">draw</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é™æ€åˆ†å‘å’ŒåŠ¨æ€åˆ†å‘Static-and-Dynamic-dispatch"><a href="#é™æ€åˆ†å‘å’ŒåŠ¨æ€åˆ†å‘Static-and-Dynamic-dispatch" class="headerlink" title="é™æ€åˆ†å‘å’ŒåŠ¨æ€åˆ†å‘Static and Dynamic dispatch"></a>é™æ€åˆ†å‘å’ŒåŠ¨æ€åˆ†å‘Static and Dynamic dispatch</h2><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">method</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Foo</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">u8</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">method</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123; <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;u8: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>) &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Foo</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">method</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123; <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;string: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>) &#125;<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡æ³›å‹å®ç°ä»¥ä¸‹å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">static_dispatch</span>...<br><br><span class="hljs-comment">// é€šè¿‡ç‰¹å¾å¯¹è±¡å®ç°ä»¥ä¸‹å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">dynamic_dispatch</span>...<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5u8</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-string">&quot;Hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br><br>    <span class="hljs-title function_ invoke__">static_dispatch</span>(x);<br>    <span class="hljs-title function_ invoke__">dynamic_dispatch</span>(&amp;y);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">method</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Foo</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">u8</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">method</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123; <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;u8: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>) &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Foo</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">method</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123; <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;string: &#123;&#125;&quot;</span>, *<span class="hljs-keyword">self</span>) &#125;<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡æ³›å‹å®ç°ä»¥ä¸‹å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">static_dispatch</span>&lt;T: Foo&gt;(x: T) &#123;<br>    x.<span class="hljs-title function_ invoke__">method</span>();<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡ç‰¹å¾å¯¹è±¡å®ç°ä»¥ä¸‹å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">dynamic_dispatch</span>(x: &amp;<span class="hljs-keyword">dyn</span> Foo) &#123;<br>    x.<span class="hljs-title function_ invoke__">method</span>();<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5u8</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-string">&quot;Hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br><br>    <span class="hljs-title function_ invoke__">static_dispatch</span>(x);<br>    <span class="hljs-title function_ invoke__">dynamic_dispatch</span>(&amp;y);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¯¹è±¡å®‰å…¨"><a href="#å¯¹è±¡å®‰å…¨" class="headerlink" title="å¯¹è±¡å®‰å…¨"></a>å¯¹è±¡å®‰å…¨</h2><p>ä¸€ä¸ªç‰¹å¾èƒ½å˜æˆç‰¹å¾å¯¹è±¡ï¼Œé¦–å…ˆè¯¥ç‰¹å¾å¿…é¡»æ˜¯å¯¹è±¡å®‰å…¨çš„ï¼Œå³è¯¥ç‰¹å¾çš„æ‰€æœ‰æ–¹æ³•éƒ½å¿…é¡»æ‹¥æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>è¿”å›ç±»å‹ä¸èƒ½æ˜¯ Self</li><li>ä¸èƒ½ä½¿ç”¨æ³›å‹å‚æ•°</li></ul><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-comment">// ä¸è¦æ·»åŠ /åˆ é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">MyTrait</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">u32</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123; <span class="hljs-number">42</span> &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123; <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">clone</span>() &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">my_function</span>(x: <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> MyTrait&gt;)  &#123;<br>    x.<span class="hljs-title function_ invoke__">f</span>()<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">my_function</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">13_u32</span>));<br>    <span class="hljs-title function_ invoke__">my_function</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;abc&quot;</span>)));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-comment">// ä¸è¦æ·»åŠ /åˆ é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">MyTrait</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">u32</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123; <span class="hljs-number">42</span> &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123; <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">clone</span>() &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">my_function</span>(x: <span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> &#123;<br>    x.<span class="hljs-title function_ invoke__">f</span>()<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">my_function</span>(<span class="hljs-number">13_u32</span>);<br>    <span class="hljs-title function_ invoke__">my_function</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;abc&quot;</span>));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-comment">// ä¸è¦æ·»åŠ /åˆ é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">MyTrait</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> MyTrait&gt;;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">u32</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> MyTrait&gt; &#123; <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">42</span>) &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">f</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> MyTrait&gt; &#123; <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">clone</span>()) &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">my_function</span>(x: <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> MyTrait&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> MyTrait&gt; &#123;<br>    x.<span class="hljs-title function_ invoke__">f</span>()<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">my_function</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">13_u32</span>));<br>    <span class="hljs-title function_ invoke__">my_function</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;abc&quot;</span>)));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ç‰¹å¾ç»ƒä¹ ä¸­ æˆ‘ä»¬å·²ç»çŸ¥é“å½“å‡½æ•°è¿”å›å¤šä¸ªç±»å‹æ—¶ï¼Œimpl Trait æ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ•°ç»„è€Œè¨€ï¼Œå…¶ä¸­ä¸€ä¸ªé™åˆ¶å°±æ˜¯æ— æ³•å­˜å‚¨ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œä½†æ˜¯é€šè¿‡ä¹‹å‰çš„å­¦ä¹ ï¼Œå¤§å®¶åº”è¯¥çŸ¥é“æšä¸¾å¯ä»¥åœ¨éƒ¨åˆ†åœºæ™¯è§£å†³è¿™ç§é—®é¢˜ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å±€é™æ€§è¾ƒå¤§ã€‚æ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬çš„ä¸»è§’ç™»åœºäº†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>shell_gpt</title>
    <link href="https://lilinzta.github.io/2023/08/26/shell-gpt/"/>
    <id>https://lilinzta.github.io/2023/08/26/shell-gpt/</id>
    <published>2023-08-26T08:24:01.000Z</published>
    <updated>2024-01-17T15:05:42.365Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç”±-GPT-3-å’Œ-GPT-4-æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚"><a href="#ç”±-GPT-3-å’Œ-GPT-4-æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚" class="headerlink" title="ç”± GPT-3 å’Œ GPT-4 æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚"></a>ç”± GPT-3 å’Œ GPT-4 æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚</h2><span id="more"></span><blockquote><p>Tips: ä¸‹é¢éƒ½æ˜¯åºŸè¯ï¼Œå¯ä»¥ç›´æ¥çœ‹è¿™ä¸¤ä¸ªé“¾æ¥ï¼š<a href="https://github.com/chatanywhere/GPT_API_free">GPT_API_free</a>å’Œ<a href="https://github.com/TheR1D/shell_gpt">shell_gpt</a></p></blockquote><h2 id="è·å–ä¸€ä¸ªå…è´¹çš„GPT-API"><a href="#è·å–ä¸€ä¸ªå…è´¹çš„GPT-API" class="headerlink" title="è·å–ä¸€ä¸ªå…è´¹çš„GPT_API"></a>è·å–ä¸€ä¸ªå…è´¹çš„GPT_API</h2><p>ç‚¹å‡»ç¬¬ä¸€ä¸ªé“¾æ¥ï¼Œè·å–å…è´¹çš„GPT_APIï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»˜è´¹è·å¾—æ›´å¥½çš„ä½“éªŒã€‚</p><p>ä¸å®˜æ–¹çš„APIä½¿ç”¨æ­¥éª¤åŸºæœ¬ç›¸åŒï¼Œéœ€è¦é¢å¤–è®¾ç½®ä»£ç†ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥è¯¦ç»†é˜…è¯»æ–‡æ¡£ã€‚</p><h2 id="shell-gptä½¿ç”¨GPT-API-free"><a href="#shell-gptä½¿ç”¨GPT-API-free" class="headerlink" title="shell_gptä½¿ç”¨GPT_API_free"></a>shell_gptä½¿ç”¨GPT_API_free</h2><p>ç¬¬äºŒä¸ªé“¾æ¥ï¼Œä½¿ç”¨æ–¹æ³•è¯´çš„å¾ˆè¯¦ç»†ã€‚é…ç½®æ–‡ä»¶åœ¨<code>~/.config/shell_gpt/.sgptrc</code>,éœ€è¦é…ç½®(ä¿®æ”¹)ä»¥ä¸‹ä¸¤ä¸ªå˜é‡:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">OPENAI_API_KEY</span>=é¢†å–çš„å…è´¹API(ä¸€èˆ¬ä¸ºsk-å¼€å¤´)<br><span class="hljs-attr">OPENAI_API_HOST</span>=https://api.chatanywhere.cn æˆ–è€… https://api.chatanywhere.com.cn<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç”±-GPT-3-å’Œ-GPT-4-æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚&quot;&gt;&lt;a href=&quot;#ç”±-GPT-3-å’Œ-GPT-4-æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚&quot; class=&quot;headerlink&quot; title=&quot;ç”± GPT-3 å’Œ GPT-4 æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚&quot;&gt;&lt;/a&gt;ç”± GPT-3 å’Œ GPT-4 æä¾›æ”¯æŒçš„å‘½ä»¤è¡Œç”Ÿäº§åŠ›å·¥å…·å°†å¸®åŠ©æ‚¨æ›´å¿«ã€æ›´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚&lt;/h2&gt;</summary>
    
    
    
    
    <category term="Share" scheme="https://lilinzta.github.io/tags/Share/"/>
    
  </entry>
  
  <entry>
    <title>10.3.ç‰¹å¾ Trait</title>
    <link href="https://lilinzta.github.io/2023/08/20/10-3-%E7%89%B9%E5%BE%81-Traits/"/>
    <id>https://lilinzta.github.io/2023/08/20/10-3-%E7%89%B9%E5%BE%81-Traits/</id>
    <published>2023-08-20T12:49:30.000Z</published>
    <updated>2024-01-20T11:36:23.539Z</updated>
    
    <content type="html"><![CDATA[<p>ç‰¹å¾ Trait å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ä¸€ä¸ªç‰¹å®šçš„ç±»å‹æ‰€å…·æœ‰çš„ã€ä¸”èƒ½è·Ÿå…¶å®ƒç±»å‹å…±äº«çš„ç‰¹æ€§ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹å¾é€šè¿‡æŠ½è±¡çš„æ–¹å¼æ¥å®šä¹‰è¿™ç§å…±äº«è¡Œä¸ºï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç‰¹å¾çº¦æŸæ¥é™å®šä¸€ä¸ªæ³›å‹ç±»å‹å¿…é¡»è¦å…·æœ‰æŸä¸ªç‰¹å®šçš„è¡Œä¸ºã€‚</p><span id="more"></span><blockquote><p>Note: ç‰¹å¾è·Ÿå…¶å®ƒè¯­è¨€çš„æ¥å£è¾ƒä¸ºç±»ä¼¼ï¼Œä½†æ˜¯ä»ç„¶æœ‰ä¸€äº›åŒºåˆ«</p></blockquote><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Sheep</span> &#123; naked: <span class="hljs-type">bool</span>, name: <span class="hljs-type">String</span> &#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Sheep</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_naked</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-keyword">self</span>.naked<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">shear</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_naked</span>() &#123;<br>            <span class="hljs-comment">// `Sheep` ç»“æ„ä½“ä¸Šå®šä¹‰çš„æ–¹æ³•å¯ä»¥è°ƒç”¨ `Sheep` æ‰€å®ç°çš„ç‰¹å¾çš„æ–¹æ³•</span><br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is already naked...&quot;</span>, <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">name</span>());<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; gets a haircut!&quot;</span>, <span class="hljs-keyword">self</span>.name);<br><br>            <span class="hljs-keyword">self</span>.naked = <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-comment">// å…³è”å‡½æ•°ç­¾åï¼›`Self` æŒ‡ä»£å®ç°è€…çš„ç±»å‹</span><br>    <span class="hljs-comment">// ä¾‹å¦‚æˆ‘ä»¬åœ¨ä¸º Pig ç±»å‹å®ç°ç‰¹å¾æ—¶ï¼Œé‚£ `new` å‡½æ•°å°±ä¼šè¿”å›ä¸€ä¸ª `Pig` ç±»å‹çš„å®ä¾‹ï¼Œè¿™é‡Œçš„ `Self` æŒ‡ä»£çš„å°±æ˜¯ `Pig` ç±»å‹</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(name: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>;<br><br>    <span class="hljs-comment">// æ–¹æ³•ç­¾å</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br><br>    <span class="hljs-comment">// æ–¹æ³•è¿˜èƒ½æä¾›é»˜è®¤çš„å®šä¹‰å®ç°</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">talk</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; says &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">name</span>(), <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">noise</span>());<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Sheep</span> &#123;<br>    <span class="hljs-comment">// `Self` è¢«æ›¿æ¢æˆå…·ä½“çš„å®ç°è€…ç±»å‹ï¼š `Sheep`</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(name: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> Sheep &#123;<br>        Sheep &#123; name: name, naked: <span class="hljs-literal">false</span> &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">self</span>.name.<span class="hljs-title function_ invoke__">clone</span>()<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_naked</span>() &#123;<br>            <span class="hljs-string">&quot;baaaaah?&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-string">&quot;baaaaah!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// é»˜è®¤çš„ç‰¹å¾æ–¹æ³•å¯ä»¥è¢«é‡å†™</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">talk</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; pauses briefly... &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">noise</span>());<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// è¿™é‡Œçš„ç±»å‹æ³¨é‡Šæ—¶å¿…é¡»çš„</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">dolly</span>: Sheep = Animal::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Dolly&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>());<br>    <span class="hljs-comment">// TODO ^ å°è¯•å»é™¤ç±»å‹æ³¨é‡Šï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ</span><br><br>    dolly.<span class="hljs-title function_ invoke__">talk</span>();<br>    dolly.<span class="hljs-title function_ invoke__">shear</span>();<br>    dolly.<span class="hljs-title function_ invoke__">talk</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h3><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®Œæˆä¸¤ä¸ª `impl` è¯­å¥å—</span><br><span class="hljs-comment">// ä¸è¦ä¿®æ”¹ `main` ä¸­çš„ä»£ç </span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Hello</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">say_hi</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hi&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">say_something</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Student</span> &#123;&#125;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Student</span> &#123;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Teacher</span> &#123;&#125;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Teacher</span> &#123;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = Student &#123;&#125;;<br>    <span class="hljs-built_in">assert_eq!</span>(s.<span class="hljs-title function_ invoke__">say_hi</span>(), <span class="hljs-string">&quot;hi&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(s.<span class="hljs-title function_ invoke__">say_something</span>(), <span class="hljs-string">&quot;I&#x27;m a good student&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = Teacher &#123;&#125;;<br>    <span class="hljs-built_in">assert_eq!</span>(t.<span class="hljs-title function_ invoke__">say_hi</span>(), <span class="hljs-string">&quot;Hi, I&#x27;m your new teacher&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(t.<span class="hljs-title function_ invoke__">say_something</span>(), <span class="hljs-string">&quot;I&#x27;m not a bad teacher&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®Œæˆä¸¤ä¸ª `impl` è¯­å¥å—</span><br><span class="hljs-comment">// ä¸è¦ä¿®æ”¹ `main` ä¸­çš„ä»£ç </span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Hello</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">say_hi</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hi&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">say_something</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Student</span> &#123;&#125;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">say_something</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;I&#x27;m a good student&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Teacher</span> &#123;&#125;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Teacher</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">say_hi</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Hi, I&#x27;m your new teacher&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">say_something</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;I&#x27;m not a bad teacher&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = Student &#123;&#125;;<br>    <span class="hljs-built_in">assert_eq!</span>(s.<span class="hljs-title function_ invoke__">say_hi</span>(), <span class="hljs-string">&quot;hi&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(s.<span class="hljs-title function_ invoke__">say_something</span>(), <span class="hljs-string">&quot;I&#x27;m a good student&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = Teacher &#123;&#125;;<br>    <span class="hljs-built_in">assert_eq!</span>(t.<span class="hljs-title function_ invoke__">say_hi</span>(), <span class="hljs-string">&quot;Hi, I&#x27;m your new teacher&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(t.<span class="hljs-title function_ invoke__">say_something</span>(), <span class="hljs-string">&quot;I&#x27;m not a bad teacher&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Derive-æ´¾ç”Ÿ"><a href="#Derive-æ´¾ç”Ÿ" class="headerlink" title="Derive æ´¾ç”Ÿ"></a>Derive æ´¾ç”Ÿ</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ #[derive] å±æ€§æ¥æ´¾ç”Ÿä¸€äº›ç‰¹å¾ï¼Œå¯¹äºè¿™äº›ç‰¹å¾ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œé»˜è®¤å®ç°ï¼Œå¯¹äºæ—¥å¸¸ä»£ç å¼€å‘è€Œè¨€ï¼Œè¿™æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä¾‹å¦‚å¤§å®¶ç»å¸¸ç”¨åˆ°çš„ Debug ç‰¹å¾ï¼Œå°±æ˜¯ç›´æ¥é€šè¿‡æ´¾ç”Ÿæ¥è·å–é»˜è®¤å®ç°ï¼Œè€Œæ— éœ€æˆ‘ä»¬æ‰‹åŠ¨å»å®Œæˆè¿™ä¸ªå·¥ä½œã€‚</p><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// `Centimeters`, ä¸€ä¸ªå…ƒç»„ç»“æ„ä½“ï¼Œå¯ä»¥è¢«æ¯”è¾ƒå¤§å°</span><br><span class="hljs-meta">#[derive(PartialEq, PartialOrd)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Centimeters</span>(<span class="hljs-type">f64</span>);<br><br><span class="hljs-comment">// `Inches`, ä¸€ä¸ªå…ƒç»„ç»“æ„ä½“å¯ä»¥è¢«æ‰“å°</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Inches</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Inches</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">to_centimeters</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> Centimeters &#123;<br>        <span class="hljs-keyword">let</span> &amp;<span class="hljs-title function_ invoke__">Inches</span>(inches) = <span class="hljs-keyword">self</span>;<br><br>        <span class="hljs-title function_ invoke__">Centimeters</span>(inches <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> * <span class="hljs-number">2.54</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æ·»åŠ ä¸€äº›å±æ€§è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-comment">// ä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç ï¼</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Seconds</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_one_second</span> = <span class="hljs-title function_ invoke__">Seconds</span>(<span class="hljs-number">1</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One second looks like: &#123;:?&#125;&quot;</span>, _one_second);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_this_is_true</span> = _one_second == _one_second;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_this_is_true</span> = _one_second &gt; _one_second;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">foot</span> = <span class="hljs-title function_ invoke__">Inches</span>(<span class="hljs-number">12</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One foot equals &#123;:?&#125;&quot;</span>, foot);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">meter</span> = <span class="hljs-title function_ invoke__">Centimeters</span>(<span class="hljs-number">100.0</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">cmp</span> =<br>        <span class="hljs-keyword">if</span> foot.<span class="hljs-title function_ invoke__">to_centimeters</span>() &lt; meter &#123;<br>            <span class="hljs-string">&quot;smaller&quot;</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-string">&quot;bigger&quot;</span><br>        &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One foot is &#123;&#125; than one meter.&quot;</span>, cmp);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// `Centimeters`, ä¸€ä¸ªå…ƒç»„ç»“æ„ä½“ï¼Œå¯ä»¥è¢«æ¯”è¾ƒå¤§å°</span><br><span class="hljs-meta">#[derive(PartialEq, PartialOrd)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Centimeters</span>(<span class="hljs-type">f64</span>);<br><br><span class="hljs-comment">// `Inches`, ä¸€ä¸ªå…ƒç»„ç»“æ„ä½“å¯ä»¥è¢«æ‰“å°</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Inches</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Inches</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">to_centimeters</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> Centimeters &#123;<br>        <span class="hljs-keyword">let</span> &amp;<span class="hljs-title function_ invoke__">Inches</span>(inches) = <span class="hljs-keyword">self</span>;<br><br>        <span class="hljs-title function_ invoke__">Centimeters</span>(inches <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> * <span class="hljs-number">2.54</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æ·»åŠ ä¸€äº›å±æ€§è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-comment">// ä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç ï¼</span><br><span class="hljs-meta">#[derive(PartialEq, PartialOrd, Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Seconds</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_one_second</span> = <span class="hljs-title function_ invoke__">Seconds</span>(<span class="hljs-number">1</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One second looks like: &#123;:?&#125;&quot;</span>, _one_second);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_this_is_true</span> = _one_second == _one_second;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_this_is_true</span> = _one_second &gt; _one_second;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">foot</span> = <span class="hljs-title function_ invoke__">Inches</span>(<span class="hljs-number">12</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One foot equals &#123;:?&#125;&quot;</span>, foot);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">meter</span> = <span class="hljs-title function_ invoke__">Centimeters</span>(<span class="hljs-number">100.0</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">cmp</span> =<br>        <span class="hljs-keyword">if</span> foot.<span class="hljs-title function_ invoke__">to_centimeters</span>() &lt; meter &#123;<br>            <span class="hljs-string">&quot;smaller&quot;</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-string">&quot;bigger&quot;</span><br>        &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One foot is &#123;&#125; than one meter.&quot;</span>, cmp);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p>åœ¨ Rust ä¸­ï¼Œè®¸å¤šè¿ç®—ç¬¦éƒ½å¯ä»¥è¢«é‡è½½ï¼Œäº‹å®ä¸Šï¼Œè¿ç®—ç¬¦ä»…ä»…æ˜¯ç‰¹å¾æ–¹æ³•è°ƒç”¨çš„è¯­æ³•ç³–ã€‚ä¾‹å¦‚ a + b ä¸­çš„ + æ˜¯ std::ops::Add ç‰¹å¾çš„ add æ–¹æ³•è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°è¯¥ç‰¹å¾æ¥æ”¯æŒè¯¥ç±»å‹çš„åŠ æ³•è¿ç®—ã€‚</p><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::ops;<br><br><span class="hljs-comment">// å®ç° fn multiply æ–¹æ³•</span><br><span class="hljs-comment">// å¦‚ä¸Šæ‰€è¿°ï¼Œ`+` éœ€è¦ `T` ç±»å‹å®ç° `std::ops::Add` ç‰¹å¾</span><br><span class="hljs-comment">// é‚£ä¹ˆ, `*` è¿ç®—ç¬¦éœ€è¦å®ç°ä»€ä¹ˆç‰¹å¾å‘¢? ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ç­”æ¡ˆ: https://doc.rust-lang.org/core/ops/</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">6</span>, <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">2u8</span>, <span class="hljs-number">3u8</span>));<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5.0</span>, <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">5.0</span>));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::ops;<br><br><span class="hljs-comment">// å®ç° fn multiply æ–¹æ³•</span><br><span class="hljs-comment">// å¦‚ä¸Šæ‰€è¿°ï¼Œ`+` éœ€è¦ `T` ç±»å‹å®ç° `std::ops::Add` ç‰¹å¾</span><br><span class="hljs-comment">// é‚£ä¹ˆ, `*` è¿ç®—ç¬¦éœ€è¦å®ç°ä»€ä¹ˆç‰¹å¾å‘¢? ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ç­”æ¡ˆ: https://doc.rust-lang.org/core/ops/</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">multiply</span>&lt;T: ops::Mul&lt;Output = T&gt;&gt;(x: T, y: T) <span class="hljs-punctuation">-&gt;</span> T &#123;<br>    x * y<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">6</span>, <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">2u8</span>, <span class="hljs-number">3u8</span>));<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5.0</span>, <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">5.0</span>));<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦ä¿®æ”¹ `main` ä¸­çš„ä»£ç !</span><br><span class="hljs-keyword">use</span> std::ops;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Foo</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bar</span>;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">FooBar</span>;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BarFoo</span>;<br><br><span class="hljs-comment">// ä¸‹é¢çš„ä»£ç å®ç°äº†è‡ªå®šä¹‰ç±»å‹çš„ç›¸åŠ ï¼š Foo + Bar = FooBar</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">ops</span>::Add&lt;Bar&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = FooBar;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">self</span>, _rhs: Bar) <span class="hljs-punctuation">-&gt;</span> FooBar &#123;<br>        FooBar<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">ops</span>::Sub&lt;Foo&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Bar</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = BarFoo;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sub</span>(<span class="hljs-keyword">self</span>, _rhs: Foo) <span class="hljs-punctuation">-&gt;</span> BarFoo &#123;<br>        BarFoo<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹ä¸‹é¢ä»£ç </span><br>    <span class="hljs-comment">// ä½ éœ€è¦ä¸º FooBar æ´¾ç”Ÿä¸€äº›ç‰¹å¾æ¥è®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-built_in">assert_eq!</span>(Foo + Bar, FooBar);<br>    <span class="hljs-built_in">assert_eq!</span>(Foo - Bar, BarFoo);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦ä¿®æ”¹ `main` ä¸­çš„ä»£ç !</span><br><span class="hljs-keyword">use</span> std::ops;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Foo</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bar</span>;<br><br><span class="hljs-meta">#[derive(PartialEq, Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">FooBar</span>;<br><br><span class="hljs-meta">#[derive(PartialEq, Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BarFoo</span>;<br><br><span class="hljs-comment">// ä¸‹é¢çš„ä»£ç å®ç°äº†è‡ªå®šä¹‰ç±»å‹çš„ç›¸åŠ ï¼š Foo + Bar = FooBar</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">ops</span>::Add&lt;Bar&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = FooBar;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">self</span>, _rhs: Bar) <span class="hljs-punctuation">-&gt;</span> FooBar &#123;<br>        FooBar<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">ops</span>::Sub&lt;Bar&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = BarFoo;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sub</span>(<span class="hljs-keyword">self</span>, _rhs: Bar) <span class="hljs-punctuation">-&gt;</span> BarFoo &#123;<br>        BarFoo<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹ä¸‹é¢ä»£ç </span><br>    <span class="hljs-comment">// ä½ éœ€è¦ä¸º FooBar æ´¾ç”Ÿä¸€äº›ç‰¹å¾æ¥è®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-built_in">assert_eq!</span>(Foo + Bar, FooBar);<br>    <span class="hljs-built_in">assert_eq!</span>(Foo - Bar, BarFoo);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°"><a href="#ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°" class="headerlink" title="ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°"></a>ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°</h2><p>é™¤äº†ä½¿ç”¨å…·ä½“ç±»å‹æ¥ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œæˆ‘ä»¬è¿˜èƒ½é€šè¿‡ impl Trait çš„æ–¹å¼æ¥æŒ‡å®šå®ç°äº†è¯¥ç‰¹å¾çš„å‚æ•°ï¼šè¯¥å‚æ•°èƒ½æ¥å—çš„ç±»å‹å¿…é¡»è¦å®ç°æŒ‡å®šçš„ç‰¹å¾ã€‚</p><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®ç° `fn summary` </span><br><span class="hljs-comment">// ä¿®å¤é”™è¯¯ä¸”ä¸è¦ç§»é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Summary</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">summarize</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Post</span> &#123;<br>    title: <span class="hljs-type">String</span>,<br>    author: <span class="hljs-type">String</span>,<br>    content: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Summary</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Post</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">summarize</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;The author of post &#123;&#125; is &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.title, <span class="hljs-keyword">self</span>.author)<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Weibo</span> &#123;<br>    username: <span class="hljs-type">String</span>,<br>    content: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Summary</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Weibo</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">summarize</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125; published a weibo &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.username, <span class="hljs-keyword">self</span>.content)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">post</span> = Post &#123;<br>        title: <span class="hljs-string">&quot;Popular Rust&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        author: <span class="hljs-string">&quot;Sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        content: <span class="hljs-string">&quot;Rust is awesome!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>    &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">weibo</span> = Weibo &#123;<br>        username: <span class="hljs-string">&quot;sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        content: <span class="hljs-string">&quot;Weibo seems to be worse than Tweet&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>    &#125;;<br><br>    <span class="hljs-title function_ invoke__">summary</span>(post);<br>    <span class="hljs-title function_ invoke__">summary</span>(weibo);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, post);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, weibo);<br>&#125;<br><br><span class="hljs-comment">// åœ¨ä¸‹é¢å®ç° `fn summary` å‡½æ•°</span><br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®ç° `fn summary` </span><br><span class="hljs-comment">// ä¿®å¤é”™è¯¯ä¸”ä¸è¦ç§»é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Summary</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">summarize</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Post</span> &#123;<br>    title: <span class="hljs-type">String</span>,<br>    author: <span class="hljs-type">String</span>,<br>    content: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Summary</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Post</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">summarize</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;The author of post &#123;&#125; is &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.title, <span class="hljs-keyword">self</span>.author)<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Weibo</span> &#123;<br>    username: <span class="hljs-type">String</span>,<br>    content: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Summary</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Weibo</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">summarize</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125; published a weibo &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.username, <span class="hljs-keyword">self</span>.content)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">post</span> = Post &#123;<br>        title: <span class="hljs-string">&quot;Popular Rust&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        author: <span class="hljs-string">&quot;Sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        content: <span class="hljs-string">&quot;Rust is awesome!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>    &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">weibo</span> = Weibo &#123;<br>        username: <span class="hljs-string">&quot;sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>        content: <span class="hljs-string">&quot;Weibo seems to be worse than Tweet&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>    &#125;;<br><br>    <span class="hljs-title function_ invoke__">summary</span>(&amp;post);<br>    <span class="hljs-title function_ invoke__">summary</span>(&amp;weibo);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, post);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, weibo);<br>&#125;<br><br><span class="hljs-comment">// åœ¨ä¸‹é¢å®ç° `fn summary` å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">summary</span>(t: &amp;<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Summary</span>) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_</span> = t.<span class="hljs-title function_ invoke__">summarize</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°è¿”å›å€¼"><a href="#ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°è¿”å›å€¼" class="headerlink" title="ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°è¿”å›å€¼"></a>ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°è¿”å›å€¼</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨å‡½æ•°çš„è¿”å›å€¼ä¸­ä½¿ç”¨ impl Trait è¯­æ³•ã€‚ç„¶ååªæœ‰åœ¨è¿”å›å€¼æ˜¯åŒä¸€ä¸ªç±»å‹æ—¶ï¼Œæ‰èƒ½è¿™ä¹ˆä½¿ç”¨ï¼Œå¦‚æœè¿”å›å€¼æ˜¯ä¸åŒçš„ç±»å‹ï¼Œä½ å¯èƒ½æ›´éœ€è¦ç‰¹å¾å¯¹è±¡ã€‚</p><h3 id="6-ğŸŒŸğŸŒŸ"><a href="#6-ğŸŒŸğŸŒŸ" class="headerlink" title="6.ğŸŒŸğŸŒŸ"></a>6.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Sheep</span> &#123;&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cow</span> &#123;&#125;<br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Sheep</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-string">&quot;baaaaah!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Cow</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-string">&quot;moooooo!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è¿”å›ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å®ç°äº† Animal ç‰¹å¾ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½åœ¨ç¼–è¯‘æœŸè·çŸ¥å…·ä½“è¿”å›äº†å“ªä¸ªç±»å‹</span><br><span class="hljs-comment">// ä¿®å¤è¿™é‡Œçš„é”™è¯¯ï¼Œä½ å¯ä»¥ä½¿ç”¨è™šå‡çš„éšæœºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹å¾å¯¹è±¡</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">random_animal</span>(random_number: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">if</span> random_number &lt; <span class="hljs-number">0.5</span> &#123;<br>        Sheep &#123;&#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        Cow &#123;&#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">random_number</span> = <span class="hljs-number">0.234</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">animal</span> = <span class="hljs-title function_ invoke__">random_animal</span>(random_number);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;You&#x27;ve randomly chosen an animal, and it says &#123;&#125;&quot;</span>, animal.<span class="hljs-title function_ invoke__">noise</span>());<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Sheep</span> &#123;&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cow</span> &#123;&#125;<br><br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Sheep</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-string">&quot;baaaaah!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Cow</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">noise</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-string">&quot;moooooo!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è¿”å›ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å®ç°äº† Animal ç‰¹å¾ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½åœ¨ç¼–è¯‘æœŸè·çŸ¥å…·ä½“è¿”å›äº†å“ªä¸ªç±»å‹</span><br><span class="hljs-comment">// ä¿®å¤è¿™é‡Œçš„é”™è¯¯ï¼Œä½ å¯ä»¥ä½¿ç”¨è™šå‡çš„éšæœºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹å¾å¯¹è±¡</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">random_animal</span>(random_number: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Animal&gt; &#123;<br>    <span class="hljs-keyword">if</span> random_number &lt; <span class="hljs-number">0.5</span> &#123;<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Sheep &#123;&#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Cow &#123;&#125;)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">random_number</span> = <span class="hljs-number">0.234</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">animal</span> = <span class="hljs-title function_ invoke__">random_animal</span>(random_number);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;You&#x27;ve randomly chosen an animal, and it says &#123;&#125;&quot;</span>, animal.<span class="hljs-title function_ invoke__">noise</span>());<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç‰¹å¾çº¦æŸ"><a href="#ç‰¹å¾çº¦æŸ" class="headerlink" title="ç‰¹å¾çº¦æŸ"></a>ç‰¹å¾çº¦æŸ</h2><p>impl Trait è¯­æ³•éå¸¸ç›´è§‚ç®€æ´ï¼Œä½†å®ƒå®é™…ä¸Šæ˜¯ç‰¹å¾çº¦æŸçš„è¯­æ³•ç³–ã€‚<br>å½“ä½¿ç”¨æ³›å‹å‚æ•°æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦ä¸ºè¯¥å‚æ•°æŒ‡å®šç‰¹å®šçš„è¡Œä¸ºï¼Œè¿™ç§æŒ‡å®šæ–¹å¼å°±æ˜¯é€šè¿‡ç‰¹å¾çº¦æŸæ¥å®ç°çš„ã€‚</p><h3 id="7-ğŸŒŸğŸŒŸ"><a href="#7-ğŸŒŸğŸŒŸ" class="headerlink" title="7.ğŸŒŸğŸŒŸ"></a>7.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), <span class="hljs-number">3</span>);<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡ä¸¤ç§æ–¹æ³•ä½¿ç”¨ç‰¹å¾çº¦æŸæ¥å®ç° `fn sum`</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>&lt;T&gt;(x: T, y: T) <span class="hljs-punctuation">-&gt;</span> T &#123;<br>    x + y<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>), <span class="hljs-number">3.0</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>&lt;T: std::ops::Add&lt;Output = T&gt;&gt;(x: T, y: T) <span class="hljs-punctuation">-&gt;</span> T &#123;<br>    x + y<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>), <span class="hljs-number">3.0</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>&lt;T&gt;(x: T, y: T) <span class="hljs-punctuation">-&gt;</span> T<br><span class="hljs-keyword">where</span><br>    T: std::ops::Add&lt;Output = T&gt;,<br>&#123;<br>    x + y<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ"><a href="#8-ğŸŒŸğŸŒŸ" class="headerlink" title="8.ğŸŒŸğŸŒŸ"></a>8.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Pair</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T&gt; Pair&lt;T&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(x: T, y: T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        <span class="hljs-keyword">Self</span> &#123;<br>            x,<br>            y,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T: std::fmt::<span class="hljs-built_in">Debug</span> + <span class="hljs-built_in">PartialOrd</span>&gt; Pair&lt;T&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cmp_display</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.x &gt;= <span class="hljs-keyword">self</span>.y &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The largest member is x = &#123;:?&#125;&quot;</span>, <span class="hljs-keyword">self</span>.x);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The largest member is y = &#123;:?&#125;&quot;</span>, <span class="hljs-keyword">self</span>.y);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Unit</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">pair</span> = Pair&#123;<br>        x: <span class="hljs-title function_ invoke__">Unit</span>(<span class="hljs-number">1</span>),<br>        y: <span class="hljs-title function_ invoke__">Unit</span>(<span class="hljs-number">3</span>)<br>    &#125;;<br><br>    pair.<span class="hljs-title function_ invoke__">cmp_display</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Pair</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T&gt; Pair&lt;T&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(x: T, y: T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        <span class="hljs-keyword">Self</span> &#123;<br>            x,<br>            y,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T: std::fmt::<span class="hljs-built_in">Debug</span> + <span class="hljs-built_in">PartialOrd</span>&gt; Pair&lt;T&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cmp_display</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.x &gt;= <span class="hljs-keyword">self</span>.y &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The largest member is x = &#123;:?&#125;&quot;</span>, <span class="hljs-keyword">self</span>.x);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The largest member is y = &#123;:?&#125;&quot;</span>, <span class="hljs-keyword">self</span>.y);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">#[derive(Debug, PartialEq, PartialOrd)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Unit</span>(<span class="hljs-type">i32</span>);<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">pair</span> = Pair&#123;<br>        x: <span class="hljs-title function_ invoke__">Unit</span>(<span class="hljs-number">1</span>),<br>        y: <span class="hljs-title function_ invoke__">Unit</span>(<span class="hljs-number">3</span>)<br>    &#125;;<br><br>    pair.<span class="hljs-title function_ invoke__">cmp_display</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#9-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="9.ğŸŒŸğŸŒŸğŸŒŸ"></a>9.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">example1</span>() &#123;<br>    <span class="hljs-comment">// `T: Trait` æ˜¯æœ€å¸¸ä½¿ç”¨çš„æ–¹å¼</span><br>    <span class="hljs-comment">// `T: Fn(u32) -&gt; u32` è¯´æ˜ `T` åªèƒ½æ¥æ”¶é—­åŒ…ç±»å‹çš„å‚æ•°</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cacher</span>&lt;T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>&gt; &#123;<br>        calculation: T,<br>        value: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt;,<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span>&lt;T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>&gt; Cacher&lt;T&gt; &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(calculation: T) <span class="hljs-punctuation">-&gt;</span> Cacher&lt;T&gt; &#123;<br>            Cacher &#123;<br>                calculation,<br>                value: <span class="hljs-literal">None</span>,<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, arg: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>            <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.value &#123;<br>                <span class="hljs-title function_ invoke__">Some</span>(v) =&gt; v,<br>                <span class="hljs-literal">None</span> =&gt; &#123;<br>                    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = (<span class="hljs-keyword">self</span>.calculation)(arg);<br>                    <span class="hljs-keyword">self</span>.value = <span class="hljs-title function_ invoke__">Some</span>(v);<br>                    v<br>                &#125;,<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cacher</span> = Cacher::<span class="hljs-title function_ invoke__">new</span>(|x| x+<span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">10</span>), __);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">15</span>), __);<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">example2</span>() &#123;<br>    <span class="hljs-comment">// è¿˜å¯ä»¥ä½¿ç”¨ `where` æ¥çº¦æŸ T</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cacher</span>&lt;T&gt;<br>        <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>,<br>    &#123;<br>        calculation: T,<br>        value: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt;,<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span>&lt;T&gt; Cacher&lt;T&gt;<br>        <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>,<br>    &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(calculation: T) <span class="hljs-punctuation">-&gt;</span> Cacher&lt;T&gt; &#123;<br>            Cacher &#123;<br>                calculation,<br>                value: <span class="hljs-literal">None</span>,<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, arg: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>            <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.value &#123;<br>                <span class="hljs-title function_ invoke__">Some</span>(v) =&gt; v,<br>                <span class="hljs-literal">None</span> =&gt; &#123;<br>                    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = (<span class="hljs-keyword">self</span>.calculation)(arg);<br>                    <span class="hljs-keyword">self</span>.value = <span class="hljs-title function_ invoke__">Some</span>(v);<br>                    v<br>                &#125;,<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cacher</span> = Cacher::<span class="hljs-title function_ invoke__">new</span>(|x| x+<span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">20</span>), __);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">25</span>), __);<br>&#125;<br><br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">example1</span>();<br>    <span class="hljs-title function_ invoke__">example2</span>();<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">example1</span>() &#123;<br>    <span class="hljs-comment">// `T: Trait` æ˜¯æœ€å¸¸ä½¿ç”¨çš„æ–¹å¼</span><br>    <span class="hljs-comment">// `T: Fn(u32) -&gt; u32` è¯´æ˜ `T` åªèƒ½æ¥æ”¶é—­åŒ…ç±»å‹çš„å‚æ•°</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cacher</span>&lt;T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>&gt; &#123;<br>        calculation: T,<br>        value: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt;,<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span>&lt;T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>&gt; Cacher&lt;T&gt; &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(calculation: T) <span class="hljs-punctuation">-&gt;</span> Cacher&lt;T&gt; &#123;<br>            Cacher &#123;<br>                calculation,<br>                value: <span class="hljs-literal">None</span>,<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, arg: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>            <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.value &#123;<br>                <span class="hljs-title function_ invoke__">Some</span>(v) =&gt; v,<br>                <span class="hljs-literal">None</span> =&gt; &#123;<br>                    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = (<span class="hljs-keyword">self</span>.calculation)(arg);<br>                    <span class="hljs-keyword">self</span>.value = <span class="hljs-title function_ invoke__">Some</span>(v);<br>                    v<br>                &#125;,<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cacher</span> = Cacher::<span class="hljs-title function_ invoke__">new</span>(|x| x+<span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">10</span>), <span class="hljs-number">11</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">15</span>), <span class="hljs-number">11</span>);<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">example2</span>() &#123;<br>    <span class="hljs-comment">// è¿˜å¯ä»¥ä½¿ç”¨ `where` æ¥çº¦æŸ T</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cacher</span>&lt;T&gt;<br>        <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>,<br>    &#123;<br>        calculation: T,<br>        value: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt;,<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span>&lt;T&gt; Cacher&lt;T&gt;<br>        <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>,<br>    &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(calculation: T) <span class="hljs-punctuation">-&gt;</span> Cacher&lt;T&gt; &#123;<br>            Cacher &#123;<br>                calculation,<br>                value: <span class="hljs-literal">None</span>,<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, arg: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>            <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.value &#123;<br>                <span class="hljs-title function_ invoke__">Some</span>(v) =&gt; v,<br>                <span class="hljs-literal">None</span> =&gt; &#123;<br>                    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = (<span class="hljs-keyword">self</span>.calculation)(arg);<br>                    <span class="hljs-keyword">self</span>.value = <span class="hljs-title function_ invoke__">Some</span>(v);<br>                    v<br>                &#125;,<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cacher</span> = Cacher::<span class="hljs-title function_ invoke__">new</span>(|x| x+<span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">20</span>), <span class="hljs-number">21</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(cacher.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">25</span>), <span class="hljs-number">21</span>);<br>&#125;<br><br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">example1</span>();<br>    <span class="hljs-title function_ invoke__">example2</span>();<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç‰¹å¾ Trait å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ä¸€ä¸ªç‰¹å®šçš„ç±»å‹æ‰€å…·æœ‰çš„ã€ä¸”èƒ½è·Ÿå…¶å®ƒç±»å‹å…±äº«çš„ç‰¹æ€§ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹å¾é€šè¿‡æŠ½è±¡çš„æ–¹å¼æ¥å®šä¹‰è¿™ç§å…±äº«è¡Œä¸ºï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç‰¹å¾çº¦æŸæ¥é™å®šä¸€ä¸ªæ³›å‹ç±»å‹å¿…é¡»è¦å…·æœ‰æŸä¸ªç‰¹å®šçš„è¡Œä¸ºã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>10.2.Const æ³›å‹</title>
    <link href="https://lilinzta.github.io/2023/08/19/10-2-Const-%E6%B3%9B%E5%9E%8B/"/>
    <id>https://lilinzta.github.io/2023/08/19/10-2-Const-%E6%B3%9B%E5%9E%8B/</id>
    <published>2023-08-19T09:12:46.000Z</published>
    <updated>2024-01-20T11:36:35.202Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¹‹å‰çš„æ³›å‹ä¸­ï¼Œå¯ä»¥æŠ½è±¡ä¸ºä¸€å¥è¯ï¼šé’ˆå¯¹ç±»å‹å®ç°çš„æ³›å‹ï¼Œæ‰€æœ‰çš„æ³›å‹éƒ½æ˜¯ä¸ºäº†æŠ½è±¡ä¸åŒçš„ç±»å‹ï¼Œé‚£æœ‰æ²¡æœ‰é’ˆå¯¹å€¼çš„æ³›å‹ï¼Ÿç­”æ¡ˆå°±æ˜¯ Const æ³›å‹ã€‚</p><span id="more"></span><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="1-ä¸‹é¢çš„ä¾‹å­åŒæ—¶ä½¿ç”¨æ³›å‹å’Œ-const-æ³›å‹æ¥å®ç°ä¸€ä¸ªç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“çš„å­—æ®µä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„"><a href="#1-ä¸‹é¢çš„ä¾‹å­åŒæ—¶ä½¿ç”¨æ³›å‹å’Œ-const-æ³›å‹æ¥å®ç°ä¸€ä¸ªç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“çš„å­—æ®µä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„" class="headerlink" title="1.ä¸‹é¢çš„ä¾‹å­åŒæ—¶ä½¿ç”¨æ³›å‹å’Œ const æ³›å‹æ¥å®ç°ä¸€ä¸ªç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“çš„å­—æ®µä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„"></a>1.ä¸‹é¢çš„ä¾‹å­åŒæ—¶ä½¿ç”¨æ³›å‹å’Œ const æ³›å‹æ¥å®ç°ä¸€ä¸ªç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“çš„å­—æ®µä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ArrayPair</span>&lt;T, <span class="hljs-keyword">const</span> N: <span class="hljs-type">usize</span>&gt; &#123;<br>    left: [T; N],<br>    right: [T; N],<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T: <span class="hljs-built_in">Debug</span>, <span class="hljs-keyword">const</span> N: <span class="hljs-type">usize</span>&gt; <span class="hljs-built_in">Debug</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">ArrayPair</span>&lt;T, N&gt; &#123;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ç›®å‰ï¼Œconst-æ³›å‹å‚æ•°åªèƒ½ä½¿ç”¨ä»¥ä¸‹å½¢å¼çš„å®å‚"><a href="#2-ç›®å‰ï¼Œconst-æ³›å‹å‚æ•°åªèƒ½ä½¿ç”¨ä»¥ä¸‹å½¢å¼çš„å®å‚" class="headerlink" title="2.ç›®å‰ï¼Œconst æ³›å‹å‚æ•°åªèƒ½ä½¿ç”¨ä»¥ä¸‹å½¢å¼çš„å®å‚:"></a>2.ç›®å‰ï¼Œconst æ³›å‹å‚æ•°åªèƒ½ä½¿ç”¨ä»¥ä¸‹å½¢å¼çš„å®å‚:</h3><ul><li>ä¸€ä¸ªå•ç‹¬çš„ const æ³›å‹å‚æ•°</li><li>ä¸€ä¸ªå­—é¢é‡ (i.e. æ•´æ•°, å¸ƒå°”å€¼æˆ–å­—ç¬¦).</li><li>ä¸€ä¸ªå…·ä½“çš„ const è¡¨è¾¾å¼( è¡¨è¾¾å¼ä¸­ä¸èƒ½åŒ…å«ä»»ä½• æ³›å‹å‚æ•°)<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>&lt;<span class="hljs-keyword">const</span> N: <span class="hljs-type">usize</span>&gt;() &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">bar</span>&lt;T, <span class="hljs-keyword">const</span> M: <span class="hljs-type">usize</span>&gt;() &#123;<br>    foo::&lt;M&gt;(); <span class="hljs-comment">// ok: ç¬¦åˆç¬¬ä¸€ç§</span><br>    foo::&lt;<span class="hljs-number">2021</span>&gt;(); <span class="hljs-comment">// ok: ç¬¦åˆç¬¬äºŒç§</span><br>    foo::&lt;&#123;<span class="hljs-number">20</span> * <span class="hljs-number">100</span> + <span class="hljs-number">20</span> * <span class="hljs-number">10</span> + <span class="hljs-number">1</span>&#125;&gt;(); <span class="hljs-comment">// ok: ç¬¦åˆç¬¬ä¸‰ç§</span><br><br>    foo::&lt;&#123; M + <span class="hljs-number">1</span> &#125;&gt;(); <span class="hljs-comment">// error: è¿èƒŒç¬¬ä¸‰ç§ï¼Œconst è¡¨è¾¾å¼ä¸­ä¸èƒ½æœ‰æ³›å‹å‚æ•° M</span><br>    foo::&lt;&#123; std::mem::size_of::&lt;T&gt;() &#125;&gt;(); <span class="hljs-comment">// error: æ³›å‹è¡¨è¾¾å¼åŒ…å«äº†æ³›å‹å‚æ•° T</span><br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_</span>: [<span class="hljs-type">u8</span>; M]; <span class="hljs-comment">// ok: ç¬¦åˆç¬¬ä¸€ç§</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_</span>: [<span class="hljs-type">u8</span>; std::mem::size_of::&lt;T&gt;()]; <span class="hljs-comment">// error: æ³›å‹è¡¨è¾¾å¼åŒ…å«äº†æ³›å‹å‚æ•° T</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-const-æ³›å‹è¿˜èƒ½å¸®æˆ‘ä»¬é¿å…ä¸€äº›è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæå‡æ€§èƒ½"><a href="#3-const-æ³›å‹è¿˜èƒ½å¸®æˆ‘ä»¬é¿å…ä¸€äº›è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæå‡æ€§èƒ½" class="headerlink" title="3.const æ³›å‹è¿˜èƒ½å¸®æˆ‘ä»¬é¿å…ä¸€äº›è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæå‡æ€§èƒ½"></a>3.const æ³›å‹è¿˜èƒ½å¸®æˆ‘ä»¬é¿å…ä¸€äº›è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæå‡æ€§èƒ½</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MinSlice</span>&lt;T, <span class="hljs-keyword">const</span> N: <span class="hljs-type">usize</span>&gt; &#123;<br>    <span class="hljs-keyword">pub</span> head: [T; N],<br>    <span class="hljs-keyword">pub</span> tail: [T],<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span>: &amp;[<span class="hljs-type">u8</span>] = <span class="hljs-string">b&quot;Hello, world&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">reference</span>: <span class="hljs-type">Option</span>&lt;&amp;<span class="hljs-type">u8</span>&gt; = slice.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">6</span>);<br>    <span class="hljs-comment">// æˆ‘ä»¬çŸ¥é“ `.get` è¿”å›çš„æ˜¯ `Some(b&#x27; &#x27;)`</span><br>    <span class="hljs-comment">// ä½†ç¼–è¯‘å™¨ä¸çŸ¥é“</span><br>    <span class="hljs-built_in">assert!</span>(reference.<span class="hljs-title function_ invoke__">is_some</span>());<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span>: &amp;[<span class="hljs-type">u8</span>] = <span class="hljs-string">b&quot;Hello, world&quot;</span>;<br><br>    <span class="hljs-comment">// å½“ç¼–è¯‘æ„å»º MinSlice æ—¶ä¼šè¿›è¡Œé•¿åº¦æ£€æŸ¥ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¼–è¯‘æœŸæˆ‘ä»¬å°±çŸ¥é“å®ƒçš„é•¿åº¦æ˜¯ 12</span><br>    <span class="hljs-comment">// åœ¨è¿è¡ŒæœŸï¼Œä¸€æ—¦ `unwrap` æˆåŠŸï¼Œåœ¨ `MinSlice` çš„ä½œç”¨åŸŸå†…ï¼Œå°±å†æ— éœ€ä»»ä½•æ£€æŸ¥</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">minslice</span> = MinSlice::&lt;<span class="hljs-type">u8</span>, <span class="hljs-number">12</span>&gt;::<span class="hljs-title function_ invoke__">from_slice</span>(slice).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">value</span>: <span class="hljs-type">u8</span> = minslice.head[<span class="hljs-number">6</span>];<br>    <span class="hljs-built_in">assert_eq!</span>(value, <span class="hljs-string">b&#x27; &#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><h3 id="1-ğŸŒŸğŸŒŸ-æ˜¯ç»“æ„ä½“ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå’Œæ•°ç»„ç±»å‹ä¸€æ ·ï¼Œè¿™æ„å‘³ç€é•¿åº¦ä¸åŒä¼šå¯¼è‡´ç±»å‹ä¸åŒï¼š-Array-å’Œ-Array-æ˜¯ä¸åŒçš„ç±»å‹"><a href="#1-ğŸŒŸğŸŒŸ-æ˜¯ç»“æ„ä½“ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå’Œæ•°ç»„ç±»å‹ä¸€æ ·ï¼Œè¿™æ„å‘³ç€é•¿åº¦ä¸åŒä¼šå¯¼è‡´ç±»å‹ä¸åŒï¼š-Array-å’Œ-Array-æ˜¯ä¸åŒçš„ç±»å‹" class="headerlink" title="1.ğŸŒŸğŸŒŸ &lt;T, const N: usize&gt; æ˜¯ç»“æ„ä½“ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå’Œæ•°ç»„ç±»å‹ä¸€æ ·ï¼Œè¿™æ„å‘³ç€é•¿åº¦ä¸åŒä¼šå¯¼è‡´ç±»å‹ä¸åŒï¼š Array&lt;i32, 3&gt; å’Œ Array&lt;i32, 4&gt; æ˜¯ä¸åŒçš„ç±»å‹"></a>1.ğŸŒŸğŸŒŸ &lt;T, const N: usize&gt; æ˜¯ç»“æ„ä½“ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå’Œæ•°ç»„ç±»å‹ä¸€æ ·ï¼Œè¿™æ„å‘³ç€é•¿åº¦ä¸åŒä¼šå¯¼è‡´ç±»å‹ä¸åŒï¼š Array&lt;i32, 3&gt; å’Œ Array&lt;i32, 4&gt; æ˜¯ä¸åŒçš„ç±»å‹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Array</span>&lt;T, <span class="hljs-keyword">const</span> N: <span class="hljs-type">usize</span>&gt; &#123;<br>    data : [T; N]<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arrays</span> = [<br>        Array&#123;<br>            data: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        &#125;,<br>        Array &#123;<br>            data: [<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>],<br>        &#125;,<br>        Array &#123;<br>            data: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br>        &#125;<br>    ];<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Array</span>&lt;T, <span class="hljs-keyword">const</span> N: <span class="hljs-type">usize</span>&gt; &#123;<br>    data : [T; N]<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arrays</span> = [<br>        Array&#123;<br>            data: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        &#125;,<br>        Array &#123;<br>            data: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<br>        &#125;,<br>        Array &#123;<br>            data: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>        &#125;<br>    ];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_array</span>&lt;__&gt;(__) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, arr);<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-title function_ invoke__">print_array</span>(arr);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>];<br>    <span class="hljs-title function_ invoke__">print_array</span>(arr);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_array</span>&lt;T: std::fmt::<span class="hljs-built_in">Debug</span>, <span class="hljs-keyword">const</span> N: <span class="hljs-type">usize</span>&gt;(arr: [T; N]) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, arr);<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-title function_ invoke__">print_array</span>(arr);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>];<br>    <span class="hljs-title function_ invoke__">print_array</span>(arr);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ-æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›èƒ½é™åˆ¶ä¸€ä¸ªå˜é‡å ç”¨å†…å­˜çš„å¤§å°ï¼Œä¾‹å¦‚åœ¨åµŒå…¥å¼ç¯å¢ƒä¸­ï¼Œæ­¤æ—¶-const-æ³›å‹å‚æ•°çš„ç¬¬ä¸‰ç§å½¢å¼-const-è¡¨è¾¾å¼-å°±éå¸¸é€‚åˆ"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ-æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›èƒ½é™åˆ¶ä¸€ä¸ªå˜é‡å ç”¨å†…å­˜çš„å¤§å°ï¼Œä¾‹å¦‚åœ¨åµŒå…¥å¼ç¯å¢ƒä¸­ï¼Œæ­¤æ—¶-const-æ³›å‹å‚æ•°çš„ç¬¬ä¸‰ç§å½¢å¼-const-è¡¨è¾¾å¼-å°±éå¸¸é€‚åˆ" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›èƒ½é™åˆ¶ä¸€ä¸ªå˜é‡å ç”¨å†…å­˜çš„å¤§å°ï¼Œä¾‹å¦‚åœ¨åµŒå…¥å¼ç¯å¢ƒä¸­ï¼Œæ­¤æ—¶ const æ³›å‹å‚æ•°çš„ç¬¬ä¸‰ç§å½¢å¼ const è¡¨è¾¾å¼ å°±éå¸¸é€‚åˆ."></a>3.ğŸŒŸğŸŒŸğŸŒŸ æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›èƒ½é™åˆ¶ä¸€ä¸ªå˜é‡å ç”¨å†…å­˜çš„å¤§å°ï¼Œä¾‹å¦‚åœ¨åµŒå…¥å¼ç¯å¢ƒä¸­ï¼Œæ­¤æ—¶ const æ³›å‹å‚æ•°çš„ç¬¬ä¸‰ç§å½¢å¼ const è¡¨è¾¾å¼ å°±éå¸¸é€‚åˆ.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#![allow(incomplete_features)]</span><br><span class="hljs-meta">#![feature(generic_const_exprs)]</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">check_size</span>&lt;T&gt;(val: T)<br><span class="hljs-keyword">where</span><br>    Assert&lt;&#123; core::mem::size_of::&lt;T&gt;() &lt; <span class="hljs-number">768</span> &#125;&gt;: IsTrue,<br>&#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br><br><span class="hljs-comment">// ä¿®å¤ main å‡½æ•°ä¸­çš„é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-number">0u8</span>; <span class="hljs-number">767</span>]);<br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-number">0i32</span>; <span class="hljs-number">191</span>]);<br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-string">&quot;helloä½ å¥½&quot;</span>; __]); <span class="hljs-comment">// size of &amp;str ?</span><br>    <span class="hljs-title function_ invoke__">check_size</span>([(); __].<span class="hljs-title function_ invoke__">map</span>(|_| <span class="hljs-string">&quot;helloä½ å¥½&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()));  <span class="hljs-comment">// size of String?</span><br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-string">&#x27;ä¸­&#x27;</span>; __]); <span class="hljs-comment">// size of char ?</span><br>&#125;<br><br><br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Assert</span>&lt;<span class="hljs-keyword">const</span> CHECK: <span class="hljs-type">bool</span>&gt; &#123;&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">IsTrue</span> &#123;&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">IsTrue</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Assert</span>&lt;<span class="hljs-literal">true</span>&gt; &#123;&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#![allow(incomplete_features)]</span><br><span class="hljs-meta">#![feature(generic_const_exprs)]</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">check_size</span>&lt;T&gt;(val: T)<br><span class="hljs-keyword">where</span><br>    Assert&lt;&#123; core::mem::size_of::&lt;T&gt;() &lt; <span class="hljs-number">768</span> &#125;&gt;: IsTrue,<br>&#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br><br><span class="hljs-comment">// ä¿®å¤ main å‡½æ•°ä¸­çš„é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-number">0u8</span>; <span class="hljs-number">767</span>]);<br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-number">0i32</span>; <span class="hljs-number">191</span>]);<br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-string">&quot;helloä½ å¥½&quot;</span>; <span class="hljs-number">47</span>]); <span class="hljs-comment">// size of &amp;str ?</span><br>    <span class="hljs-title function_ invoke__">check_size</span>([(); <span class="hljs-number">31</span>].<span class="hljs-title function_ invoke__">map</span>(|_| <span class="hljs-string">&quot;helloä½ å¥½&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()));  <span class="hljs-comment">// size of String?</span><br>    <span class="hljs-title function_ invoke__">check_size</span>([<span class="hljs-string">&#x27;ä¸­&#x27;</span>; <span class="hljs-number">191</span>]); <span class="hljs-comment">// size of char ?</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ä¹‹å‰çš„æ³›å‹ä¸­ï¼Œå¯ä»¥æŠ½è±¡ä¸ºä¸€å¥è¯ï¼šé’ˆå¯¹ç±»å‹å®ç°çš„æ³›å‹ï¼Œæ‰€æœ‰çš„æ³›å‹éƒ½æ˜¯ä¸ºäº†æŠ½è±¡ä¸åŒçš„ç±»å‹ï¼Œé‚£æœ‰æ²¡æœ‰é’ˆå¯¹å€¼çš„æ³›å‹ï¼Ÿç­”æ¡ˆå°±æ˜¯ Const æ³›å‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>10.1.æ³›å‹</title>
    <link href="https://lilinzta.github.io/2023/08/18/10-1-%E6%B3%9B%E5%9E%8B/"/>
    <id>https://lilinzta.github.io/2023/08/18/10-1-%E6%B3%9B%E5%9E%8B/</id>
    <published>2023-08-18T14:40:51.000Z</published>
    <updated>2024-01-17T15:05:42.358Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="1-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">A</span>;          <span class="hljs-comment">// å…·ä½“çš„ç±»å‹ `A`.</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">S</span>(A);       <span class="hljs-comment">// å…·ä½“çš„ç±»å‹ `S`.</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SGen</span>&lt;T&gt;(T); <span class="hljs-comment">// æ³›å‹ `SGen`.</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">reg_fn</span>(_s: S) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">gen_spec_t</span>(_s: SGen&lt;A&gt;) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">gen_spec_i32</span>(_s: SGen&lt;<span class="hljs-type">i32</span>&gt;) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">generic</span>&lt;T&gt;(_s: SGen&lt;T&gt;) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨éæ³›å‹å‡½æ•°</span><br>    <span class="hljs-title function_ invoke__">reg_fn</span>(__);          <span class="hljs-comment">// å…·ä½“çš„ç±»å‹</span><br>    <span class="hljs-title function_ invoke__">gen_spec_t</span>(__);   <span class="hljs-comment">// éšå¼åœ°æŒ‡å®šç±»å‹å‚æ•°  `A`.</span><br>    <span class="hljs-title function_ invoke__">gen_spec_i32</span>(__); <span class="hljs-comment">// éšå¼åœ°æŒ‡å®šç±»å‹å‚æ•°`i32`.</span><br><br>    <span class="hljs-comment">// æ˜¾å¼åœ°æŒ‡å®šç±»å‹å‚æ•° `char`</span><br>    generic::&lt;<span class="hljs-type">char</span>&gt;(__);<br><br>    <span class="hljs-comment">// éšå¼åœ°æŒ‡å®šç±»å‹å‚æ•° `char`.</span><br>    <span class="hljs-title function_ invoke__">generic</span>(__);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">A</span>;          <span class="hljs-comment">// å…·ä½“çš„ç±»å‹ `A`.</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">S</span>(A);       <span class="hljs-comment">// å…·ä½“çš„ç±»å‹ `S`.</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SGen</span>&lt;T&gt;(T); <span class="hljs-comment">// æ³›å‹ `SGen`.</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">reg_fn</span>(_s: S) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">gen_spec_t</span>(_s: SGen&lt;A&gt;) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">gen_spec_i32</span>(_s: SGen&lt;<span class="hljs-type">i32</span>&gt;) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">generic</span>&lt;T&gt;(_s: SGen&lt;T&gt;) &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨éæ³›å‹å‡½æ•°</span><br>    <span class="hljs-title function_ invoke__">reg_fn</span>(<span class="hljs-title function_ invoke__">S</span>(A));          <span class="hljs-comment">// å…·ä½“çš„ç±»å‹</span><br>    <span class="hljs-title function_ invoke__">gen_spec_t</span>(<span class="hljs-title function_ invoke__">SGen</span>(A));   <span class="hljs-comment">// éšå¼åœ°æŒ‡å®šç±»å‹å‚æ•°  `A`.</span><br>    <span class="hljs-title function_ invoke__">gen_spec_i32</span>(<span class="hljs-title function_ invoke__">SGen</span>(<span class="hljs-number">6</span>)); <span class="hljs-comment">// éšå¼åœ°æŒ‡å®šç±»å‹å‚æ•°`i32`.</span><br><br>    <span class="hljs-comment">// æ˜¾å¼åœ°æŒ‡å®šç±»å‹å‚æ•° `char`</span><br>    generic::&lt;<span class="hljs-type">char</span>&gt;(<span class="hljs-title function_ invoke__">SGen</span>(<span class="hljs-string">&#x27;a&#x27;</span>));<br><br>    <span class="hljs-comment">// éšå¼åœ°æŒ‡å®šç±»å‹å‚æ•° `char`.</span><br>    <span class="hljs-title function_ invoke__">generic</span>(<span class="hljs-title function_ invoke__">SGen</span>(<span class="hljs-string">&#x27;a&#x27;</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®ç°ä¸‹é¢çš„æ³›å‹å‡½æ•° sum</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">2i8</span>, <span class="hljs-number">3i8</span>));<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">50</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>));<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">2.46</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1.23</span>, <span class="hljs-number">1.23</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®ç°ä¸‹é¢çš„æ³›å‹å‡½æ•° sum</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>&lt;T: std::ops::Add&lt;Output = T&gt;&gt;(x: T, y: T) <span class="hljs-punctuation">-&gt;</span> T &#123;<br>    x + y<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">2i8</span>, <span class="hljs-number">3i8</span>));<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">50</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>));<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">2.46</span>, <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1.23</span>, <span class="hljs-number">1.23</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»“æ„ä½“å’Œimpl"><a href="#ç»“æ„ä½“å’Œimpl" class="headerlink" title="ç»“æ„ä½“å’Œimpl"></a>ç»“æ„ä½“å’Œimpl</h2><h3 id="3-ğŸŒŸ"><a href="#3-ğŸŒŸ" class="headerlink" title="3.ğŸŒŸ"></a>3.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®ç°ä¸€ä¸ªç»“æ„ä½“ Point è®©ä»£ç å·¥ä½œ</span><br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">integer</span> = Point &#123; x: <span class="hljs-number">5</span>, y: <span class="hljs-number">10</span> &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">float</span> = Point &#123; x: <span class="hljs-number">1.0</span>, y: <span class="hljs-number">4.0</span> &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®ç°ä¸€ä¸ªç»“æ„ä½“ Point è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">integer</span> = Point &#123; x: <span class="hljs-number">5</span>, y: <span class="hljs-number">10</span> &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">float</span> = Point &#123; x: <span class="hljs-number">1.0</span>, y: <span class="hljs-number">4.0</span> &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ä»¥ä¸‹ç»“æ„ä½“è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹è¿™è¡Œä»£ç ï¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Point&#123;x: <span class="hljs-number">5</span>, y : <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ä»¥ä¸‹ç»“æ„ä½“è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T, U&gt; &#123;<br>    x: T,<br>    y: U,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹è¿™è¡Œä»£ç ï¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Point&#123;x: <span class="hljs-number">5</span>, y : <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸º Val å¢åŠ æ³›å‹å‚æ•°ï¼Œä¸è¦ä¿®æ”¹ `main` ä¸­çš„ä»£ç </span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Val</span> &#123;<br>    val: <span class="hljs-type">f64</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Val</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">f64</span> &#123;<br>        &amp;<span class="hljs-keyword">self</span>.val<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = Val&#123; val: <span class="hljs-number">3.0</span> &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = Val&#123; val: <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()&#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, x.<span class="hljs-title function_ invoke__">value</span>(), y.<span class="hljs-title function_ invoke__">value</span>());<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸º Val å¢åŠ æ³›å‹å‚æ•°ï¼Œä¸è¦ä¿®æ”¹ `main` ä¸­çš„ä»£ç </span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Val</span>&lt;T&gt; &#123;<br>    val: T,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T&gt; Val&lt;T&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;T &#123;<br>        &amp;<span class="hljs-keyword">self</span>.val<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = Val&#123; val: <span class="hljs-number">3.0</span> &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = Val&#123; val: <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()&#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, x.<span class="hljs-title function_ invoke__">value</span>(), y.<span class="hljs-title function_ invoke__">value</span>());<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><h3 id="6-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#6-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="6.ğŸŒŸğŸŒŸğŸŒŸ"></a>6.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T, U&gt; &#123;<br>    x: T,<br>    y: U,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T, U&gt; Point&lt;T, U&gt; &#123;<br>    <span class="hljs-comment">// å®ç° mixupï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç ï¼</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">mixup</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span> = Point &#123; x: <span class="hljs-number">5</span>, y: <span class="hljs-number">10</span> &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span> = Point &#123; x: <span class="hljs-string">&quot;Hello&quot;</span>, y: <span class="hljs-string">&#x27;ä¸­&#x27;</span>&#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p3</span> = p1.<span class="hljs-title function_ invoke__">mixup</span>(p2);<br><br>    <span class="hljs-built_in">assert_eq!</span>(p3.x, <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(p3.y, <span class="hljs-string">&#x27;ä¸­&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T, U&gt; &#123;<br>    x: T,<br>    y: U,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T, U&gt; Point&lt;T, U&gt; &#123;<br>    <span class="hljs-comment">// å®ç° mixupï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç ï¼</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">mixup</span>&lt;V, W&gt;(<span class="hljs-keyword">self</span>, other: Point&lt;V, W&gt;) <span class="hljs-punctuation">-&gt;</span> Point&lt;T, W&gt; &#123;<br>        Point &#123;<br>            x: <span class="hljs-keyword">self</span>.x,<br>            y: other.y<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span> = Point &#123; x: <span class="hljs-number">5</span>, y: <span class="hljs-number">10</span> &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span> = Point &#123; x: <span class="hljs-string">&quot;Hello&quot;</span>, y: <span class="hljs-string">&#x27;ä¸­&#x27;</span>&#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p3</span> = p1.<span class="hljs-title function_ invoke__">mixup</span>(p2);<br><br>    <span class="hljs-built_in">assert_eq!</span>(p3.x, <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(p3.y, <span class="hljs-string">&#x27;ä¸­&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-ğŸŒŸğŸŒŸ"><a href="#7-ğŸŒŸğŸŒŸ" class="headerlink" title="7.ğŸŒŸğŸŒŸ"></a>7.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Point</span>&lt;<span class="hljs-type">f32</span>&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">distance_from_origin</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span> &#123;<br>        (<span class="hljs-keyword">self</span>.x.<span class="hljs-title function_ invoke__">powi</span>(<span class="hljs-number">2</span>) + <span class="hljs-keyword">self</span>.y.<span class="hljs-title function_ invoke__">powi</span>(<span class="hljs-number">2</span>)).<span class="hljs-title function_ invoke__">sqrt</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Point&#123;x: <span class="hljs-number">5</span>, y: <span class="hljs-number">10</span>&#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,p.<span class="hljs-title function_ invoke__">distance_from_origin</span>())<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&lt;T&gt; &#123;<br>    x: T,<br>    y: T,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Point</span>&lt;<span class="hljs-type">f32</span>&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">distance_from_origin</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span> &#123;<br>        (<span class="hljs-keyword">self</span>.x.<span class="hljs-title function_ invoke__">powi</span>(<span class="hljs-number">2</span>) + <span class="hljs-keyword">self</span>.y.<span class="hljs-title function_ invoke__">powi</span>(<span class="hljs-number">2</span>)).<span class="hljs-title function_ invoke__">sqrt</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Point&#123;x: <span class="hljs-number">5.0_f32</span>, y: <span class="hljs-number">10.0_f32</span>&#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,p.<span class="hljs-title function_ invoke__">distance_from_origin</span>())<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‡½æ•°&quot;&gt;&lt;a href=&quot;#å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°&quot;&gt;&lt;/a&gt;å‡½æ•°&lt;/h2&gt;&lt;h3 id=&quot;1-ğŸŒŸğŸŒŸğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸğŸŒŸğŸŒŸ&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸğŸŒŸğŸŒŸ&quot;</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>9.æ–¹æ³•å’Œå…³è”å‡½æ•°</title>
    <link href="https://lilinzta.github.io/2023/08/17/9-%E6%96%B9%E6%B3%95%E5%92%8C%E5%85%B3%E8%81%94%E5%87%BD%E6%95%B0/"/>
    <id>https://lilinzta.github.io/2023/08/17/9-%E6%96%B9%E6%B3%95%E5%92%8C%E5%85%B3%E8%81%94%E5%87%BD%E6%95%B0/</id>
    <published>2023-08-17T13:58:31.000Z</published>
    <updated>2024-01-17T15:05:42.365Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">f64</span>,<br>    y: <span class="hljs-type">f64</span>,<br>&#125;<br><br><span class="hljs-comment">// `Point` çš„å…³è”å‡½æ•°éƒ½æ”¾åœ¨ä¸‹é¢çš„ `impl` è¯­å¥å—ä¸­</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Point</span> &#123;<br>    <span class="hljs-comment">// å…³è”å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•è·Ÿæ„é€ å™¨éå¸¸ç±»ä¼¼</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">origin</span>() <span class="hljs-punctuation">-&gt;</span> Point &#123;<br>        Point &#123; x: <span class="hljs-number">0.0</span>, y: <span class="hljs-number">0.0</span> &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å¦å¤–ä¸€ä¸ªå…³è”å‡½æ•°ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(x: <span class="hljs-type">f64</span>, y: <span class="hljs-type">f64</span>) <span class="hljs-punctuation">-&gt;</span> Point &#123;<br>        Point &#123; x: x, y: y &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    p1: Point,<br>    p2: Point,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªæ–¹æ³•</span><br>    <span class="hljs-comment">// `&amp;self` æ˜¯ `self: &amp;Self` çš„è¯­æ³•ç³–</span><br>    <span class="hljs-comment">// `Self` æ˜¯å½“å‰è°ƒç”¨å¯¹è±¡çš„ç±»å‹ï¼Œå¯¹äºæœ¬ä¾‹æ¥è¯´ `Self` = `Rectangle`</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-comment">// ä½¿ç”¨ç‚¹æ“ä½œç¬¦å¯ä»¥è®¿é—® `self` ä¸­çš„ç»“æ„ä½“å­—æ®µ</span><br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">Point</span> &#123; x: x1, y: y1 &#125; = <span class="hljs-keyword">self</span>.p1;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">Point</span> &#123; x: x2, y: y2 &#125; = <span class="hljs-keyword">self</span>.p2;<br><br><br>        <span class="hljs-comment">// `abs` æ˜¯ä¸€ä¸ª `f64` ç±»å‹çš„æ–¹æ³•ï¼Œä¼šè¿”å›è°ƒç”¨è€…çš„ç»å¯¹å€¼</span><br>        ((x1 - x2) * (y1 - y2)).<span class="hljs-title function_ invoke__">abs</span>()<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">perimeter</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">Point</span> &#123; x: x1, y: y1 &#125; = <span class="hljs-keyword">self</span>.p1;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">Point</span> &#123; x: x2, y: y2 &#125; = <span class="hljs-keyword">self</span>.p2;<br><br>        <span class="hljs-number">2.0</span> * ((x1 - x2).<span class="hljs-title function_ invoke__">abs</span>() + (y1 - y2).<span class="hljs-title function_ invoke__">abs</span>())<br>    &#125;<br><br>    <span class="hljs-comment">// è¯¥æ–¹æ³•è¦æ±‚è°ƒç”¨è€…æ˜¯å¯å˜çš„ï¼Œ`&amp;mut self` æ˜¯ `self: &amp;mut Self` çš„è¯­æ³•ç³–</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">translate</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, x: <span class="hljs-type">f64</span>, y: <span class="hljs-type">f64</span>) &#123;<br>        <span class="hljs-keyword">self</span>.p1.x += x;<br>        <span class="hljs-keyword">self</span>.p2.x += x;<br><br>        <span class="hljs-keyword">self</span>.p1.y += y;<br>        <span class="hljs-keyword">self</span>.p2.y += y;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// `Pair` æŒæœ‰ä¸¤ä¸ªåˆ†é…åœ¨å †ä¸Šçš„æ•´æ•°</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Pair</span>(<span class="hljs-type">Box</span>&lt;<span class="hljs-type">i32</span>&gt;, <span class="hljs-type">Box</span>&lt;<span class="hljs-type">i32</span>&gt;);<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Pair</span> &#123;<br>    <span class="hljs-comment">// è¯¥æ–¹æ³•ä¼šæ‹¿èµ°è°ƒç”¨è€…çš„æ‰€æœ‰æƒ</span><br>    <span class="hljs-comment">// `self` æ˜¯ `self: Self` çš„è¯­æ³•ç³–</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">destroy</span>(<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">Pair</span>(first, second) = <span class="hljs-keyword">self</span>;<br><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Destroying Pair(&#123;&#125;, &#123;&#125;)&quot;</span>, first, second);<br><br>        <span class="hljs-comment">// `first` å’Œ `second` åœ¨è¿™é‡Œè¶…å‡ºä½œç”¨åŸŸå¹¶è¢«é‡Šæ”¾</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">rectangle</span> = Rectangle &#123;<br>        <span class="hljs-comment">// å…³è”å‡½æ•°çš„è°ƒç”¨ä¸æ˜¯é€šè¿‡ç‚¹æ“ä½œç¬¦ï¼Œè€Œæ˜¯ä½¿ç”¨ `::`</span><br>        p1: Point::<span class="hljs-title function_ invoke__">origin</span>(),<br>        p2: Point::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>),<br>    &#125;;<br><br>    <span class="hljs-comment">// æ–¹æ³•æ‰æ˜¯é€šè¿‡ç‚¹æ“ä½œç¬¦è°ƒç”¨</span><br>    <span class="hljs-comment">// æ³¨æ„ï¼Œè¿™é‡Œçš„æ–¹æ³•éœ€è¦çš„æ˜¯ `&amp;self` ä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ `(&amp;rectangle).perimeter()` æ¥è°ƒç”¨ï¼ŒåŸå› åœ¨äºï¼š</span><br>    <span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å–å¼•ç”¨</span><br>    <span class="hljs-comment">//  `rectangle.perimeter()` === `Rectangle::perimeter(&amp;rectangle)`</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Rectangle perimeter: &#123;&#125;&quot;</span>, rectangle.<span class="hljs-title function_ invoke__">perimeter</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Rectangle area: &#123;&#125;&quot;</span>, rectangle.<span class="hljs-title function_ invoke__">area</span>());<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">square</span> = Rectangle &#123;<br>        p1: Point::<span class="hljs-title function_ invoke__">origin</span>(),<br>        p2: Point::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>),<br>    &#125;;<br><br><br>    <span class="hljs-comment">// é”™è¯¯ï¼`rectangle` æ˜¯ä¸å¯å˜çš„ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•è¦æ±‚ä¸€ä¸ªå¯å˜çš„å¯¹è±¡</span><br>    <span class="hljs-comment">//rectangle.translate(1.0, 0.0);</span><br>    <span class="hljs-comment">// TODO ^ è¯•ç€åæ³¨é‡Šæ­¤è¡Œï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ</span><br><br>    <span class="hljs-comment">// å¯ä»¥ï¼å¯å˜å¯¹è±¡å¯ä»¥è°ƒç”¨å¯å˜çš„æ–¹æ³•</span><br>    square.<span class="hljs-title function_ invoke__">translate</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">pair</span> = <span class="hljs-title function_ invoke__">Pair</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>), <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">2</span>));<br><br>    pair.<span class="hljs-title function_ invoke__">destroy</span>();<br><br>    <span class="hljs-comment">// Error! ä¸Šä¸€ä¸ª `destroy` è°ƒç”¨æ‹¿èµ°äº† `pair` çš„æ‰€æœ‰æƒ</span><br>    <span class="hljs-comment">//pair.destroy();</span><br>    <span class="hljs-comment">// TODO ^ è¯•ç€åæ³¨é‡Šæ­¤è¡Œ</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><h3 id="1-ğŸŒŸğŸŒŸ-æ–¹æ³•è·Ÿå‡½æ•°ç±»ä¼¼ï¼šéƒ½æ˜¯ä½¿ç”¨-fn-å£°æ˜ï¼Œæœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚ä½†æ˜¯ä¸å‡½æ•°ä¸åŒçš„æ˜¯ï¼Œæ–¹æ³•å®šä¹‰åœ¨ç»“æ„ä½“çš„ä¸Šä¸‹æ–‡ä¸­-æšä¸¾ã€ç‰¹å¾å¯¹è±¡ä¹Ÿå¯ä»¥å®šä¹‰æ–¹æ³•-ï¼Œè€Œä¸”æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šæ˜¯-self-æˆ–å…¶å˜ä½“-self-ã€-mut-selfï¼Œself-ä»£è¡¨äº†å½“å‰è°ƒç”¨çš„ç»“æ„ä½“å®ä¾‹ã€‚"><a href="#1-ğŸŒŸğŸŒŸ-æ–¹æ³•è·Ÿå‡½æ•°ç±»ä¼¼ï¼šéƒ½æ˜¯ä½¿ç”¨-fn-å£°æ˜ï¼Œæœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚ä½†æ˜¯ä¸å‡½æ•°ä¸åŒçš„æ˜¯ï¼Œæ–¹æ³•å®šä¹‰åœ¨ç»“æ„ä½“çš„ä¸Šä¸‹æ–‡ä¸­-æšä¸¾ã€ç‰¹å¾å¯¹è±¡ä¹Ÿå¯ä»¥å®šä¹‰æ–¹æ³•-ï¼Œè€Œä¸”æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šæ˜¯-self-æˆ–å…¶å˜ä½“-self-ã€-mut-selfï¼Œself-ä»£è¡¨äº†å½“å‰è°ƒç”¨çš„ç»“æ„ä½“å®ä¾‹ã€‚" class="headerlink" title="1.ğŸŒŸğŸŒŸ æ–¹æ³•è·Ÿå‡½æ•°ç±»ä¼¼ï¼šéƒ½æ˜¯ä½¿ç”¨ fn å£°æ˜ï¼Œæœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚ä½†æ˜¯ä¸å‡½æ•°ä¸åŒçš„æ˜¯ï¼Œæ–¹æ³•å®šä¹‰åœ¨ç»“æ„ä½“çš„ä¸Šä¸‹æ–‡ä¸­(æšä¸¾ã€ç‰¹å¾å¯¹è±¡ä¹Ÿå¯ä»¥å®šä¹‰æ–¹æ³•)ï¼Œè€Œä¸”æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šæ˜¯ self æˆ–å…¶å˜ä½“ &amp;self ã€&amp;mut selfï¼Œself ä»£è¡¨äº†å½“å‰è°ƒç”¨çš„ç»“æ„ä½“å®ä¾‹ã€‚"></a>1.ğŸŒŸğŸŒŸ æ–¹æ³•è·Ÿå‡½æ•°ç±»ä¼¼ï¼šéƒ½æ˜¯ä½¿ç”¨ fn å£°æ˜ï¼Œæœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚ä½†æ˜¯ä¸å‡½æ•°ä¸åŒçš„æ˜¯ï¼Œæ–¹æ³•å®šä¹‰åœ¨ç»“æ„ä½“çš„ä¸Šä¸‹æ–‡ä¸­(æšä¸¾ã€ç‰¹å¾å¯¹è±¡ä¹Ÿå¯ä»¥å®šä¹‰æ–¹æ³•)ï¼Œè€Œä¸”æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šæ˜¯ self æˆ–å…¶å˜ä½“ &amp;self ã€&amp;mut selfï¼Œself ä»£è¡¨äº†å½“å‰è°ƒç”¨çš„ç»“æ„ä½“å®ä¾‹ã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    height: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    <span class="hljs-comment">// å®Œæˆ area æ–¹æ³•ï¼Œè¿”å›çŸ©å½¢ Rectangle çš„é¢ç§¯</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">rect1</span> = Rectangle &#123; width: <span class="hljs-number">30</span>, height: <span class="hljs-number">50</span> &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(rect1.<span class="hljs-title function_ invoke__">area</span>(), <span class="hljs-number">1500</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    height: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    <span class="hljs-comment">// å®Œæˆ area æ–¹æ³•ï¼Œè¿”å›çŸ©å½¢ Rectangle çš„é¢ç§¯</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">self</span>.width * <span class="hljs-keyword">self</span>.height<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">rect1</span> = Rectangle &#123; width: <span class="hljs-number">30</span>, height: <span class="hljs-number">50</span> &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(rect1.<span class="hljs-title function_ invoke__">area</span>(), <span class="hljs-number">1500</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-self-ä¼šæ‹¿èµ°å½“å‰ç»“æ„ä½“å®ä¾‹-è°ƒç”¨å¯¹è±¡-çš„æ‰€æœ‰æƒï¼Œè€Œ-self-å´åªä¼šå€Ÿç”¨ä¸€ä¸ªä¸å¯å˜å¼•ç”¨ï¼Œ-mut-self-ä¼šå€Ÿç”¨ä¸€ä¸ªå¯å˜å¼•ç”¨"><a href="#2-ğŸŒŸğŸŒŸ-self-ä¼šæ‹¿èµ°å½“å‰ç»“æ„ä½“å®ä¾‹-è°ƒç”¨å¯¹è±¡-çš„æ‰€æœ‰æƒï¼Œè€Œ-self-å´åªä¼šå€Ÿç”¨ä¸€ä¸ªä¸å¯å˜å¼•ç”¨ï¼Œ-mut-self-ä¼šå€Ÿç”¨ä¸€ä¸ªå¯å˜å¼•ç”¨" class="headerlink" title="2.ğŸŒŸğŸŒŸ self ä¼šæ‹¿èµ°å½“å‰ç»“æ„ä½“å®ä¾‹(è°ƒç”¨å¯¹è±¡)çš„æ‰€æœ‰æƒï¼Œè€Œ &amp;self å´åªä¼šå€Ÿç”¨ä¸€ä¸ªä¸å¯å˜å¼•ç”¨ï¼Œ&amp;mut self ä¼šå€Ÿç”¨ä¸€ä¸ªå¯å˜å¼•ç”¨"></a>2.ğŸŒŸğŸŒŸ self ä¼šæ‹¿èµ°å½“å‰ç»“æ„ä½“å®ä¾‹(è°ƒç”¨å¯¹è±¡)çš„æ‰€æœ‰æƒï¼Œè€Œ &amp;self å´åªä¼šå€Ÿç”¨ä¸€ä¸ªä¸å¯å˜å¼•ç”¨ï¼Œ&amp;mut self ä¼šå€Ÿç”¨ä¸€ä¸ªå¯å˜å¼•ç”¨</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// åªå¡«ç©ºï¼Œä¸è¦åˆ é™¤ä»»ä½•ä»£ç è¡Œ!</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    color: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_state</span>(__)  &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the current state is &#123;&#125;&quot;</span>, __.color);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">light</span> = TrafficLight&#123;<br>        color: <span class="hljs-string">&quot;red&quot;</span>.<span class="hljs-title function_ invoke__">to_owned</span>(),<br>    &#125;;<br>    <span class="hljs-comment">// ä¸è¦æ‹¿èµ° `light` çš„æ‰€æœ‰æƒ</span><br>    light.<span class="hljs-title function_ invoke__">show_state</span>();<br>    <span class="hljs-comment">// å¦åˆ™ä¸‹é¢ä»£ç ä¼šæŠ¥é”™</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, light);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// åªå¡«ç©ºï¼Œä¸è¦åˆ é™¤ä»»ä½•ä»£ç è¡Œ!</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    color: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_state</span>(&amp;<span class="hljs-keyword">self</span>)  &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the current state is &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.color);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">light</span> = TrafficLight&#123;<br>        color: <span class="hljs-string">&quot;red&quot;</span>.<span class="hljs-title function_ invoke__">to_owned</span>(),<br>    &#125;;<br>    <span class="hljs-comment">// ä¸è¦æ‹¿èµ° `light` çš„æ‰€æœ‰æƒ</span><br>    light.<span class="hljs-title function_ invoke__">show_state</span>();<br>    <span class="hljs-comment">// å¦åˆ™ä¸‹é¢ä»£ç ä¼šæŠ¥é”™</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, light);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ-self-å®é™…ä¸Šæ˜¯-self-Self-çš„ç¼©å†™æˆ–è€…è¯´è¯­æ³•ç³–"><a href="#3-ğŸŒŸğŸŒŸ-self-å®é™…ä¸Šæ˜¯-self-Self-çš„ç¼©å†™æˆ–è€…è¯´è¯­æ³•ç³–" class="headerlink" title="3.ğŸŒŸğŸŒŸ &amp;self å®é™…ä¸Šæ˜¯ self: &amp;Self çš„ç¼©å†™æˆ–è€…è¯´è¯­æ³•ç³–"></a>3.ğŸŒŸğŸŒŸ &amp;self å®é™…ä¸Šæ˜¯ self: &amp;Self çš„ç¼©å†™æˆ–è€…è¯´è¯­æ³•ç³–</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    color: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ `Self` å¡«ç©º</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_state</span>(__)  &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the current state is &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.color);<br>    &#125;<br><br>    <span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä½¿ç”¨ `Self` æˆ–å…¶å˜ä½“</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">change_state</span>(__) &#123;<br>        <span class="hljs-keyword">self</span>.color = <span class="hljs-string">&quot;green&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    color: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ `Self` å¡«ç©º</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_state</span>(<span class="hljs-keyword">self</span>: &amp;<span class="hljs-keyword">Self</span>)  &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the current state is &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.color);<br>    &#125;<br><br>    <span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä½¿ç”¨ `Self` æˆ–å…¶å˜ä½“</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">change_state</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-keyword">self</span>.color = <span class="hljs-string">&quot;green&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="Associated-function"><a href="#Associated-function" class="headerlink" title="Associated function"></a>Associated function</h2><h3 id="4-ğŸŒŸğŸŒŸ-å®šä¹‰åœ¨-impl-è¯­å¥å—ä¸­çš„å‡½æ•°è¢«ç§°ä¸ºå…³è”å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬è·Ÿå½“å‰ç±»å‹å…³è”åœ¨ä¸€èµ·ã€‚å…³è”å‡½æ•°ä¸æ–¹æ³•æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯-self-ï¼ŒåŸå› æ˜¯å®ƒä»¬ä¸éœ€è¦ä½¿ç”¨å½“å‰çš„å®ä¾‹ï¼Œå› æ­¤å…³è”å‡½æ•°å¾€å¾€å¯ä»¥ç”¨äºæ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚"><a href="#4-ğŸŒŸğŸŒŸ-å®šä¹‰åœ¨-impl-è¯­å¥å—ä¸­çš„å‡½æ•°è¢«ç§°ä¸ºå…³è”å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬è·Ÿå½“å‰ç±»å‹å…³è”åœ¨ä¸€èµ·ã€‚å…³è”å‡½æ•°ä¸æ–¹æ³•æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯-self-ï¼ŒåŸå› æ˜¯å®ƒä»¬ä¸éœ€è¦ä½¿ç”¨å½“å‰çš„å®ä¾‹ï¼Œå› æ­¤å…³è”å‡½æ•°å¾€å¾€å¯ä»¥ç”¨äºæ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚" class="headerlink" title="4.ğŸŒŸğŸŒŸ å®šä¹‰åœ¨ impl è¯­å¥å—ä¸­çš„å‡½æ•°è¢«ç§°ä¸ºå…³è”å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬è·Ÿå½“å‰ç±»å‹å…³è”åœ¨ä¸€èµ·ã€‚å…³è”å‡½æ•°ä¸æ–¹æ³•æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ self ï¼ŒåŸå› æ˜¯å®ƒä»¬ä¸éœ€è¦ä½¿ç”¨å½“å‰çš„å®ä¾‹ï¼Œå› æ­¤å…³è”å‡½æ•°å¾€å¾€å¯ä»¥ç”¨äºæ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚"></a>4.ğŸŒŸğŸŒŸ å®šä¹‰åœ¨ impl è¯­å¥å—ä¸­çš„å‡½æ•°è¢«ç§°ä¸ºå…³è”å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬è·Ÿå½“å‰ç±»å‹å…³è”åœ¨ä¸€èµ·ã€‚å…³è”å‡½æ•°ä¸æ–¹æ³•æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å®ƒç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ self ï¼ŒåŸå› æ˜¯å®ƒä»¬ä¸éœ€è¦ä½¿ç”¨å½“å‰çš„å®ä¾‹ï¼Œå› æ­¤å…³è”å‡½æ•°å¾€å¾€å¯ä»¥ç”¨äºæ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    color: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    <span class="hljs-comment">// 1. å®ç°ä¸‹é¢çš„å…³è”å‡½æ•° `new`,</span><br>    <span class="hljs-comment">// 2. è¯¥å‡½æ•°è¿”å›ä¸€ä¸ª TrafficLight å®ä¾‹ï¼ŒåŒ…å« `color` &quot;red&quot;</span><br>    <span class="hljs-comment">// 3. è¯¥å‡½æ•°å¿…é¡»ä½¿ç”¨ `Self` ä½œä¸ºç±»å‹ï¼Œä¸èƒ½åœ¨ç­¾åæˆ–è€…å‡½æ•°ä½“ä¸­ä½¿ç”¨ `TrafficLight`</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>()<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_state</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>        &amp;<span class="hljs-keyword">self</span>.color<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">light</span> = TrafficLight::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(light.<span class="hljs-title function_ invoke__">get_state</span>(), <span class="hljs-string">&quot;red&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    color: <span class="hljs-type">String</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLight</span> &#123;<br>    <span class="hljs-comment">// 1. å®ç°ä¸‹é¢çš„å…³è”å‡½æ•° `new`,</span><br>    <span class="hljs-comment">// 2. è¯¥å‡½æ•°è¿”å›ä¸€ä¸ª TrafficLight å®ä¾‹ï¼ŒåŒ…å« `color` &quot;red&quot;</span><br>    <span class="hljs-comment">// 3. è¯¥å‡½æ•°å¿…é¡»ä½¿ç”¨ `Self` ä½œä¸ºç±»å‹ï¼Œä¸èƒ½åœ¨ç­¾åæˆ–è€…å‡½æ•°ä½“ä¸­ä½¿ç”¨ `TrafficLight`</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        <span class="hljs-keyword">Self</span> &#123;<br>            color: <span class="hljs-string">&quot;red&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_state</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>        &amp;<span class="hljs-keyword">self</span>.color<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">light</span> = TrafficLight::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-built_in">assert_eq!</span>(light.<span class="hljs-title function_ invoke__">get_state</span>(), <span class="hljs-string">&quot;red&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¤šä¸ª-impl-è¯­å¥å—"><a href="#å¤šä¸ª-impl-è¯­å¥å—" class="headerlink" title="å¤šä¸ª impl è¯­å¥å—"></a>å¤šä¸ª impl è¯­å¥å—</h2><h3 id="5-ğŸŒŸ-æ¯ä¸€ä¸ªç»“æ„ä½“å…è®¸æ‹¥æœ‰å¤šä¸ª-impl-è¯­å¥å—"><a href="#5-ğŸŒŸ-æ¯ä¸€ä¸ªç»“æ„ä½“å…è®¸æ‹¥æœ‰å¤šä¸ª-impl-è¯­å¥å—" class="headerlink" title="5.ğŸŒŸ æ¯ä¸€ä¸ªç»“æ„ä½“å…è®¸æ‹¥æœ‰å¤šä¸ª impl è¯­å¥å—"></a>5.ğŸŒŸ æ¯ä¸€ä¸ªç»“æ„ä½“å…è®¸æ‹¥æœ‰å¤šä¸ª impl è¯­å¥å—</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    height: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨å¤šä¸ª `impl` è¯­å¥å—é‡å†™ä¸‹é¢çš„ä»£ç </span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">self</span>.width * <span class="hljs-keyword">self</span>.height<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">can_hold</span>(&amp;<span class="hljs-keyword">self</span>, other: &amp;Rectangle) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-keyword">self</span>.width &gt; other.width &amp;&amp; <span class="hljs-keyword">self</span>.height &gt; other.height<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    height: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨å¤šä¸ª `impl` è¯­å¥å—é‡å†™ä¸‹é¢çš„ä»£ç </span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">self</span>.width * <span class="hljs-keyword">self</span>.height<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">can_hold</span>(&amp;<span class="hljs-keyword">self</span>, other: &amp;Rectangle) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-keyword">self</span>.width &gt; other.width &amp;&amp; <span class="hljs-keyword">self</span>.height &gt; other.height<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="Enums"><a href="#Enums" class="headerlink" title="Enums"></a>Enums</h2><h3 id="6-ğŸŒŸğŸŒŸğŸŒŸ-æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæšä¸¾ç±»å‹å®šä¹‰æ–¹æ³•"><a href="#6-ğŸŒŸğŸŒŸğŸŒŸ-æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæšä¸¾ç±»å‹å®šä¹‰æ–¹æ³•" class="headerlink" title="6.ğŸŒŸğŸŒŸğŸŒŸ æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæšä¸¾ç±»å‹å®šä¹‰æ–¹æ³•"></a>6.ğŸŒŸğŸŒŸğŸŒŸ æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæšä¸¾ç±»å‹å®šä¹‰æ–¹æ³•</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">TrafficLightColor</span> &#123;<br>    Red,<br>    Yellow,<br>    Green,<br>&#125;<br><br><span class="hljs-comment">// ä¸º TrafficLightColor å®ç°æ‰€éœ€çš„æ–¹æ³•</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLightColor</span> &#123;<br><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c</span> = TrafficLightColor::Yellow;<br><br>    <span class="hljs-built_in">assert_eq!</span>(c.<span class="hljs-title function_ invoke__">color</span>(), <span class="hljs-string">&quot;yellow&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>,c);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">TrafficLightColor</span> &#123;<br>    Red,<br>    Yellow,<br>    Green,<br>&#125;<br><br><span class="hljs-comment">// ä¸º TrafficLightColor å®ç°æ‰€éœ€çš„æ–¹æ³•</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TrafficLightColor</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">color</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            TrafficLightColor::Red =&gt; <span class="hljs-string">&quot;red&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>            TrafficLightColor::Yellow =&gt; <span class="hljs-string">&quot;yellow&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(),<br>            TrafficLightColor::Green =&gt; <span class="hljs-string">&quot;green&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c</span> = TrafficLightColor::Yellow;<br><br>    <span class="hljs-built_in">assert_eq!</span>(c.<span class="hljs-title function_ invoke__">color</span>(), <span class="hljs-string">&quot;yellow&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>,c);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ç¤ºä¾‹&quot;&gt;&lt;a href=&quot;#ç¤ºä¾‹&quot; class=&quot;headerlink&quot; title=&quot;ç¤ºä¾‹&quot;&gt;&lt;/a&gt;ç¤ºä¾‹&lt;/h3&gt;&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span c</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>8.2.æ¨¡å¼</title>
    <link href="https://lilinzta.github.io/2023/08/16/8-2-%E6%A8%A1%E5%BC%8F/"/>
    <id>https://lilinzta.github.io/2023/08/16/8-2-%E6%A8%A1%E5%BC%8F/</id>
    <published>2023-08-16T12:30:09.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ğŸŒŸğŸŒŸ-ä½¿ç”¨-å¯ä»¥åŒ¹é…å¤šä¸ªå€¼-è€Œä½¿ç”¨-å¯ä»¥åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—"><a href="#1-ğŸŒŸğŸŒŸ-ä½¿ç”¨-å¯ä»¥åŒ¹é…å¤šä¸ªå€¼-è€Œä½¿ç”¨-å¯ä»¥åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—" class="headerlink" title="1.ğŸŒŸğŸŒŸ ä½¿ç”¨ | å¯ä»¥åŒ¹é…å¤šä¸ªå€¼, è€Œä½¿ç”¨ ..&#x3D; å¯ä»¥åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—"></a>1.ğŸŒŸğŸŒŸ ä½¿ç”¨ | å¯ä»¥åŒ¹é…å¤šä¸ªå€¼, è€Œä½¿ç”¨ ..&#x3D; å¯ä»¥åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">match_number</span>(n: <span class="hljs-type">i32</span>) &#123;<br>    <span class="hljs-keyword">match</span> n &#123;<br>        <span class="hljs-comment">// åŒ¹é…ä¸€ä¸ªå•ç‹¬çš„å€¼</span><br>        <span class="hljs-number">1</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One!&quot;</span>),<br>        <span class="hljs-comment">// ä½¿ç”¨ `|` å¡«ç©ºï¼Œä¸è¦ä½¿ç”¨ `..` æˆ– `..=`</span><br>        __ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match 2 -&gt; 5&quot;</span>),<br>        <span class="hljs-comment">// åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—</span><br>        <span class="hljs-number">6</span>..=<span class="hljs-number">10</span> =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match 6 -&gt; 10&quot;</span>)<br>        &#125;,<br>        _ =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match 11 -&gt; +infinite&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">match_number</span>(n: <span class="hljs-type">i32</span>) &#123;<br>    <span class="hljs-keyword">match</span> n &#123;<br>        <span class="hljs-comment">// åŒ¹é…ä¸€ä¸ªå•ç‹¬çš„å€¼</span><br>        <span class="hljs-number">1</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;One!&quot;</span>),<br>        <span class="hljs-comment">// ä½¿ç”¨ `|` å¡«ç©ºï¼Œä¸è¦ä½¿ç”¨ `..` æˆ– `..=`</span><br>        <span class="hljs-number">2</span> | <span class="hljs-number">3</span> | <span class="hljs-number">4</span> | <span class="hljs-number">5</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match 2 -&gt; 5&quot;</span>),<br>        <span class="hljs-comment">// åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—</span><br>        <span class="hljs-number">6</span>..=<span class="hljs-number">10</span> =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match 6 -&gt; 10&quot;</span>)<br>        &#125;,<br>        _ =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match 11 -&gt; +infinite&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸğŸŒŸ-æ“ä½œç¬¦å¯ä»¥è®©æˆ‘ä»¬å°†ä¸€ä¸ªä¸æ¨¡å¼ç›¸åŒ¹é…çš„å€¼ç»‘å®šåˆ°æ–°çš„å˜é‡ä¸Š"><a href="#2-ğŸŒŸğŸŒŸğŸŒŸ-æ“ä½œç¬¦å¯ä»¥è®©æˆ‘ä»¬å°†ä¸€ä¸ªä¸æ¨¡å¼ç›¸åŒ¹é…çš„å€¼ç»‘å®šåˆ°æ–°çš„å˜é‡ä¸Š" class="headerlink" title="2.ğŸŒŸğŸŒŸğŸŒŸ @ æ“ä½œç¬¦å¯ä»¥è®©æˆ‘ä»¬å°†ä¸€ä¸ªä¸æ¨¡å¼ç›¸åŒ¹é…çš„å€¼ç»‘å®šåˆ°æ–°çš„å˜é‡ä¸Š"></a>2.ğŸŒŸğŸŒŸğŸŒŸ @ æ“ä½œç¬¦å¯ä»¥è®©æˆ‘ä»¬å°†ä¸€ä¸ªä¸æ¨¡å¼ç›¸åŒ¹é…çš„å€¼ç»‘å®šåˆ°æ–°çš„å˜é‡ä¸Š</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">i32</span>,<br>    y: <span class="hljs-type">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œè®© p åŒ¹é…ç¬¬äºŒä¸ªåˆ†æ”¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Point &#123; x: __, y: __ &#125;;<br><br>    <span class="hljs-keyword">match</span> p &#123;<br>        Point &#123; x, y: <span class="hljs-number">0</span> &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;On the x axis at &#123;&#125;&quot;</span>, x),<br>        <span class="hljs-comment">// ç¬¬äºŒä¸ªåˆ†æ”¯</span><br>        Point &#123; x: <span class="hljs-number">0</span>..=<span class="hljs-number">5</span>, y: y@ (<span class="hljs-number">10</span> | <span class="hljs-number">20</span> | <span class="hljs-number">30</span>) &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;On the y axis at &#123;&#125;&quot;</span>, y),<br>        Point &#123; x, y &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;On neither axis: (&#123;&#125;, &#123;&#125;)&quot;</span>, x, y),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">i32</span>,<br>    y: <span class="hljs-type">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œè®© p åŒ¹é…ç¬¬äºŒä¸ªåˆ†æ”¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Point &#123; x: <span class="hljs-number">0</span>, y: <span class="hljs-number">10</span> &#125;;<br><br>    <span class="hljs-keyword">match</span> p &#123;<br>        Point &#123; x, y: <span class="hljs-number">0</span> &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;On the x axis at &#123;&#125;&quot;</span>, x),<br>        <span class="hljs-comment">// ç¬¬äºŒä¸ªåˆ†æ”¯</span><br>        Point &#123; x: <span class="hljs-number">0</span>..=<span class="hljs-number">5</span>, y: y@ (<span class="hljs-number">10</span> | <span class="hljs-number">20</span> | <span class="hljs-number">30</span>) &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;On the y axis at &#123;&#125;&quot;</span>, y),<br>        Point &#123; x, y &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;On neither axis: (&#123;&#125;, &#123;&#125;)&quot;</span>, x, y),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Hello &#123; id: <span class="hljs-type">i32</span> &#125;,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg</span> = Message::Hello &#123; id: <span class="hljs-number">5</span> &#125;;<br><br>    <span class="hljs-keyword">match</span> msg &#123;<br>        Message::Hello &#123;<br>            id:  <span class="hljs-number">3</span>..=<span class="hljs-number">7</span>,<br>        &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;id å€¼çš„èŒƒå›´åœ¨ [3, 7] ä¹‹é—´: &#123;&#125;&quot;</span>, id),<br>        Message::Hello &#123; id: newid@<span class="hljs-number">10</span> | <span class="hljs-number">11</span> | <span class="hljs-number">12</span> &#125; =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;id å€¼çš„èŒƒå›´åœ¨ [10, 12] ä¹‹é—´: &#123;&#125;&quot;</span>, newid)<br>        &#125;<br>        Message::Hello &#123; id &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Found some other id: &#123;&#125;&quot;</span>, id),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Hello &#123; id: <span class="hljs-type">i32</span> &#125;,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg</span> = Message::Hello &#123; id: <span class="hljs-number">5</span> &#125;;<br><br>    <span class="hljs-keyword">match</span> msg &#123;<br>        Message::Hello &#123;<br>            id: id@<span class="hljs-number">3</span>..=<span class="hljs-number">7</span>,<br>        &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;id å€¼çš„èŒƒå›´åœ¨ [3, 7] ä¹‹é—´: &#123;&#125;&quot;</span>, id),<br>        Message::Hello &#123; id: newid@(<span class="hljs-number">10</span> | <span class="hljs-number">11</span> | <span class="hljs-number">12</span>) &#125; =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;id å€¼çš„èŒƒå›´åœ¨ [10, 12] ä¹‹é—´: &#123;&#125;&quot;</span>, newid)<br>        &#125;<br>        Message::Hello &#123; id &#125; =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Found some other id: &#123;&#125;&quot;</span>, id),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ-åŒ¹é…å®ˆå«ï¼ˆmatch-guardï¼‰æ˜¯ä¸€ä¸ªä½äº-match-åˆ†æ”¯æ¨¡å¼ä¹‹åçš„é¢å¤–-if-æ¡ä»¶ï¼Œå®ƒèƒ½ä¸ºåˆ†æ”¯æ¨¡å¼æä¾›æ›´è¿›ä¸€æ­¥çš„åŒ¹é…æ¡ä»¶ã€‚"><a href="#4-ğŸŒŸğŸŒŸ-åŒ¹é…å®ˆå«ï¼ˆmatch-guardï¼‰æ˜¯ä¸€ä¸ªä½äº-match-åˆ†æ”¯æ¨¡å¼ä¹‹åçš„é¢å¤–-if-æ¡ä»¶ï¼Œå®ƒèƒ½ä¸ºåˆ†æ”¯æ¨¡å¼æä¾›æ›´è¿›ä¸€æ­¥çš„åŒ¹é…æ¡ä»¶ã€‚" class="headerlink" title="4.ğŸŒŸğŸŒŸ åŒ¹é…å®ˆå«ï¼ˆmatch guardï¼‰æ˜¯ä¸€ä¸ªä½äº match åˆ†æ”¯æ¨¡å¼ä¹‹åçš„é¢å¤– if æ¡ä»¶ï¼Œå®ƒèƒ½ä¸ºåˆ†æ”¯æ¨¡å¼æä¾›æ›´è¿›ä¸€æ­¥çš„åŒ¹é…æ¡ä»¶ã€‚"></a>4.ğŸŒŸğŸŒŸ åŒ¹é…å®ˆå«ï¼ˆmatch guardï¼‰æ˜¯ä¸€ä¸ªä½äº match åˆ†æ”¯æ¨¡å¼ä¹‹åçš„é¢å¤– if æ¡ä»¶ï¼Œå®ƒèƒ½ä¸ºåˆ†æ”¯æ¨¡å¼æä¾›æ›´è¿›ä¸€æ­¥çš„åŒ¹é…æ¡ä»¶ã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºè®©ä»£ç å·¥ä½œï¼Œå¿…é¡»ä½¿ç”¨ `split`</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">4</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">split</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">match</span> num &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(x) __ =&gt; <span class="hljs-built_in">assert!</span>(x &lt; split),<br>        <span class="hljs-title function_ invoke__">Some</span>(x) =&gt; <span class="hljs-built_in">assert!</span>(x &gt;= split),<br>        <span class="hljs-literal">None</span> =&gt; (),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºè®©ä»£ç å·¥ä½œï¼Œå¿…é¡»ä½¿ç”¨ `split`</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">4</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">split</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">match</span> num &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(x) <span class="hljs-keyword">if</span> x &lt; split =&gt; <span class="hljs-built_in">assert!</span>(x &lt; split),<br>        <span class="hljs-title function_ invoke__">Some</span>(x) =&gt; <span class="hljs-built_in">assert!</span>(x &gt;= split),<br>        <span class="hljs-literal">None</span> =&gt; (),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸğŸŒŸ-ä½¿ç”¨-å¿½ç•¥ä¸€éƒ¨åˆ†å€¼"><a href="#5-ğŸŒŸğŸŒŸğŸŒŸ-ä½¿ç”¨-å¿½ç•¥ä¸€éƒ¨åˆ†å€¼" class="headerlink" title="5.ğŸŒŸğŸŒŸğŸŒŸ ä½¿ç”¨ .. å¿½ç•¥ä¸€éƒ¨åˆ†å€¼"></a>5.ğŸŒŸğŸŒŸğŸŒŸ ä½¿ç”¨ .. å¿½ç•¥ä¸€éƒ¨åˆ†å€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">numbers</span> = (<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>, <span class="hljs-number">256</span>, <span class="hljs-number">512</span>, <span class="hljs-number">1024</span>, <span class="hljs-number">2048</span>);<br><br>    <span class="hljs-keyword">match</span> numbers &#123;<br>        __ =&gt; &#123;<br>           <span class="hljs-built_in">assert_eq!</span>(first, <span class="hljs-number">2</span>);<br>           <span class="hljs-built_in">assert_eq!</span>(last, <span class="hljs-number">2048</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">numbers</span> = (<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>, <span class="hljs-number">256</span>, <span class="hljs-number">512</span>, <span class="hljs-number">1024</span>, <span class="hljs-number">2048</span>);<br><br>    <span class="hljs-keyword">match</span> numbers &#123;<br>        (first, .., last) =&gt; &#123;<br>           <span class="hljs-built_in">assert_eq!</span>(first, <span class="hljs-number">2</span>);<br>           <span class="hljs-built_in">assert_eq!</span>(last, <span class="hljs-number">2048</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸ-ä½¿ç”¨æ¨¡å¼-mut-V-å»åŒ¹é…ä¸€ä¸ªå¯å˜å¼•ç”¨æ—¶ï¼Œä½ éœ€è¦æ ¼å¤–å°å¿ƒï¼Œå› ä¸ºåŒ¹é…å‡ºæ¥çš„-V-æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯å¯å˜å¼•ç”¨"><a href="#6-ğŸŒŸğŸŒŸ-ä½¿ç”¨æ¨¡å¼-mut-V-å»åŒ¹é…ä¸€ä¸ªå¯å˜å¼•ç”¨æ—¶ï¼Œä½ éœ€è¦æ ¼å¤–å°å¿ƒï¼Œå› ä¸ºåŒ¹é…å‡ºæ¥çš„-V-æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯å¯å˜å¼•ç”¨" class="headerlink" title="6.ğŸŒŸğŸŒŸ ä½¿ç”¨æ¨¡å¼ &amp;mut V å»åŒ¹é…ä¸€ä¸ªå¯å˜å¼•ç”¨æ—¶ï¼Œä½ éœ€è¦æ ¼å¤–å°å¿ƒï¼Œå› ä¸ºåŒ¹é…å‡ºæ¥çš„ V æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯å¯å˜å¼•ç”¨"></a>6.ğŸŒŸğŸŒŸ ä½¿ç”¨æ¨¡å¼ &amp;mut V å»åŒ¹é…ä¸€ä¸ªå¯å˜å¼•ç”¨æ—¶ï¼Œä½ éœ€è¦æ ¼å¤–å°å¿ƒï¼Œå› ä¸ºåŒ¹é…å‡ºæ¥çš„ V æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯å¯å˜å¼•ç”¨</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œå°½é‡å°‘åœ°ä¿®æ”¹ä»£ç </span><br><span class="hljs-comment">// ä¸è¦ç§»é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello,&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r</span> = &amp;<span class="hljs-keyword">mut</span> v;<br><br>    <span class="hljs-keyword">match</span> r &#123;<br>       &amp;<span class="hljs-keyword">mut</span> value =&gt; value.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot; world!&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œå°½é‡å°‘åœ°ä¿®æ”¹ä»£ç </span><br><span class="hljs-comment">// ä¸è¦ç§»é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello,&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r</span> = &amp;<span class="hljs-keyword">mut</span> v;<br><br>    <span class="hljs-keyword">match</span> r &#123;<br>       value =&gt; value.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot; world!&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ğŸŒŸğŸŒŸ-ä½¿ç”¨-å¯ä»¥åŒ¹é…å¤šä¸ªå€¼-è€Œä½¿ç”¨-å¯ä»¥åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸğŸŒŸ-ä½¿ç”¨-å¯ä»¥åŒ¹é…å¤šä¸ªå€¼-è€Œä½¿ç”¨-å¯ä»¥åŒ¹é…ä¸€ä¸ªé—­åŒºé—´çš„æ•°å€¼åºåˆ—&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸğŸŒŸ ä½¿ç”¨ | å¯ä»¥åŒ¹é…å¤šä¸ªå€¼,</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>Desktop Cube</title>
    <link href="https://lilinzta.github.io/2023/08/16/Desktop-Cube/"/>
    <id>https://lilinzta.github.io/2023/08/16/Desktop-Cube/</id>
    <published>2023-08-16T01:00:45.000Z</published>
    <updated>2024-01-17T15:05:42.365Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ"><a href="#è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ" class="headerlink" title="è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ"></a>è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ</h1><span id="more"></span><p><a href="https://github.com/zzag/kwin-effects-cube">KDE</a><br><a href="https://github.com/Schneegans/Desktop-Cube">GNOME</a></p><p>å¥½åƒGNOMEçš„å¯ç©æ€§æ›´é«˜ä¸€ç‚¹(ä»…æŒ‡è¿™ä¸ªæ‰©å±•)ï¼Œæ”¹å¤©è¯•è¯•Debian+GNOMEã€‚</p><h3 id="Install-for-KDE-and-â€¦"><a href="#Install-for-KDE-and-â€¦" class="headerlink" title="Install for KDE and â€¦"></a>Install for KDE and â€¦</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yay -S kwin-effects-cube<br></code></pre></td></tr></table></figure><p>å®‰è£…å®Œåä¾æ¬¡ç‚¹å‡» <code>å·¥ä½œåŒºè¡Œä¸º -&gt; æ¡Œé¢ç‰¹æ•ˆ -&gt; Cube</code> è¿›è¡Œè®¾ç½®</p><h3 id="Show"><a href="#Show" class="headerlink" title="Show"></a>Show</h3><video id="video" width="100%" height="100%" controls="" preload="none" poster="/res/post/Desktop-Cube/Desktop-Cube.jpg">      <source id="show" src="/res/post/Desktop-Cube/Desktop-Cube.mp4" type="video/mp4"></videos>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ&quot;&gt;&lt;a href=&quot;#è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ&quot; class=&quot;headerlink&quot; title=&quot;è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ&quot;&gt;&lt;/a&gt;è™šæ‹Ÿæ¡Œé¢åˆ‡æ¢ç‰¹æ•ˆ&lt;/h1&gt;</summary>
    
    
    
    
    <category term="KDE" scheme="https://lilinzta.github.io/tags/KDE/"/>
    
  </entry>
  
  <entry>
    <title>Neovim Switcher</title>
    <link href="https://lilinzta.github.io/2023/08/15/Neovim-Switcher/"/>
    <id>https://lilinzta.github.io/2023/08/15/Neovim-Switcher/</id>
    <published>2023-08-15T05:36:46.000Z</published>
    <updated>2024-01-20T12:10:06.528Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢"><a href="#åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢" class="headerlink" title="åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢"></a>åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢</h1><span id="more"></span><blockquote><p><a href="https://www.youtube.com/watch?v=LkHjJlSgKZY">è§†é¢‘ä»‹ç»åœ¨è¿™é‡Œ</a></p></blockquote><blockquote><p><a href="https://gist.github.com/elijahmanor/b279553c0132bfad7eae23e34ceb593b">ä¸å–œæ¬¢çœ‹è§†é¢‘?</a></p></blockquote><p>zshç”¨æˆ·åœ¨.zshrcåŠ å…¥ä»¥ä¸‹é…ç½®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">alias</span> nvim-lazy=<span class="hljs-string">&quot;NVIM_APPNAME=LazyVim nvim&quot;</span><br><span class="hljs-built_in">alias</span> nvim-kick=<span class="hljs-string">&quot;NVIM_APPNAME=kickstart nvim&quot;</span><br><span class="hljs-built_in">alias</span> nvim-chad=<span class="hljs-string">&quot;NVIM_APPNAME=NvChad nvim&quot;</span><br><span class="hljs-built_in">alias</span> nvim-astro=<span class="hljs-string">&quot;NVIM_APPNAME=AstroNvim nvim&quot;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">nvims</span></span>() &#123;<br>  items=(<span class="hljs-string">&quot;default&quot;</span> <span class="hljs-string">&quot;kickstart&quot;</span> <span class="hljs-string">&quot;LazyVim&quot;</span> <span class="hljs-string">&quot;NvChad&quot;</span> <span class="hljs-string">&quot;AstroNvim&quot;</span>)<br>  config=$(<span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%s\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;items[@]&#125;</span>&quot;</span> | fzf --prompt=<span class="hljs-string">&quot;î˜« Neovim Config â¯ &quot;</span> --height=~50% --layout=reverse --border --exit-0)<br>  <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$config</span> ]]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Nothing selected&quot;</span><br>    <span class="hljs-built_in">return</span> 0<br>  <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$config</span> == <span class="hljs-string">&quot;default&quot;</span> ]]; <span class="hljs-keyword">then</span><br>    config=<span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-keyword">fi</span><br>  NVIM_APPNAME=<span class="hljs-variable">$config</span> nvim <span class="hljs-variable">$@</span><br>&#125;<br><br><span class="hljs-built_in">bindkey</span> -s ^a <span class="hljs-string">&quot;nvims\n&quot;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨gitæ¥ç®¡ç†ä¼¼ä¹ä¼šå¾ˆæœ‰æ„æ€ï¼Œå¯æƒœæˆ‘gitå¤ªçƒ‚ï¼Œæ”¹å¤©å†é€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢&quot;&gt;&lt;a href=&quot;#åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢&quot; class=&quot;headerlink&quot; title=&quot;åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢&quot;&gt;&lt;/a&gt;åœ¨å¤šç§Neovimeé…ç½®ä¹‹é—´æ— ç¼åˆ‡æ¢&lt;/h1&gt;</summary>
    
    
    
    
    <category term="Neovim" scheme="https://lilinzta.github.io/tags/Neovim/"/>
    
  </entry>
  
  <entry>
    <title>8.1.match,matches! å’Œ if let</title>
    <link href="https://lilinzta.github.io/2023/08/14/8-1-match-matches-%E5%92%8C-if-let/"/>
    <id>https://lilinzta.github.io/2023/08/14/8-1-match-matches-%E5%92%8C-if-let/</id>
    <published>2023-08-14T13:44:14.000Z</published>
    <updated>2024-01-20T11:37:02.754Z</updated>
    
    <content type="html"><![CDATA[<h2 id="match"><a href="#match" class="headerlink" title="match"></a>match</h2><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Direction</span> &#123;<br>    East,<br>    West,<br>    North,<br>    South,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">dire</span> = Direction::South;<br>    <span class="hljs-keyword">match</span> dire &#123;<br>        Direction::East =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;East&quot;</span>),<br>        __  =&gt; &#123; <span class="hljs-comment">// åœ¨è¿™é‡ŒåŒ¹é… South æˆ– North</span><br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;South or North&quot;</span>);<br>        &#125;,<br>        _ =&gt; <span class="hljs-built_in">println!</span>(__),<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Direction</span> &#123;<br>    East,<br>    West,<br>    North,<br>    South,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">dire</span> = Direction::South;<br>    <span class="hljs-keyword">match</span> dire &#123;<br>        Direction::East =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;East&quot;</span>),<br>        Direction::South | Direction::North  =&gt; &#123; <span class="hljs-comment">// åœ¨è¿™é‡ŒåŒ¹é… South æˆ– North</span><br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;South or North&quot;</span>);<br>        &#125;,<br>        _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;West&quot;</span>),<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-match-æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤å¯ä»¥ç”¨åœ¨èµ‹å€¼è¯­å¥ä¸­"><a href="#2-ğŸŒŸğŸŒŸ-match-æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤å¯ä»¥ç”¨åœ¨èµ‹å€¼è¯­å¥ä¸­" class="headerlink" title="2.ğŸŒŸğŸŒŸ match æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤å¯ä»¥ç”¨åœ¨èµ‹å€¼è¯­å¥ä¸­"></a>2.ğŸŒŸğŸŒŸ match æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤å¯ä»¥ç”¨åœ¨èµ‹å€¼è¯­å¥ä¸­</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">boolean</span> = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ match è¡¨è¾¾å¼å¡«ç©ºï¼Œå¹¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶</span><br>    <span class="hljs-comment">//</span><br>    <span class="hljs-comment">// boolean = true =&gt; binary = 1</span><br>    <span class="hljs-comment">// boolean = false =&gt; binary = 0</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">binary</span> = __;<br><br>    <span class="hljs-built_in">assert_eq!</span>(binary, <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">boolean</span> = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-comment">// ä½¿ç”¨ match è¡¨è¾¾å¼å¡«ç©ºï¼Œå¹¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶</span><br>    <span class="hljs-comment">//</span><br>    <span class="hljs-comment">// boolean = true =&gt; binary = 1</span><br>    <span class="hljs-comment">// boolean = false =&gt; binary = 0</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">binary</span> = <span class="hljs-keyword">match</span> boolean &#123;<br>        <span class="hljs-literal">true</span> =&gt; <span class="hljs-number">1</span>,<br>        <span class="hljs-literal">false</span> =&gt; <span class="hljs-number">0</span><br>    &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(binary, <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ-ä½¿ç”¨-match-åŒ¹é…å‡ºæšä¸¾æˆå‘˜æŒæœ‰çš„å€¼"><a href="#3-ğŸŒŸğŸŒŸ-ä½¿ç”¨-match-åŒ¹é…å‡ºæšä¸¾æˆå‘˜æŒæœ‰çš„å€¼" class="headerlink" title="3.ğŸŒŸğŸŒŸ ä½¿ç”¨ match åŒ¹é…å‡ºæšä¸¾æˆå‘˜æŒæœ‰çš„å€¼"></a>3.ğŸŒŸğŸŒŸ ä½¿ç”¨ match åŒ¹é…å‡ºæšä¸¾æˆå‘˜æŒæœ‰çš„å€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msgs</span> = [<br>        Message::Quit,<br>        Message::Move&#123;x:<span class="hljs-number">1</span>, y:<span class="hljs-number">3</span>&#125;,<br>        Message::<span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)<br>    ];<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">msg</span> <span class="hljs-keyword">in</span> msgs &#123;<br>        <span class="hljs-title function_ invoke__">show_message</span>(msg)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_message</span>(msg: Message) &#123;<br>    <span class="hljs-keyword">match</span> msg &#123;<br>        __ =&gt; &#123; <span class="hljs-comment">// è¿™é‡ŒåŒ¹é… Message::Move</span><br>            <span class="hljs-built_in">assert_eq!</span>(a, <span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">assert_eq!</span>(b, <span class="hljs-number">3</span>);<br>        &#125;,<br>        Message::<span class="hljs-title function_ invoke__">ChangeColor</span>(_, g, b) =&gt; &#123;<br>            <span class="hljs-built_in">assert_eq!</span>(g, __);<br>            <span class="hljs-built_in">assert_eq!</span>(b, __);<br>        &#125;<br>        __ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;no data in these variants&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msgs</span> = [<br>        Message::Quit,<br>        Message::Move&#123;x:<span class="hljs-number">1</span>, y:<span class="hljs-number">3</span>&#125;,<br>        Message::<span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)<br>    ];<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">msg</span> <span class="hljs-keyword">in</span> msgs &#123;<br>        <span class="hljs-title function_ invoke__">show_message</span>(msg)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_message</span>(msg: Message) &#123;<br>    <span class="hljs-keyword">match</span> msg &#123;<br>        Message::Move&#123;x: a, y: b&#125; =&gt; &#123; <span class="hljs-comment">// è¿™é‡ŒåŒ¹é… Message::Move</span><br>            <span class="hljs-built_in">assert_eq!</span>(a, <span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">assert_eq!</span>(b, <span class="hljs-number">3</span>);<br>        &#125;,<br>        Message::<span class="hljs-title function_ invoke__">ChangeColor</span>(_, g, b) =&gt; &#123;<br>            <span class="hljs-built_in">assert_eq!</span>(g, <span class="hljs-number">255</span>);<br>            <span class="hljs-built_in">assert_eq!</span>(b, <span class="hljs-number">0</span>);<br>        &#125;<br>        _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;no data in these variants&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="matches"><a href="#matches" class="headerlink" title="matches!"></a>matches!</h2><p>matches! çœ‹èµ·æ¥åƒ match, ä½†æ˜¯å®ƒå¯ä»¥åšä¸€äº›ç‰¹åˆ«çš„äº‹æƒ…</p><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">alphabets</span> = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;Z&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span> , <span class="hljs-string">&#x27;Y&#x27;</span>];<br><br>    <span class="hljs-comment">// ä½¿ç”¨ `matches` å¡«ç©º</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">ab</span> <span class="hljs-keyword">in</span> alphabets &#123;<br>        <span class="hljs-built_in">assert!</span>(__)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">alphabets</span> = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;Z&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span> , <span class="hljs-string">&#x27;Y&#x27;</span>];<br><br>    <span class="hljs-comment">// ä½¿ç”¨ `matches` å¡«ç©º</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">ab</span> <span class="hljs-keyword">in</span> alphabets &#123;<br>        <span class="hljs-built_in">assert!</span>(matches!(ab, <span class="hljs-string">&#x27;a&#x27;</span>..=<span class="hljs-string">&#x27;z&#x27;</span> | <span class="hljs-string">&#x27;A&#x27;</span>..=<span class="hljs-string">&#x27;Z&#x27;</span> | <span class="hljs-string">&#x27;0&#x27;</span>..=<span class="hljs-string">&#x27;9&#x27;</span>))<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyEnum</span> &#123;<br>    Foo,<br>    Bar<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[MyEnum::Foo,MyEnum::Bar,MyEnum::Foo];<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">e</span> <span class="hljs-keyword">in</span> v &#123;<br>        <span class="hljs-keyword">if</span> e == MyEnum::Foo &#123; <span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œåªèƒ½ä¿®æ”¹æœ¬è¡Œä»£ç </span><br>            count += <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(count, <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyEnum</span> &#123;<br>    Foo,<br>    Bar<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[MyEnum::Foo,MyEnum::Bar,MyEnum::Foo];<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">e</span> <span class="hljs-keyword">in</span> v &#123;<br>        <span class="hljs-keyword">if</span> matches!(e, MyEnum::Foo) &#123; <span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œåªèƒ½ä¿®æ”¹æœ¬è¡Œä»£ç </span><br>            count += <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(count, <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="if-let"><a href="#if-let" class="headerlink" title="if let"></a>if let</h2><p>åœ¨æœ‰äº›æ—¶å€™, ä½¿ç”¨ match åŒ¹é…æšä¸¾æœ‰äº›å¤ªé‡äº†ï¼Œæ­¤æ—¶ if let å°±éå¸¸é€‚åˆ.</p><h3 id="6-ğŸŒŸ"><a href="#6-ğŸŒŸ" class="headerlink" title="6.ğŸŒŸ"></a>6.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">o</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">7</span>);<br><br>    <span class="hljs-comment">// ç§»é™¤æ•´ä¸ª `match` è¯­å¥å—ï¼Œä½¿ç”¨ `if let` æ›¿ä»£</span><br>    <span class="hljs-keyword">match</span> o &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(i) =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;This is a really long string and `&#123;:?&#125;`&quot;</span>, i);<br>        &#125;<br>        _ =&gt; &#123;&#125;<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">o</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">7</span>);<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(i) = o &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;This is a really long string and `&#123;:?&#125;`&quot;</span>, i);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-ğŸŒŸğŸŒŸ"><a href="#7-ğŸŒŸğŸŒŸ" class="headerlink" title="7.ğŸŒŸğŸŒŸ"></a>7.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-title function_ invoke__">Bar</span>(<span class="hljs-type">u8</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = Foo::<span class="hljs-title function_ invoke__">Bar</span>(<span class="hljs-number">1</span>);<br><br>    __ &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;foobar æŒæœ‰çš„å€¼æ˜¯: &#123;&#125;&quot;</span>, i);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Foo</span> &#123;<br>    <span class="hljs-title function_ invoke__">Bar</span>(<span class="hljs-type">u8</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = Foo::<span class="hljs-title function_ invoke__">Bar</span>(<span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Foo</span>::<span class="hljs-title function_ invoke__">Bar</span>(i) = a &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;foobar æŒæœ‰çš„å€¼æ˜¯: &#123;&#125;&quot;</span>, i);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ"><a href="#8-ğŸŒŸğŸŒŸ" class="headerlink" title="8.ğŸŒŸğŸŒŸ"></a>8.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Foo</span> &#123;<br>    Bar,<br>    Baz,<br>    <span class="hljs-title function_ invoke__">Qux</span>(<span class="hljs-type">u32</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = Foo::<span class="hljs-title function_ invoke__">Qux</span>(<span class="hljs-number">10</span>);<br><br>    <span class="hljs-comment">// ç§»é™¤ä»¥ä¸‹ä»£ç ï¼Œä½¿ç”¨ `match` ä»£æ›¿</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Foo</span>::Bar = a &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match foo::bar&quot;</span>)<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Foo</span>::Baz = a &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match foo::baz&quot;</span>)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match others&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Foo</span> &#123;<br>    Bar,<br>    Baz,<br>    <span class="hljs-title function_ invoke__">Qux</span>(<span class="hljs-type">u32</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = Foo::<span class="hljs-title function_ invoke__">Qux</span>(<span class="hljs-number">10</span>);<br><br>    <span class="hljs-keyword">match</span> a &#123;<br>        Foo::Bar =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match foo::bar&quot;</span>),<br>        Foo::Baz =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match foo::baz&quot;</span>),<br>        _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;match others&quot;</span>),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å˜é‡é®è”½-Shadowing"><a href="#å˜é‡é®è”½-Shadowing" class="headerlink" title="å˜é‡é®è”½( Shadowing )"></a>å˜é‡é®è”½( Shadowing )</h2><h3 id="9-ğŸŒŸğŸŒŸ"><a href="#9-ğŸŒŸğŸŒŸ" class="headerlink" title="9.ğŸŒŸğŸŒŸ"></a>9.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å°±åœ°ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(age) = age &#123; <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ï¼Œè¯¥å˜é‡ä¸ä¹‹å‰çš„ `age` å˜é‡åŒå</span><br>       <span class="hljs-built_in">assert_eq!</span>(age, <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">30</span>));<br>    &#125; <span class="hljs-comment">// æ–°çš„ `age` å˜é‡åœ¨è¿™é‡Œè¶…å‡ºä½œç”¨åŸŸ</span><br><br>    <span class="hljs-keyword">match</span> age &#123;<br>        <span class="hljs-comment">// `match` ä¹Ÿèƒ½å®ç°å˜é‡é®è”½</span><br>        <span class="hljs-title function_ invoke__">Some</span>(age) =&gt;  <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;age æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯ &#123;&#125;&quot;</span>,age),<br>        _ =&gt; ()<br>    &#125;<br> &#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å°±åœ°ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(age) = age &#123; <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ï¼Œè¯¥å˜é‡ä¸ä¹‹å‰çš„ `age` å˜é‡åŒå</span><br>       <span class="hljs-built_in">assert_eq!</span>(age, <span class="hljs-number">30</span>);<br>    &#125; <span class="hljs-comment">// æ–°çš„ `age` å˜é‡åœ¨è¿™é‡Œè¶…å‡ºä½œç”¨åŸŸ</span><br><br>    <span class="hljs-keyword">match</span> age &#123;<br>        <span class="hljs-comment">// `match` ä¹Ÿèƒ½å®ç°å˜é‡é®è”½</span><br>        <span class="hljs-title function_ invoke__">Some</span>(age) =&gt;  <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;age æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯ &#123;&#125;&quot;</span>,age),<br>        _ =&gt; ()<br>    &#125;<br> &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;match&quot;&gt;&lt;a href=&quot;#match&quot; class=&quot;headerlink&quot; title=&quot;match&quot;&gt;&lt;/a&gt;match&lt;/h2&gt;&lt;h3 id=&quot;1-ğŸŒŸğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸğŸŒŸ&quot; class=&quot;headerlink&quot; title=&quot;1</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>7.æµç¨‹æ§åˆ¶</title>
    <link href="https://lilinzta.github.io/2023/08/13/7-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"/>
    <id>https://lilinzta.github.io/2023/08/13/7-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/</id>
    <published>2023-08-13T10:23:46.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h2 id="if-else"><a href="#if-else" class="headerlink" title="if&#x2F;else"></a>if&#x2F;else</h2><h3 id="1-ğŸŒŸ"><a href="#1-ğŸŒŸ" class="headerlink" title="1.ğŸŒŸ"></a>1.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = <span class="hljs-number">5</span>;<br><br>    <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is negative&quot;</span>, n);<br>    &#125; __ n &gt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is positive&quot;</span>, n);<br>    &#125; __ &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is zero&quot;</span>, n);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = <span class="hljs-number">5</span>;<br><br>    <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is negative&quot;</span>, n);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> n &gt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is positive&quot;</span>, n);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is zero&quot;</span>, n);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-if-else-å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼æ¥è¿›è¡Œèµ‹å€¼"><a href="#2-ğŸŒŸğŸŒŸ-if-else-å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼æ¥è¿›è¡Œèµ‹å€¼" class="headerlink" title="2.ğŸŒŸğŸŒŸ if&#x2F;else å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼æ¥è¿›è¡Œèµ‹å€¼"></a>2.ğŸŒŸğŸŒŸ if&#x2F;else å¯ä»¥ç”¨ä½œè¡¨è¾¾å¼æ¥è¿›è¡Œèµ‹å€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = <span class="hljs-number">5</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">big_n</span> =<br>        <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">10</span> &amp;&amp; n &gt; -<span class="hljs-number">10</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot; æ•°å­—å¤ªå°ï¼Œå…ˆå¢åŠ  10 å€å†è¯´&quot;</span>);<br><br>            <span class="hljs-number">10</span> * n<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;æ•°å­—å¤ªå¤§ï¼Œæˆ‘ä»¬å¾—è®©å®ƒå‡åŠ&quot;</span>);<br><br>            n / <span class="hljs-number">2.0</span> ;<br>        &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; -&gt; &#123;&#125;&quot;</span>, n, big_n);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = <span class="hljs-number">5</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">big_n</span> =<br>        <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">10</span> &amp;&amp; n &gt; -<span class="hljs-number">10</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot; æ•°å­—å¤ªå°ï¼Œå…ˆå¢åŠ  10 å€å†è¯´&quot;</span>);<br><br>            <span class="hljs-number">10</span> * n<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;æ•°å­—å¤ªå¤§ï¼Œæˆ‘ä»¬å¾—è®©å®ƒå‡åŠ&quot;</span>);<br><br>            n / <span class="hljs-number">2</span><br>        &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; -&gt; &#123;&#125;&quot;</span>, n, big_n);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><h3 id="3-ğŸŒŸ-for-in-å¯ä»¥ç”¨äºè¿­ä»£ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¾‹å¦‚åºåˆ—-a-b"><a href="#3-ğŸŒŸ-for-in-å¯ä»¥ç”¨äºè¿­ä»£ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¾‹å¦‚åºåˆ—-a-b" class="headerlink" title="3.ğŸŒŸ for in å¯ä»¥ç”¨äºè¿­ä»£ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¾‹å¦‚åºåˆ— a..b."></a>3.ğŸŒŸ for in å¯ä»¥ç”¨äºè¿­ä»£ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¾‹å¦‚åºåˆ— a..b.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">n</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..=<span class="hljs-number">100</span> &#123; <span class="hljs-comment">// ä¿®æ”¹æ­¤è¡Œï¼Œè®©ä»£ç å·¥ä½œ</span><br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">100</span> &#123;<br>            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;NEVER LET THIS RUN&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">n</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">100</span> &#123; <span class="hljs-comment">// ä¿®æ”¹æ­¤è¡Œï¼Œè®©ä»£ç å·¥ä½œ</span><br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">100</span> &#123;<br>            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;NEVER LET THIS RUN&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦æ–°å¢æˆ–åˆ é™¤ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">names</span> = [<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;liming&quot;</span>),<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hanmeimei&quot;</span>)];<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">name</span> <span class="hljs-keyword">in</span> names &#123;<br>        <span class="hljs-comment">// do something with name...</span><br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, names);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">numbers</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-comment">// numbersä¸­çš„å…ƒç´ å®ç°äº† Copyï¼Œå› æ­¤æ— éœ€è½¬ç§»æ‰€æœ‰æƒ</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">n</span> <span class="hljs-keyword">in</span> numbers &#123;<br>        <span class="hljs-comment">// do something with name...</span><br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, numbers);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦æ–°å¢æˆ–åˆ é™¤ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">names</span> = [<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;liming&quot;</span>),<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hanmeimei&quot;</span>)];<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">name</span> <span class="hljs-keyword">in</span> &amp;names &#123;<br>        <span class="hljs-comment">// do something with name...</span><br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, names);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">numbers</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-comment">// numbersä¸­çš„å…ƒç´ å®ç°äº† Copyï¼Œå› æ­¤æ— éœ€è½¬ç§»æ‰€æœ‰æƒ</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">n</span> <span class="hljs-keyword">in</span> numbers &#123;<br>        <span class="hljs-comment">// do something with name...</span><br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, numbers);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸ"><a href="#5-ğŸŒŸ" class="headerlink" title="5.ğŸŒŸ"></a>5.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>];<br><br>    <span class="hljs-comment">// é€šè¿‡ç´¢å¼•å’Œå€¼çš„æ–¹å¼è¿­ä»£æ•°ç»„ `a`</span><br>    <span class="hljs-keyword">for</span> (i,v) <span class="hljs-keyword">in</span> a.__ &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ç¬¬&#123;&#125;ä¸ªå…ƒç´ æ˜¯&#123;&#125;&quot;</span>,i+<span class="hljs-number">1</span>,v);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = [<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>];<br><br>    <span class="hljs-comment">// é€šè¿‡ç´¢å¼•å’Œå€¼çš„æ–¹å¼è¿­ä»£æ•°ç»„ `a`</span><br>    <span class="hljs-keyword">for</span> (i,v) <span class="hljs-keyword">in</span> a.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>() &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;ç¬¬&#123;&#125;ä¸ªå…ƒç´ æ˜¯&#123;&#125;&quot;</span>,i+<span class="hljs-number">1</span>,v);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="while"><a href="#while" class="headerlink" title="while"></a>while</h2><h3 id="6-ğŸŒŸğŸŒŸ-å½“æ¡ä»¶ä¸º-true-æ—¶ï¼Œwhile-å°†ä¸€ç›´å¾ªç¯"><a href="#6-ğŸŒŸğŸŒŸ-å½“æ¡ä»¶ä¸º-true-æ—¶ï¼Œwhile-å°†ä¸€ç›´å¾ªç¯" class="headerlink" title="6.ğŸŒŸğŸŒŸ å½“æ¡ä»¶ä¸º true æ—¶ï¼Œwhile å°†ä¸€ç›´å¾ªç¯"></a>6.ğŸŒŸğŸŒŸ å½“æ¡ä»¶ä¸º true æ—¶ï¼Œwhile å°†ä¸€ç›´å¾ªç¯</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©æœ€åä¸€è¡Œçš„  println! å·¥ä½œ !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸€ä¸ªè®¡æ•°å€¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">n</span> = <span class="hljs-number">1</span>;<br><br>    <span class="hljs-comment">// å½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œä¸åœçš„å¾ªç¯</span><br>    <span class="hljs-keyword">while</span> n __ <span class="hljs-number">10</span> &#123;<br>        <span class="hljs-keyword">if</span> n % <span class="hljs-number">15</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;fizzbuzz&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> n % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;fizz&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> n % <span class="hljs-number">5</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;buzz&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n);<br>        &#125;<br><br><br>        __;<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;n çš„å€¼æ˜¯ &#123;&#125;, å¾ªç¯ç»“æŸ&quot;</span>,n);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©æœ€åä¸€è¡Œçš„  println! å·¥ä½œ !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸€ä¸ªè®¡æ•°å€¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">n</span> = <span class="hljs-number">1</span>;<br><br>    <span class="hljs-comment">// å½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œä¸åœçš„å¾ªç¯</span><br>    <span class="hljs-keyword">while</span> n &lt; <span class="hljs-number">10</span> &#123;<br>        <span class="hljs-keyword">if</span> n % <span class="hljs-number">15</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;fizzbuzz&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> n % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;fizz&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> n % <span class="hljs-number">5</span> == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;buzz&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n);<br>        &#125;<br><br><br>        n += <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;n çš„å€¼æ˜¯ &#123;&#125;, å¾ªç¯ç»“æŸ&quot;</span>,n);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="continue-and-break"><a href="#continue-and-break" class="headerlink" title="continue and break"></a>continue and break</h2><h3 id="7-ğŸŒŸ-ä½¿ç”¨-break-å¯ä»¥è·³å‡ºå¾ªç¯"><a href="#7-ğŸŒŸ-ä½¿ç”¨-break-å¯ä»¥è·³å‡ºå¾ªç¯" class="headerlink" title="7.ğŸŒŸ ä½¿ç”¨ break å¯ä»¥è·³å‡ºå¾ªç¯"></a>7.ğŸŒŸ ä½¿ç”¨ break å¯ä»¥è·³å‡ºå¾ªç¯</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">n</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..=<span class="hljs-number">100</span> &#123;<br>       <span class="hljs-keyword">if</span> n == <span class="hljs-number">66</span> &#123;<br>           __<br>       &#125;<br>       n += <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(n, <span class="hljs-number">66</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">n</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..=<span class="hljs-number">100</span> &#123;<br>       <span class="hljs-keyword">if</span> n == <span class="hljs-number">66</span> &#123;<br>           <span class="hljs-keyword">break</span><br>       &#125;<br>       n += <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(n, <span class="hljs-number">66</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ-continue-ä¼šç»“æŸå½“æ¬¡å¾ªç¯å¹¶ç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯"><a href="#8-ğŸŒŸğŸŒŸ-continue-ä¼šç»“æŸå½“æ¬¡å¾ªç¯å¹¶ç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯" class="headerlink" title="8.ğŸŒŸğŸŒŸ continue ä¼šç»“æŸå½“æ¬¡å¾ªç¯å¹¶ç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯"></a>8.ğŸŒŸğŸŒŸ continue ä¼šç»“æŸå½“æ¬¡å¾ªç¯å¹¶ç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">n</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..=<span class="hljs-number">100</span> &#123;<br>       <span class="hljs-keyword">if</span> n != <span class="hljs-number">66</span> &#123;<br>           n+=<span class="hljs-number">1</span>;<br>           __;<br>       &#125;<br><br>       __<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(n, <span class="hljs-number">66</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">n</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..=<span class="hljs-number">100</span> &#123;<br>       <span class="hljs-keyword">if</span> n != <span class="hljs-number">66</span> &#123;<br>           n+=<span class="hljs-number">1</span>;<br>           <span class="hljs-keyword">continue</span>;<br>       &#125;<br><br>       <span class="hljs-keyword">break</span><br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(n, <span class="hljs-number">66</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h2><h3 id="9-ğŸŒŸğŸŒŸ-loop-ä¸€èˆ¬éƒ½éœ€è¦é…åˆ-break-æˆ–-continue-ä¸€èµ·ä½¿ç”¨ã€‚"><a href="#9-ğŸŒŸğŸŒŸ-loop-ä¸€èˆ¬éƒ½éœ€è¦é…åˆ-break-æˆ–-continue-ä¸€èµ·ä½¿ç”¨ã€‚" class="headerlink" title="9.ğŸŒŸğŸŒŸ loop ä¸€èˆ¬éƒ½éœ€è¦é…åˆ break æˆ– continue ä¸€èµ·ä½¿ç”¨ã€‚"></a>9.ğŸŒŸğŸŒŸ loop ä¸€èˆ¬éƒ½éœ€è¦é…åˆ break æˆ– continue ä¸€èµ·ä½¿ç”¨ã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0u32</span>;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Let&#x27;s count until infinity!&quot;</span>);<br><br>    <span class="hljs-comment">// æ— é™å¾ªç¯</span><br>    <span class="hljs-keyword">loop</span> &#123;<br>        count += <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> count == <span class="hljs-number">3</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;three&quot;</span>);<br><br>            <span class="hljs-comment">// è·³è¿‡å½“æ­¤å¾ªç¯çš„å‰©ä½™ä»£ç </span><br>            __;<br>        &#125;<br><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, count);<br><br>        <span class="hljs-keyword">if</span> count == <span class="hljs-number">5</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;OK, that&#x27;s enough&quot;</span>);<br><br>            __;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(count, <span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0u32</span>;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Let&#x27;s count until infinity!&quot;</span>);<br><br>    <span class="hljs-comment">// æ— é™å¾ªç¯</span><br>    <span class="hljs-keyword">loop</span> &#123;<br>        count += <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> count == <span class="hljs-number">3</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;three&quot;</span>);<br><br>            <span class="hljs-comment">// è·³è¿‡å½“æ­¤å¾ªç¯çš„å‰©ä½™ä»£ç </span><br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, count);<br><br>        <span class="hljs-keyword">if</span> count == <span class="hljs-number">5</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;OK, that&#x27;s enough&quot;</span>);<br><br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(count, <span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-ğŸŒŸğŸŒŸ-loop-æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é…åˆ-break-æ¥è¿”å›ä¸€ä¸ªå€¼"><a href="#10-ğŸŒŸğŸŒŸ-loop-æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é…åˆ-break-æ¥è¿”å›ä¸€ä¸ªå€¼" class="headerlink" title="10.ğŸŒŸğŸŒŸ loop æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é…åˆ break æ¥è¿”å›ä¸€ä¸ªå€¼"></a>10.ğŸŒŸğŸŒŸ loop æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é…åˆ break æ¥è¿”å›ä¸€ä¸ªå€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">counter</span> = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-keyword">loop</span> &#123;<br>        counter += <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> counter == <span class="hljs-number">10</span> &#123;<br>            __;<br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(result, <span class="hljs-number">20</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">counter</span> = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-keyword">loop</span> &#123;<br>        counter += <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> counter == <span class="hljs-number">10</span> &#123;<br>            <span class="hljs-keyword">break</span> counter*<span class="hljs-number">2</span>;<br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(result, <span class="hljs-number">20</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="11-ğŸŒŸğŸŒŸğŸŒŸ-å½“æœ‰å¤šå±‚å¾ªç¯æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨-continue-æˆ–-break-æ¥æ§åˆ¶å¤–å±‚çš„å¾ªç¯ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¤–éƒ¨çš„å¾ªç¯å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªæ ‡ç­¾-â€˜label-ç„¶ååœ¨-break-æˆ–-continue-æ—¶æŒ‡å®šè¯¥æ ‡ç­¾"><a href="#11-ğŸŒŸğŸŒŸğŸŒŸ-å½“æœ‰å¤šå±‚å¾ªç¯æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨-continue-æˆ–-break-æ¥æ§åˆ¶å¤–å±‚çš„å¾ªç¯ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¤–éƒ¨çš„å¾ªç¯å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªæ ‡ç­¾-â€˜label-ç„¶ååœ¨-break-æˆ–-continue-æ—¶æŒ‡å®šè¯¥æ ‡ç­¾" class="headerlink" title="11.ğŸŒŸğŸŒŸğŸŒŸ å½“æœ‰å¤šå±‚å¾ªç¯æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ continue æˆ– break æ¥æ§åˆ¶å¤–å±‚çš„å¾ªç¯ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¤–éƒ¨çš„å¾ªç¯å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªæ ‡ç­¾ â€˜label, ç„¶ååœ¨ break æˆ– continue æ—¶æŒ‡å®šè¯¥æ ‡ç­¾"></a>11.ğŸŒŸğŸŒŸğŸŒŸ å½“æœ‰å¤šå±‚å¾ªç¯æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ continue æˆ– break æ¥æ§åˆ¶å¤–å±‚çš„å¾ªç¯ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¤–éƒ¨çš„å¾ªç¯å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªæ ‡ç­¾ â€˜label, ç„¶ååœ¨ break æˆ– continue æ—¶æŒ‡å®šè¯¥æ ‡ç­¾</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-symbol">&#x27;outer</span>: <span class="hljs-keyword">loop</span> &#123;<br>        <span class="hljs-symbol">&#x27;inner1</span>: <span class="hljs-keyword">loop</span> &#123;<br>            <span class="hljs-keyword">if</span> count &gt;= <span class="hljs-number">20</span> &#123;<br>                <span class="hljs-comment">// è¿™åªä¼šè·³å‡º inner1 å¾ªç¯</span><br>                <span class="hljs-keyword">break</span> <span class="hljs-symbol">&#x27;inner1</span>; <span class="hljs-comment">// è¿™é‡Œä½¿ç”¨ `break` ä¹Ÿæ˜¯ä¸€æ ·çš„</span><br>            &#125;<br>            count += <span class="hljs-number">2</span>;<br>        &#125;<br><br>        count += <span class="hljs-number">5</span>;<br><br>        <span class="hljs-symbol">&#x27;inner2</span>: <span class="hljs-keyword">loop</span> &#123;<br>            <span class="hljs-keyword">if</span> count &gt;= <span class="hljs-number">30</span> &#123;<br>                <span class="hljs-keyword">break</span> <span class="hljs-symbol">&#x27;outer</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">continue</span> <span class="hljs-symbol">&#x27;outer</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">assert!</span>(count == __)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-symbol">&#x27;outer</span>: <span class="hljs-keyword">loop</span> &#123;<br>        <span class="hljs-symbol">&#x27;inner1</span>: <span class="hljs-keyword">loop</span> &#123;<br>            <span class="hljs-keyword">if</span> count &gt;= <span class="hljs-number">20</span> &#123;<br>                <span class="hljs-comment">// è¿™åªä¼šè·³å‡º inner1 å¾ªç¯</span><br>                <span class="hljs-keyword">break</span> <span class="hljs-symbol">&#x27;inner1</span>; <span class="hljs-comment">// è¿™é‡Œä½¿ç”¨ `break` ä¹Ÿæ˜¯ä¸€æ ·çš„</span><br>            &#125;<br>            count += <span class="hljs-number">2</span>;<br>        &#125;<br><br>        count += <span class="hljs-number">5</span>;<br><br>        <span class="hljs-symbol">&#x27;inner2</span>: <span class="hljs-keyword">loop</span> &#123;<br>            <span class="hljs-keyword">if</span> count &gt;= <span class="hljs-number">30</span> &#123;<br>                <span class="hljs-keyword">break</span> <span class="hljs-symbol">&#x27;outer</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">continue</span> <span class="hljs-symbol">&#x27;outer</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">assert!</span>(count == <span class="hljs-number">30</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;if-else&quot;&gt;&lt;a href=&quot;#if-else&quot; class=&quot;headerlink&quot; title=&quot;if&amp;#x2F;else&quot;&gt;&lt;/a&gt;if&amp;#x2F;else&lt;/h2&gt;&lt;h3 id=&quot;1-ğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸ&quot; class=&quot;header</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>6.6.æšä¸¾</title>
    <link href="https://lilinzta.github.io/2023/08/12/6-6-%E6%9E%9A%E4%B8%BE/"/>
    <id>https://lilinzta.github.io/2023/08/12/6-6-%E6%9E%9A%E4%B8%BE/</id>
    <published>2023-08-12T04:55:31.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ğŸŒŸğŸŒŸ-åœ¨åˆ›å»ºæšä¸¾æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„æ•´æ•°è®¾å®šæšä¸¾æˆå‘˜çš„å€¼ã€‚"><a href="#1-ğŸŒŸğŸŒŸ-åœ¨åˆ›å»ºæšä¸¾æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„æ•´æ•°è®¾å®šæšä¸¾æˆå‘˜çš„å€¼ã€‚" class="headerlink" title="1.ğŸŒŸğŸŒŸ åœ¨åˆ›å»ºæšä¸¾æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„æ•´æ•°è®¾å®šæšä¸¾æˆå‘˜çš„å€¼ã€‚"></a>1.ğŸŒŸğŸŒŸ åœ¨åˆ›å»ºæšä¸¾æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„æ•´æ•°è®¾å®šæšä¸¾æˆå‘˜çš„å€¼ã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Number</span> &#123;<br>    Zero,<br>    One,<br>    Two,<br>&#125;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Number1</span> &#123;<br>    Zero = <span class="hljs-number">0</span>,<br>    One,<br>    Two,<br>&#125;<br><br><span class="hljs-comment">// Cè¯­è¨€é£æ ¼çš„æšä¸¾å®šä¹‰</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Number2</span> &#123;<br>    Zero = <span class="hljs-number">0.0</span>,<br>    One = <span class="hljs-number">1.0</span>,<br>    Two = <span class="hljs-number">2.0</span>,<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// é€šè¿‡ `as` å¯ä»¥å°†æšä¸¾å€¼å¼ºè½¬ä¸ºæ•´æ•°ç±»å‹</span><br>    <span class="hljs-built_in">assert_eq!</span>(Number::One, Number1::One);<br>    <span class="hljs-built_in">assert_eq!</span>(Number1::One, Number2::One);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Number</span> &#123;<br>    Zero,<br>    One,<br>    Two,<br>&#125;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Number1</span> &#123;<br>    Zero = <span class="hljs-number">0</span>,<br>    One,<br>    Two,<br>&#125;<br><br><span class="hljs-comment">// Cè¯­è¨€é£æ ¼çš„æšä¸¾å®šä¹‰</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Number2</span> &#123;<br>    Zero = <span class="hljs-number">0</span>,<br>    One = <span class="hljs-number">1</span>,<br>    Two = <span class="hljs-number">2</span>,<br>&#125;<br><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// é€šè¿‡ `as` å¯ä»¥å°†æšä¸¾å€¼å¼ºè½¬ä¸ºæ•´æ•°ç±»å‹</span><br>    <span class="hljs-built_in">assert_eq!</span>(Number::One <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, Number1::One <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(Number1::One <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>, Number2::One <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸ-æšä¸¾æˆå‘˜å¯ä»¥æŒæœ‰å„ç§ç±»å‹çš„å€¼"><a href="#2-ğŸŒŸ-æšä¸¾æˆå‘˜å¯ä»¥æŒæœ‰å„ç§ç±»å‹çš„å€¼" class="headerlink" title="2.ğŸŒŸ æšä¸¾æˆå‘˜å¯ä»¥æŒæœ‰å„ç§ç±»å‹çš„å€¼"></a>2.ğŸŒŸ æšä¸¾æˆå‘˜å¯ä»¥æŒæœ‰å„ç§ç±»å‹çš„å€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg1</span> = Message::Move&#123;__&#125;; <span class="hljs-comment">// ä½¿ç”¨x = 1, y = 2 æ¥åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg2</span> = Message::<span class="hljs-title function_ invoke__">Write</span>(__); <span class="hljs-comment">// ä½¿ç”¨ &quot;hello, world!&quot; æ¥åˆå§‹åŒ–</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg1</span> = Message::Move&#123;x: <span class="hljs-number">1</span>, y: <span class="hljs-number">2</span>&#125;; <span class="hljs-comment">// ä½¿ç”¨x = 1, y = 2 æ¥åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg2</span> = Message::<span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world!&quot;</span>)); <span class="hljs-comment">// ä½¿ç”¨ &quot;hello, world!&quot; æ¥åˆå§‹åŒ–</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ-æšä¸¾æˆå‘˜ä¸­çš„å€¼å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è·å–"><a href="#3-ğŸŒŸğŸŒŸ-æšä¸¾æˆå‘˜ä¸­çš„å€¼å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è·å–" class="headerlink" title="3.ğŸŒŸğŸŒŸ æšä¸¾æˆå‘˜ä¸­çš„å€¼å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è·å–"></a>3.ğŸŒŸğŸŒŸ æšä¸¾æˆå‘˜ä¸­çš„å€¼å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è·å–</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä»…å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg</span> = Message::Move&#123;x: <span class="hljs-number">1</span>, y: <span class="hljs-number">2</span>&#125;;<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Message</span>::Move&#123;__&#125; = msg &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(a, b);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;ä¸è¦è®©è¿™è¡Œä»£ç è¿è¡Œï¼&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä»…å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msg</span> = Message::Move&#123;x: <span class="hljs-number">1</span>, y: <span class="hljs-number">1</span>&#125;;<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Message</span>::Move&#123;x: a, y: b&#125; = msg &#123;<br>        <span class="hljs-built_in">assert_eq!</span>(a, b);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;ä¸è¦è®©è¿™è¡Œä»£ç è¿è¡Œï¼&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ-ä½¿ç”¨æšä¸¾å¯¹ç±»å‹è¿›è¡ŒåŒä¸€åŒ–"><a href="#4-ğŸŒŸğŸŒŸ-ä½¿ç”¨æšä¸¾å¯¹ç±»å‹è¿›è¡ŒåŒä¸€åŒ–" class="headerlink" title="4.ğŸŒŸğŸŒŸ ä½¿ç”¨æšä¸¾å¯¹ç±»å‹è¿›è¡ŒåŒä¸€åŒ–"></a>4.ğŸŒŸğŸŒŸ ä½¿ç”¨æšä¸¾å¯¹ç±»å‹è¿›è¡ŒåŒä¸€åŒ–</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msgs</span>: __ = [<br>        Message::Quit,<br>        Message::Move&#123;x:<span class="hljs-number">1</span>, y:<span class="hljs-number">3</span>&#125;,<br>        Message::<span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)<br>    ];<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">msg</span> <span class="hljs-keyword">in</span> msgs &#123;<br>        <span class="hljs-title function_ invoke__">show_message</span>(msg)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_message</span>(msg: Message) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, msg);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Message</span> &#123;<br>    Quit,<br>    Move &#123; x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span> &#125;,<br>    <span class="hljs-title function_ invoke__">Write</span>(<span class="hljs-type">String</span>),<br>    <span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">msgs</span>: [Message; <span class="hljs-number">3</span>] = [<br>        Message::Quit,<br>        Message::Move&#123;x:<span class="hljs-number">1</span>, y:<span class="hljs-number">3</span>&#125;,<br>        Message::<span class="hljs-title function_ invoke__">ChangeColor</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)<br>    ];<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">msg</span> <span class="hljs-keyword">in</span> msgs &#123;<br>        <span class="hljs-title function_ invoke__">show_message</span>(msg)<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_message</span>(msg: Message) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, msg);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ-Rust-ä¸­æ²¡æœ‰-nullï¼Œæˆ‘ä»¬é€šè¿‡-Option-æšä¸¾æ¥å¤„ç†å€¼ä¸ºç©ºçš„æƒ…å†µ"><a href="#5-ğŸŒŸğŸŒŸ-Rust-ä¸­æ²¡æœ‰-nullï¼Œæˆ‘ä»¬é€šè¿‡-Option-æšä¸¾æ¥å¤„ç†å€¼ä¸ºç©ºçš„æƒ…å†µ" class="headerlink" title="5.ğŸŒŸğŸŒŸ Rust ä¸­æ²¡æœ‰ nullï¼Œæˆ‘ä»¬é€šè¿‡ Option æšä¸¾æ¥å¤„ç†å€¼ä¸ºç©ºçš„æƒ…å†µ"></a>5.ğŸŒŸğŸŒŸ Rust ä¸­æ²¡æœ‰ nullï¼Œæˆ‘ä»¬é€šè¿‡ Option<T> æšä¸¾æ¥å¤„ç†å€¼ä¸ºç©ºçš„æƒ…å†µ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºè®© `println` è¾“å‡ºï¼ŒåŒæ—¶æ·»åŠ ä¸€äº›ä»£ç ä¸è¦è®©æœ€åä¸€è¡Œçš„ `panic` æ‰§è¡Œåˆ°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">five</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">six</span> = <span class="hljs-title function_ invoke__">plus_one</span>(five);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">none</span> = <span class="hljs-title function_ invoke__">plus_one</span>(<span class="hljs-literal">None</span>);<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">__</span> = six &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n)<br>    &#125;<br><br>    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;ä¸è¦è®©è¿™è¡Œä»£ç è¿è¡Œï¼&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">plus_one</span>(x: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; &#123;<br>    <span class="hljs-keyword">match</span> x &#123;<br>        __ =&gt; <span class="hljs-literal">None</span>,<br>        __ =&gt; <span class="hljs-title function_ invoke__">Some</span>(i + <span class="hljs-number">1</span>),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºè®© `println` è¾“å‡ºï¼ŒåŒæ—¶æ·»åŠ ä¸€äº›ä»£ç ä¸è¦è®©æœ€åä¸€è¡Œçš„ `panic` æ‰§è¡Œåˆ°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">five</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">six</span> = <span class="hljs-title function_ invoke__">plus_one</span>(five);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_none</span> = <span class="hljs-title function_ invoke__">plus_one</span>(<span class="hljs-literal">None</span>);<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(n) = six &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n);<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;ä¸è¦è®©è¿™è¡Œä»£ç è¿è¡Œï¼&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">plus_one</span>(x: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; &#123;<br>    <span class="hljs-keyword">match</span> x &#123;<br>        <span class="hljs-literal">None</span> =&gt; <span class="hljs-literal">None</span>,<br>        <span class="hljs-title function_ invoke__">Some</span>(i) =&gt; <span class="hljs-title function_ invoke__">Some</span>(i + <span class="hljs-number">1</span>),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ-ä½¿ç”¨æšä¸¾æ¥å®ç°é“¾è¡¨"><a href="#6-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ-ä½¿ç”¨æšä¸¾æ¥å®ç°é“¾è¡¨" class="headerlink" title="6.ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ ä½¿ç”¨æšä¸¾æ¥å®ç°é“¾è¡¨."></a>6.ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ ä½¿ç”¨æšä¸¾æ¥å®ç°é“¾è¡¨.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç è¿è¡Œ</span><br><span class="hljs-keyword">use</span> crate::List::*;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">List</span> &#123;<br>    <span class="hljs-comment">// Cons: é“¾è¡¨ä¸­åŒ…å«æœ‰å€¼çš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ˜¯å…ƒç»„ç±»å‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯èŠ‚ç‚¹çš„å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>    <span class="hljs-title function_ invoke__">Cons</span>(<span class="hljs-type">u32</span>, <span class="hljs-type">Box</span>&lt;List&gt;),<br>    <span class="hljs-comment">// Nil: é“¾è¡¨ä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”¨äºè¯´æ˜é“¾è¡¨çš„ç»“æŸ</span><br>    Nil,<br>&#125;<br><br><span class="hljs-comment">// ä¸ºæšä¸¾å®ç°ä¸€äº›æ–¹æ³•</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">List</span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºç©ºçš„é“¾è¡¨</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> List &#123;<br>        <span class="hljs-comment">// å› ä¸ºæ²¡æœ‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥ç›´æ¥è¿”å› Nil èŠ‚ç‚¹</span><br>        <span class="hljs-comment">// æšä¸¾æˆå‘˜ Nil çš„ç±»å‹æ˜¯ List</span><br>        Nil<br>    &#125;<br><br>    <span class="hljs-comment">// åœ¨è€çš„é“¾è¡¨å‰é¢æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶è¿”å›æ–°çš„é“¾è¡¨</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">prepend</span>(<span class="hljs-keyword">self</span>, elem: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> __ &#123;<br>        <span class="hljs-title function_ invoke__">Cons</span>(elem, <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-keyword">self</span>))<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å›é“¾è¡¨çš„é•¿åº¦</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">len</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬ä¸èƒ½æ‹¿èµ° tail çš„æ‰€æœ‰æƒï¼Œå› æ­¤éœ€è¦è·å–å®ƒçš„å¼•ç”¨</span><br>            <span class="hljs-title function_ invoke__">Cons</span>(_, __ tail) =&gt; <span class="hljs-number">1</span> + tail.<span class="hljs-title function_ invoke__">len</span>(),<br>            <span class="hljs-comment">// ç©ºé“¾è¡¨çš„é•¿åº¦ä¸º 0</span><br>            Nil =&gt; <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å›é“¾è¡¨çš„å­—ç¬¦ä¸²è¡¨ç°å½¢å¼ï¼Œç”¨äºæ‰“å°è¾“å‡º</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">stringify</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            <span class="hljs-title function_ invoke__">Cons</span>(head, <span class="hljs-keyword">ref</span> tail) =&gt; &#123;<br>                <span class="hljs-comment">// é€’å½’ç”Ÿæˆå­—ç¬¦ä¸²</span><br>                <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, head, tail.__())<br>            &#125;,<br>            Nil =&gt; &#123;<br>                <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Nil&quot;</span>)<br>            &#125;,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾è¡¨(ä¹Ÿæ˜¯ç©ºçš„)</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">list</span> = List::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-comment">// æ·»åŠ ä¸€äº›å…ƒç´ </span><br>    list = list.<span class="hljs-title function_ invoke__">prepend</span>(<span class="hljs-number">1</span>);<br>    list = list.<span class="hljs-title function_ invoke__">prepend</span>(<span class="hljs-number">2</span>);<br>    list = list.<span class="hljs-title function_ invoke__">prepend</span>(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-comment">// æ‰“å°åˆ—è¡¨çš„å½“å‰çŠ¶æ€</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;é“¾è¡¨çš„é•¿åº¦æ˜¯: &#123;&#125;&quot;</span>, list.<span class="hljs-title function_ invoke__">len</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, list.<span class="hljs-title function_ invoke__">stringify</span>());<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç è¿è¡Œ</span><br><span class="hljs-keyword">use</span> crate::List::*;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">List</span> &#123;<br>    <span class="hljs-comment">// Cons: é“¾è¡¨ä¸­åŒ…å«æœ‰å€¼çš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ˜¯å…ƒç»„ç±»å‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯èŠ‚ç‚¹çš„å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>    <span class="hljs-title function_ invoke__">Cons</span>(<span class="hljs-type">u32</span>, <span class="hljs-type">Box</span>&lt;List&gt;),<br>    <span class="hljs-comment">// Nil: é“¾è¡¨ä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”¨äºè¯´æ˜é“¾è¡¨çš„ç»“æŸ</span><br>    Nil,<br>&#125;<br><br><span class="hljs-comment">// ä¸ºæšä¸¾å®ç°ä¸€äº›æ–¹æ³•</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">List</span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºç©ºçš„é“¾è¡¨</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> List &#123;<br>        <span class="hljs-comment">// å› ä¸ºæ²¡æœ‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥ç›´æ¥è¿”å› Nil èŠ‚ç‚¹</span><br>        <span class="hljs-comment">// æšä¸¾æˆå‘˜ Nil çš„ç±»å‹æ˜¯ List</span><br>        Nil<br>    &#125;<br><br>    <span class="hljs-comment">// åœ¨è€çš„é“¾è¡¨å‰é¢æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶è¿”å›æ–°çš„é“¾è¡¨</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">prepend</span>(<span class="hljs-keyword">self</span>, elem: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> List &#123;<br>        <span class="hljs-title function_ invoke__">Cons</span>(elem, <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-keyword">self</span>))<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å›é“¾è¡¨çš„é•¿åº¦</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">len</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬ä¸èƒ½æ‹¿èµ° tail çš„æ‰€æœ‰æƒï¼Œå› æ­¤éœ€è¦è·å–å®ƒçš„å¼•ç”¨</span><br>            <span class="hljs-title function_ invoke__">Cons</span>(_, <span class="hljs-keyword">ref</span> tail) =&gt; <span class="hljs-number">1</span> + tail.<span class="hljs-title function_ invoke__">len</span>(),<br>            <span class="hljs-comment">// ç©ºé“¾è¡¨çš„é•¿åº¦ä¸º 0</span><br>            Nil =&gt; <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å›é“¾è¡¨çš„å­—ç¬¦ä¸²è¡¨ç°å½¢å¼ï¼Œç”¨äºæ‰“å°è¾“å‡º</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">stringify</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">match</span> *<span class="hljs-keyword">self</span> &#123;<br>            <span class="hljs-title function_ invoke__">Cons</span>(head, <span class="hljs-keyword">ref</span> tail) =&gt; &#123;<br>                <span class="hljs-comment">// é€’å½’ç”Ÿæˆå­—ç¬¦ä¸²</span><br>                <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, head, tail.<span class="hljs-title function_ invoke__">stringify</span>())<br>            &#125;,<br>            Nil =&gt; &#123;<br>                <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Nil&quot;</span>)<br>            &#125;,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾è¡¨(ä¹Ÿæ˜¯ç©ºçš„)</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">list</span> = List::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-comment">// æ·»åŠ ä¸€äº›å…ƒç´ </span><br>    list = list.<span class="hljs-title function_ invoke__">prepend</span>(<span class="hljs-number">1</span>);<br>    list = list.<span class="hljs-title function_ invoke__">prepend</span>(<span class="hljs-number">2</span>);<br>    list = list.<span class="hljs-title function_ invoke__">prepend</span>(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-comment">// æ‰“å°åˆ—è¡¨çš„å½“å‰çŠ¶æ€</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;é“¾è¡¨çš„é•¿åº¦æ˜¯: &#123;&#125;&quot;</span>, list.<span class="hljs-title function_ invoke__">len</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, list.<span class="hljs-title function_ invoke__">stringify</span>());<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ğŸŒŸğŸŒŸ-åœ¨åˆ›å»ºæšä¸¾æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„æ•´æ•°è®¾å®šæšä¸¾æˆå‘˜çš„å€¼ã€‚&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸğŸŒŸ-åœ¨åˆ›å»ºæšä¸¾æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„æ•´æ•°è®¾å®šæšä¸¾æˆå‘˜çš„å€¼ã€‚&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸğŸŒŸ åœ¨åˆ›å»ºæšä¸¾æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„æ•´æ•°è®¾å®š</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>6.5.ç»“æ„ä½“</title>
    <link href="https://lilinzta.github.io/2023/08/11/6-5-%E7%BB%93%E6%9E%84%E4%BD%93/"/>
    <id>https://lilinzta.github.io/2023/08/11/6-5-%E7%BB%93%E6%9E%84%E4%BD%93/</id>
    <published>2023-08-11T13:54:39.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“"><a href="#ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“" class="headerlink" title="ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“"></a>ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“</h2><h3 id="1-ğŸŒŸ-å¯¹äºç»“æ„ä½“ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºå…¶ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æŒ‡å®šå…·ä½“çš„å€¼"><a href="#1-ğŸŒŸ-å¯¹äºç»“æ„ä½“ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºå…¶ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æŒ‡å®šå…·ä½“çš„å€¼" class="headerlink" title="1.ğŸŒŸ å¯¹äºç»“æ„ä½“ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºå…¶ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æŒ‡å®šå…·ä½“çš„å€¼"></a>1.ğŸŒŸ å¯¹äºç»“æ„ä½“ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºå…¶ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æŒ‡å®šå…·ä½“çš„å€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// fix the error</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    age: <span class="hljs-type">u8</span>,<br>    hobby: <span class="hljs-type">String</span><br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-number">30</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Person &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunface&quot;</span>),<br>        age,<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// fix the error</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    age: <span class="hljs-type">u8</span>,<br>    hobby: <span class="hljs-type">String</span><br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-number">30</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Person &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunface&quot;</span>),<br>        age,<br>        hobby: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;coding&quot;</span>)<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸ-å•å…ƒç»“æ„ä½“æ²¡æœ‰ä»»ä½•å­—æ®µã€‚"><a href="#2-ğŸŒŸ-å•å…ƒç»“æ„ä½“æ²¡æœ‰ä»»ä½•å­—æ®µã€‚" class="headerlink" title="2.ğŸŒŸ å•å…ƒç»“æ„ä½“æ²¡æœ‰ä»»ä½•å­—æ®µã€‚"></a>2.ğŸŒŸ å•å…ƒç»“æ„ä½“æ²¡æœ‰ä»»ä½•å­—æ®µã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Unit</span>;<br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">SomeTrait</span> &#123;<br>    <span class="hljs-comment">// ...å®šä¹‰ä¸€äº›è¡Œä¸º</span><br>&#125;<br><br><span class="hljs-comment">// æˆ‘ä»¬å¹¶ä¸å…³å¿ƒç»“æ„ä½“ä¸­æœ‰ä»€ä¹ˆæ•°æ®( å­—æ®µ )ï¼Œä½†æˆ‘ä»¬å…³å¿ƒå®ƒçš„è¡Œä¸ºã€‚</span><br><span class="hljs-comment">// å› æ­¤è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æ²¡æœ‰ä»»ä½•å­—æ®µçš„å•å…ƒç»“æ„ä½“ï¼Œç„¶åä¸ºå®ƒå®ç°ä¸€äº›è¡Œä¸º</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">SomeTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Unit</span> &#123;  &#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">u</span> = Unit;<br>    <span class="hljs-title function_ invoke__">do_something_with_unit</span>(u);<br>&#125;<br><br><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">do_something_with_unit</span>(u: __) &#123;   &#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Unit</span>;<br><span class="hljs-keyword">trait</span> <span class="hljs-title class_">SomeTrait</span> &#123;<br>    <span class="hljs-comment">// ...å®šä¹‰ä¸€äº›è¡Œä¸º</span><br>&#125;<br><br><span class="hljs-comment">// æˆ‘ä»¬å¹¶ä¸å…³å¿ƒç»“æ„ä½“ä¸­æœ‰ä»€ä¹ˆæ•°æ®( å­—æ®µ )ï¼Œä½†æˆ‘ä»¬å…³å¿ƒå®ƒçš„è¡Œä¸ºã€‚</span><br><span class="hljs-comment">// å› æ­¤è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æ²¡æœ‰ä»»ä½•å­—æ®µçš„å•å…ƒç»“æ„ä½“ï¼Œç„¶åä¸ºå®ƒå®ç°ä¸€äº›è¡Œä¸º</span><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">SomeTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Unit</span> &#123;  &#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">u</span> = Unit;<br>    <span class="hljs-title function_ invoke__">do_something_with_unit</span>(u);<br>&#125;<br><br><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">do_something_with_unit</span>(u: Unit) &#123;   &#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ-å…ƒç»„ç»“æ„ä½“çœ‹èµ·æ¥è·Ÿå…ƒç»„å¾ˆåƒï¼Œä½†æ˜¯å®ƒæ‹¥æœ‰ä¸€ä¸ªç»“æ„ä½“çš„åç§°ï¼Œè¯¥åç§°å¯ä»¥èµ‹äºˆå®ƒä¸€å®šçš„æ„ä¹‰ã€‚ç”±äºå®ƒå¹¶ä¸å…³å¿ƒå†…éƒ¨æ•°æ®åˆ°åº•æ˜¯ä»€ä¹ˆåç§°ï¼Œå› æ­¤æ­¤æ—¶å…ƒç»„ç»“æ„ä½“å°±éå¸¸é€‚åˆã€‚"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ-å…ƒç»„ç»“æ„ä½“çœ‹èµ·æ¥è·Ÿå…ƒç»„å¾ˆåƒï¼Œä½†æ˜¯å®ƒæ‹¥æœ‰ä¸€ä¸ªç»“æ„ä½“çš„åç§°ï¼Œè¯¥åç§°å¯ä»¥èµ‹äºˆå®ƒä¸€å®šçš„æ„ä¹‰ã€‚ç”±äºå®ƒå¹¶ä¸å…³å¿ƒå†…éƒ¨æ•°æ®åˆ°åº•æ˜¯ä»€ä¹ˆåç§°ï¼Œå› æ­¤æ­¤æ—¶å…ƒç»„ç»“æ„ä½“å°±éå¸¸é€‚åˆã€‚" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ å…ƒç»„ç»“æ„ä½“çœ‹èµ·æ¥è·Ÿå…ƒç»„å¾ˆåƒï¼Œä½†æ˜¯å®ƒæ‹¥æœ‰ä¸€ä¸ªç»“æ„ä½“çš„åç§°ï¼Œè¯¥åç§°å¯ä»¥èµ‹äºˆå®ƒä¸€å®šçš„æ„ä¹‰ã€‚ç”±äºå®ƒå¹¶ä¸å…³å¿ƒå†…éƒ¨æ•°æ®åˆ°åº•æ˜¯ä»€ä¹ˆåç§°ï¼Œå› æ­¤æ­¤æ—¶å…ƒç»„ç»“æ„ä½“å°±éå¸¸é€‚åˆã€‚"></a>3.ğŸŒŸğŸŒŸğŸŒŸ å…ƒç»„ç»“æ„ä½“çœ‹èµ·æ¥è·Ÿå…ƒç»„å¾ˆåƒï¼Œä½†æ˜¯å®ƒæ‹¥æœ‰ä¸€ä¸ªç»“æ„ä½“çš„åç§°ï¼Œè¯¥åç§°å¯ä»¥èµ‹äºˆå®ƒä¸€å®šçš„æ„ä¹‰ã€‚ç”±äºå®ƒå¹¶ä¸å…³å¿ƒå†…éƒ¨æ•°æ®åˆ°åº•æ˜¯ä»€ä¹ˆåç§°ï¼Œå› æ­¤æ­¤æ—¶å…ƒç»„ç»“æ„ä½“å°±éå¸¸é€‚åˆã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Color</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>);<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>);<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-title function_ invoke__">Point</span>(__, __, __);<br>    <span class="hljs-title function_ invoke__">check_color</span>(v);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">check_color</span>(p: Color) &#123;<br>    <span class="hljs-keyword">let</span> (x, _, _) = p;<br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(p.<span class="hljs-number">1</span>, <span class="hljs-number">127</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(__, <span class="hljs-number">255</span>);<br> &#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Color</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>);<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>(<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>);<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-title function_ invoke__">Point</span>(<span class="hljs-number">0</span>, <span class="hljs-number">127</span>, <span class="hljs-number">255</span>);<br>    <span class="hljs-title function_ invoke__">check_color</span>(v);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">check_color</span>(p: Point) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">Point</span>(x, _, _) = p;<br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(p.<span class="hljs-number">1</span>, <span class="hljs-number">127</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(p.<span class="hljs-number">2</span>, <span class="hljs-number">255</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸ-ä½ å¯ä»¥åœ¨å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“æ—¶å°†å®ƒæ•´ä½“æ ‡è®°ä¸ºå¯å˜çš„ï¼Œä½†æ˜¯-Rust-ä¸å…è®¸æˆ‘ä»¬å°†ç»“æ„ä½“çš„æŸä¸ªå­—æ®µä¸“é—¨æŒ‡å®šä¸ºå¯å˜çš„"><a href="#4-ğŸŒŸ-ä½ å¯ä»¥åœ¨å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“æ—¶å°†å®ƒæ•´ä½“æ ‡è®°ä¸ºå¯å˜çš„ï¼Œä½†æ˜¯-Rust-ä¸å…è®¸æˆ‘ä»¬å°†ç»“æ„ä½“çš„æŸä¸ªå­—æ®µä¸“é—¨æŒ‡å®šä¸ºå¯å˜çš„" class="headerlink" title="4.ğŸŒŸ ä½ å¯ä»¥åœ¨å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“æ—¶å°†å®ƒæ•´ä½“æ ‡è®°ä¸ºå¯å˜çš„ï¼Œä½†æ˜¯ Rust ä¸å…è®¸æˆ‘ä»¬å°†ç»“æ„ä½“çš„æŸä¸ªå­—æ®µä¸“é—¨æŒ‡å®šä¸ºå¯å˜çš„."></a>4.ğŸŒŸ ä½ å¯ä»¥åœ¨å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“æ—¶å°†å®ƒæ•´ä½“æ ‡è®°ä¸ºå¯å˜çš„ï¼Œä½†æ˜¯ Rust ä¸å…è®¸æˆ‘ä»¬å°†ç»“æ„ä½“çš„æŸä¸ªå­—æ®µä¸“é—¨æŒ‡å®šä¸ºå¯å˜çš„.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯ï¼Œä¸è¦å¢åŠ æˆ–ç§»é™¤ä»£ç è¡Œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    age: <span class="hljs-type">u8</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-number">18</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = Person &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunface&quot;</span>),<br>        age,<br>    &#125;;<br><br>    <span class="hljs-comment">// how can you believe sunface is only 18?</span><br>    p.age = <span class="hljs-number">30</span>;<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    __ = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunfei&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºå¹¶ä¿®å¤é”™è¯¯ï¼Œä¸è¦å¢åŠ æˆ–ç§»é™¤ä»£ç è¡Œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    age: <span class="hljs-type">u8</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-number">18</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">p</span> = Person &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunface&quot;</span>),<br>        age,<br>    &#125;;<br><br>    <span class="hljs-comment">// how can you believe sunface is only 18?</span><br>    p.age = <span class="hljs-number">30</span>;<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    p.name = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunfei&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸ-ä½¿ç”¨ç»“æ„ä½“å­—æ®µåˆå§‹åŒ–ç¼©ç•¥è¯­æ³•å¯ä»¥å‡å°‘ä¸€äº›é‡å¤ä»£ç "><a href="#5-ğŸŒŸ-ä½¿ç”¨ç»“æ„ä½“å­—æ®µåˆå§‹åŒ–ç¼©ç•¥è¯­æ³•å¯ä»¥å‡å°‘ä¸€äº›é‡å¤ä»£ç " class="headerlink" title="5.ğŸŒŸ ä½¿ç”¨ç»“æ„ä½“å­—æ®µåˆå§‹åŒ–ç¼©ç•¥è¯­æ³•å¯ä»¥å‡å°‘ä¸€äº›é‡å¤ä»£ç "></a>5.ğŸŒŸ ä½¿ç”¨ç»“æ„ä½“å­—æ®µåˆå§‹åŒ–ç¼©ç•¥è¯­æ³•å¯ä»¥å‡å°‘ä¸€äº›é‡å¤ä»£ç </h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    age: <span class="hljs-type">u8</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">build_person</span>(name: <span class="hljs-type">String</span>, age: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> Person &#123;<br>    Person &#123;<br>        age,<br>        __<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    age: <span class="hljs-type">u8</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">build_person</span>(name: <span class="hljs-type">String</span>, age: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> Person &#123;<br>    Person &#123;<br>        age,<br>        name<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸ-ä½ å¯ä»¥ä½¿ç”¨ç»“æ„ä½“æ›´æ–°è¯­æ³•åŸºäºä¸€ä¸ªç»“æ„ä½“å®ä¾‹æ¥æ„é€ å¦ä¸€ä¸ª"><a href="#6-ğŸŒŸ-ä½ å¯ä»¥ä½¿ç”¨ç»“æ„ä½“æ›´æ–°è¯­æ³•åŸºäºä¸€ä¸ªç»“æ„ä½“å®ä¾‹æ¥æ„é€ å¦ä¸€ä¸ª" class="headerlink" title="6.ğŸŒŸ ä½ å¯ä»¥ä½¿ç”¨ç»“æ„ä½“æ›´æ–°è¯­æ³•åŸºäºä¸€ä¸ªç»“æ„ä½“å®ä¾‹æ¥æ„é€ å¦ä¸€ä¸ª"></a>6.ğŸŒŸ ä½ å¯ä»¥ä½¿ç”¨ç»“æ„ä½“æ›´æ–°è¯­æ³•åŸºäºä¸€ä¸ªç»“æ„ä½“å®ä¾‹æ¥æ„é€ å¦ä¸€ä¸ª</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> &#123;<br>    active: <span class="hljs-type">bool</span>,<br>    username: <span class="hljs-type">String</span>,<br>    email: <span class="hljs-type">String</span>,<br>    sign_in_count: <span class="hljs-type">u64</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">u1</span> = User &#123;<br>        email: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;someone@example.com&quot;</span>),<br>        username: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunface&quot;</span>),<br>        active: <span class="hljs-literal">true</span>,<br>        sign_in_count: <span class="hljs-number">1</span>,<br>    &#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">u2</span> = <span class="hljs-title function_ invoke__">set_email</span>(u1);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">set_email</span>(u: User) <span class="hljs-punctuation">-&gt;</span> User &#123;<br>    User &#123;<br>        email: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;contact@im.dev&quot;</span>),<br>        __<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> &#123;<br>    active: <span class="hljs-type">bool</span>,<br>    username: <span class="hljs-type">String</span>,<br>    email: <span class="hljs-type">String</span>,<br>    sign_in_count: <span class="hljs-type">u64</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">u1</span> = User &#123;<br>        email: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;someone@example.com&quot;</span>),<br>        username: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sunface&quot;</span>),<br>        active: <span class="hljs-literal">true</span>,<br>        sign_in_count: <span class="hljs-number">1</span>,<br>    &#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">u2</span> = <span class="hljs-title function_ invoke__">set_email</span>(u1);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">set_email</span>(u: User) <span class="hljs-punctuation">-&gt;</span> User &#123;<br>    User &#123;<br>        email: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;contact@im.dev&quot;</span>),<br>        ..u<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ‰“å°ç»“æ„ä½“"><a href="#æ‰“å°ç»“æ„ä½“" class="headerlink" title="æ‰“å°ç»“æ„ä½“"></a>æ‰“å°ç»“æ„ä½“</h2><h3 id="7-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨-derive-Debug-è®©ç»“æ„ä½“å˜æˆå¯æ‰“å°çš„"><a href="#7-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨-derive-Debug-è®©ç»“æ„ä½“å˜æˆå¯æ‰“å°çš„" class="headerlink" title="7.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ #[derive(Debug)] è®©ç»“æ„ä½“å˜æˆå¯æ‰“å°çš„."></a>7.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ #[derive(Debug)] è®©ç»“æ„ä½“å˜æˆå¯æ‰“å°çš„.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-meta">#[__]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    height: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">scale</span> = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">rect1</span> = Rectangle &#123;<br>        width: dbg!(<span class="hljs-number">30</span> * scale), <span class="hljs-comment">// æ‰“å° debug ä¿¡æ¯åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º stderr,å¹¶å°† `30 * scale` çš„å€¼èµ‹ç»™ `width`</span><br>        height: <span class="hljs-number">50</span>,<br>    &#125;;<br><br>    dbg!(&amp;rect1); <span class="hljs-comment">// æ‰“å° debug ä¿¡æ¯åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º stderr</span><br><br>    <span class="hljs-built_in">println!</span>(__, rect1); <span class="hljs-comment">// æ‰“å° debug ä¿¡æ¯åˆ°æ ‡å‡†è¾“å‡º stdout</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    height: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">scale</span> = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">rect1</span> = Rectangle &#123;<br>        width: dbg!(<span class="hljs-number">30</span> * scale), <span class="hljs-comment">// æ‰“å° debug ä¿¡æ¯åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º stderr,å¹¶å°† `30 * scale` çš„å€¼èµ‹ç»™ `width`</span><br>        height: <span class="hljs-number">50</span>,<br>    &#125;;<br><br>    dbg!(&amp;rect1); <span class="hljs-comment">// æ‰“å° debug ä¿¡æ¯åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º stderr</span><br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, rect1); <span class="hljs-comment">// æ‰“å° debug ä¿¡æ¯åˆ°æ ‡å‡†è¾“å‡º stdout</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»“æ„ä½“çš„æ‰€æœ‰æƒ"><a href="#ç»“æ„ä½“çš„æ‰€æœ‰æƒ" class="headerlink" title="ç»“æ„ä½“çš„æ‰€æœ‰æƒ"></a>ç»“æ„ä½“çš„æ‰€æœ‰æƒ</h2><p>å½“è§£æ„ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ move å’Œå¼•ç”¨æ¨¡å¼ç»‘å®šçš„æ–¹å¼ã€‚å½“è¿™ä¹ˆåšæ—¶ï¼Œéƒ¨åˆ† move å°±ä¼šå‘ç”Ÿï¼šå˜é‡ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æƒè¢«è½¬ç§»ç»™å…¶å®ƒå˜é‡ï¼Œè€Œå¦ä¸€éƒ¨åˆ†æˆ‘ä»¬è·å–äº†å®ƒçš„å¼•ç”¨ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒåŸå˜é‡å°†æ— æ³•å†è¢«ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰è½¬ç§»æ‰€æœ‰æƒçš„é‚£ä¸€éƒ¨åˆ†ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰è¢«å¼•ç”¨çš„é‚£éƒ¨åˆ†ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-meta">#[derive(Debug)]</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>        name: <span class="hljs-type">String</span>,<br>        age: <span class="hljs-type">Box</span>&lt;<span class="hljs-type">u8</span>&gt;,<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">person</span> = Person &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Alice&quot;</span>),<br>        age: <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">20</span>),<br>    &#125;;<br><br>    <span class="hljs-comment">// é€šè¿‡è¿™ç§è§£æ„å¼æ¨¡å¼åŒ¹é…ï¼Œperson.name çš„æ‰€æœ‰æƒè¢«è½¬ç§»ç»™æ–°çš„å˜é‡ `name`</span><br>    <span class="hljs-comment">// ä½†æ˜¯ï¼Œè¿™é‡Œ `age` å˜é‡å´æ˜¯å¯¹ person.age çš„å¼•ç”¨, è¿™é‡Œ ref çš„ä½¿ç”¨ç›¸å½“äº: let age = &amp;person.age </span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">Person</span> &#123; name, <span class="hljs-keyword">ref</span> age &#125; = person;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The person&#x27;s age is &#123;&#125;&quot;</span>, age);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The person&#x27;s name is &#123;&#125;&quot;</span>, name);<br><br>    <span class="hljs-comment">// Error! åŸå› æ˜¯ person çš„ä¸€éƒ¨åˆ†å·²ç»è¢«è½¬ç§»äº†æ‰€æœ‰æƒï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å†ä½¿ç”¨å®ƒ</span><br>    <span class="hljs-comment">//println!(&quot;The person struct is &#123;:?&#125;&quot;, person);</span><br><br>    <span class="hljs-comment">// è™½ç„¶ `person` ä½œä¸ºä¸€ä¸ªæ•´ä½“æ— æ³•å†è¢«ä½¿ç”¨ï¼Œä½†æ˜¯ `person.age` ä¾ç„¶å¯ä»¥ä½¿ç”¨</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The person&#x27;s age from person struct is &#123;&#125;&quot;</span>, person.age);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ"><a href="#8-ğŸŒŸğŸŒŸ" class="headerlink" title="8.ğŸŒŸğŸŒŸ"></a>8.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">File</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    data: <span class="hljs-type">String</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;readme.md&quot;</span>),<br>        data: <span class="hljs-string">&quot;Rust By Practice&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_name</span> = f.name;<br><br>    <span class="hljs-comment">// åªèƒ½ä¿®æ”¹è¿™ä¸€è¡Œ</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;, &#123;:?&#125;&quot;</span>,f.name, f.data, f);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">File</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    data: <span class="hljs-type">String</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;readme.md&quot;</span>),<br>        data: <span class="hljs-string">&quot;Rust By Practice&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_name</span> = f.name;<br><br>    <span class="hljs-comment">// åªèƒ½ä¿®æ”¹è¿™ä¸€è¡Œ</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, f.data);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“&quot;&gt;&lt;a href=&quot;#ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“&quot;&gt;&lt;/a&gt;ä¸‰ç§ç±»å‹çš„ç»“æ„ä½“&lt;/h2&gt;&lt;h3 id=&quot;1-ğŸŒŸ-å¯¹äºç»“æ„ä½“ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºå…¶ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æŒ‡å®šå…·ä½“çš„å€¼&quot;&gt;&lt;a href=</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>6.4.å…ƒç»„</title>
    <link href="https://lilinzta.github.io/2023/08/10/6-4-%E5%85%83%E7%BB%84/"/>
    <id>https://lilinzta.github.io/2023/08/10/6-4-%E5%85%83%E7%BB%84/</id>
    <published>2023-08-10T12:47:47.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ğŸŒŸ-å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚å…ƒç»„çš„ç±»å‹ç­¾åæ˜¯-T1-T2-â€¦-è¿™é‡Œ-T1-T2-æ˜¯ç›¸å¯¹åº”çš„å…ƒç»„æˆå‘˜çš„ç±»å‹"><a href="#1-ğŸŒŸ-å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚å…ƒç»„çš„ç±»å‹ç­¾åæ˜¯-T1-T2-â€¦-è¿™é‡Œ-T1-T2-æ˜¯ç›¸å¯¹åº”çš„å…ƒç»„æˆå‘˜çš„ç±»å‹" class="headerlink" title="1.ğŸŒŸ å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚å…ƒç»„çš„ç±»å‹ç­¾åæ˜¯ (T1, T2, â€¦), è¿™é‡Œ T1, T2 æ˜¯ç›¸å¯¹åº”çš„å…ƒç»„æˆå‘˜çš„ç±»å‹."></a>1.ğŸŒŸ å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚å…ƒç»„çš„ç±»å‹ç­¾åæ˜¯ (T1, T2, â€¦), è¿™é‡Œ T1, T2 æ˜¯ç›¸å¯¹åº”çš„å…ƒç»„æˆå‘˜çš„ç±»å‹.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_t0</span>: (<span class="hljs-type">u8</span>,<span class="hljs-type">i16</span>) = (<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// å…ƒç»„çš„æˆå‘˜è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå…ƒç»„</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_t1</span>: (<span class="hljs-type">u8</span>, (<span class="hljs-type">i16</span>, <span class="hljs-type">u32</span>)) = (<span class="hljs-number">0</span>, (-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));<br>    <span class="hljs-comment">// å¡«ç©ºè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span>: (<span class="hljs-type">u8</span>, __, <span class="hljs-type">i64</span>, __, __) = (<span class="hljs-number">1u8</span>, <span class="hljs-number">2u16</span>, <span class="hljs-number">3i64</span>, <span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;, world&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_t0</span>: (<span class="hljs-type">u8</span>,<span class="hljs-type">i16</span>) = (<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// å…ƒç»„çš„æˆå‘˜è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå…ƒç»„</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_t1</span>: (<span class="hljs-type">u8</span>, (<span class="hljs-type">i16</span>, <span class="hljs-type">u32</span>)) = (<span class="hljs-number">0</span>, (-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));<br>    <span class="hljs-comment">// å¡«ç©ºè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span>: (<span class="hljs-type">u8</span>, <span class="hljs-type">u16</span>, <span class="hljs-type">i64</span>, &amp;<span class="hljs-type">str</span>, <span class="hljs-type">String</span>) = (<span class="hljs-number">1u8</span>, <span class="hljs-number">2u16</span>, <span class="hljs-number">3i64</span>, <span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;, world&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸ-å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è·å–å…ƒç»„çš„æˆå‘˜"><a href="#2-ğŸŒŸ-å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è·å–å…ƒç»„çš„æˆå‘˜" class="headerlink" title="2.ğŸŒŸ å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è·å–å…ƒç»„çš„æˆå‘˜"></a>2.ğŸŒŸ å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è·å–å…ƒç»„çš„æˆå‘˜</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹åˆé€‚çš„åœ°æ–¹ï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = (<span class="hljs-string">&quot;i&quot;</span>, <span class="hljs-string">&quot;am&quot;</span>, <span class="hljs-string">&quot;sunface&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(t.<span class="hljs-number">1</span>, <span class="hljs-string">&quot;sunface&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹åˆé€‚çš„åœ°æ–¹ï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = (<span class="hljs-string">&quot;i&quot;</span>, <span class="hljs-string">&quot;am&quot;</span>, <span class="hljs-string">&quot;sunface&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(t.<span class="hljs-number">2</span>, <span class="hljs-string">&quot;sunface&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸ-è¿‡é•¿çš„å…ƒç»„æ— æ³•è¢«æ‰“å°è¾“å‡º"><a href="#3-ğŸŒŸ-è¿‡é•¿çš„å…ƒç»„æ— æ³•è¢«æ‰“å°è¾“å‡º" class="headerlink" title="3.ğŸŒŸ è¿‡é•¿çš„å…ƒç»„æ— æ³•è¢«æ‰“å°è¾“å‡º"></a>3.ğŸŒŸ è¿‡é•¿çš„å…ƒç»„æ— æ³•è¢«æ‰“å°è¾“å‡º</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä»£ç é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">too_long_tuple</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;too long tuple: &#123;:?&#125;&quot;</span>, too_long_tuple);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä»£ç é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">too_long_tuple</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;too long tuple: &#123;:?&#125;&quot;</span>, too_long_tuple);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸ-ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„å…ƒç»„"><a href="#4-ğŸŒŸ-ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„å…ƒç»„" class="headerlink" title="4.ğŸŒŸ ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„å…ƒç»„"></a>4.ğŸŒŸ ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„å…ƒç»„</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">tup</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">6.4</span>, <span class="hljs-string">&quot;hello&quot;</span>);<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">__</span> = tup;<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(z, <span class="hljs-number">6.4</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">tup</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">6.4</span>, <span class="hljs-string">&quot;hello&quot;</span>);<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> (x, z, y) = tup;<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(z, <span class="hljs-number">6.4</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ-è§£æ„å¼èµ‹å€¼"><a href="#5-ğŸŒŸğŸŒŸ-è§£æ„å¼èµ‹å€¼" class="headerlink" title="5.ğŸŒŸğŸŒŸ è§£æ„å¼èµ‹å€¼"></a>5.ğŸŒŸğŸŒŸ è§£æ„å¼èµ‹å€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> (x, y, z);<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    __ = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(z, <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> (x, y, z);<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    (y, z, x) = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(z, <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸ-å…ƒç»„å¯ä»¥ç”¨äºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼"><a href="#6-ğŸŒŸğŸŒŸ-å…ƒç»„å¯ä»¥ç”¨äºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼" class="headerlink" title="6.ğŸŒŸğŸŒŸ å…ƒç»„å¯ä»¥ç”¨äºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼"></a>6.ğŸŒŸğŸŒŸ å…ƒç»„å¯ä»¥ç”¨äºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œéœ€è¦ç¨å¾®è®¡ç®—ä¸‹</span><br>    <span class="hljs-keyword">let</span> (x, y) = <span class="hljs-title function_ invoke__">sum_multiply</span>(__);<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-number">6</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum_multiply</span>(nums: (<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>)) <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>) &#123;<br>    (nums.<span class="hljs-number">0</span> + nums.<span class="hljs-number">1</span>, nums.<span class="hljs-number">0</span> * nums.<span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œéœ€è¦ç¨å¾®è®¡ç®—ä¸‹</span><br>    <span class="hljs-keyword">let</span> (x, y) = <span class="hljs-title function_ invoke__">sum_multiply</span>((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-number">6</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum_multiply</span>(nums: (<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>)) <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">i32</span>, <span class="hljs-type">i32</span>) &#123;<br>    (nums.<span class="hljs-number">0</span> + nums.<span class="hljs-number">1</span>, nums.<span class="hljs-number">0</span> * nums.<span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ğŸŒŸ-å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚å…ƒç»„çš„ç±»å‹ç­¾åæ˜¯-T1-T2-â€¦-è¿™é‡Œ-T1-T2-æ˜¯ç›¸å¯¹åº”çš„å…ƒç»„æˆå‘˜çš„ç±»å‹&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸ-å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚å…ƒç»„çš„ç±»å‹ç­¾åæ˜¯-T1-T2-â€¦-è¿™é‡Œ-T1-T2-æ˜¯ç›¸å¯¹åº”çš„å…ƒç»„æˆå‘˜çš„ç±»å‹&quot; cl</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>6.3.åˆ‡ç‰‡</title>
    <link href="https://lilinzta.github.io/2023/08/09/6-3-%E5%88%87%E7%89%87/"/>
    <id>https://lilinzta.github.io/2023/08/09/6-3-%E5%88%87%E7%89%87/</id>
    <published>2023-08-09T14:48:50.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ‡ç‰‡è·Ÿæ•°ç»„ç›¸ä¼¼ï¼Œä½†æ˜¯åˆ‡ç‰‡çš„é•¿åº¦æ— æ³•åœ¨ç¼–è¯‘æœŸå¾—çŸ¥ï¼Œå› æ­¤ä½ æ— æ³•ç›´æ¥ä½¿ç”¨åˆ‡ç‰‡ç±»å‹ã€‚</p><span id="more"></span><h3 id="1-ğŸŒŸğŸŒŸ-è¿™é‡Œ-i32-å’Œ-str-éƒ½æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¼šé€ æˆç¼–è¯‘é”™è¯¯ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ä¸ºäº†è§£å†³ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ‡ç‰‡çš„å¼•ç”¨ï¼š-i32-ï¼Œ-strã€‚"><a href="#1-ğŸŒŸğŸŒŸ-è¿™é‡Œ-i32-å’Œ-str-éƒ½æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¼šé€ æˆç¼–è¯‘é”™è¯¯ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ä¸ºäº†è§£å†³ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ‡ç‰‡çš„å¼•ç”¨ï¼š-i32-ï¼Œ-strã€‚" class="headerlink" title="1.ğŸŒŸğŸŒŸ è¿™é‡Œ, [i32] å’Œ str éƒ½æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¼šé€ æˆç¼–è¯‘é”™è¯¯ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ä¸ºäº†è§£å†³ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ‡ç‰‡çš„å¼•ç”¨ï¼š &amp;[i32]ï¼Œ&amp;strã€‚"></a>1.ğŸŒŸğŸŒŸ è¿™é‡Œ, [i32] å’Œ str éƒ½æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¼šé€ æˆç¼–è¯‘é”™è¯¯ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ä¸ºäº†è§£å†³ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ‡ç‰‡çš„å¼•ç”¨ï¼š &amp;[i32]ï¼Œ&amp;strã€‚</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-comment">// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ!</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span>: [<span class="hljs-type">i32</span>] = arr[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span>: <span class="hljs-type">str</span> = <span class="hljs-string">&quot;hello, world&quot;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">str</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ!</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span>: &amp;[<span class="hljs-type">i32</span>] = &amp;arr[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span>: &amp;<span class="hljs-type">str</span> = <span class="hljs-string">&quot;hello, world&quot;</span> <span class="hljs-keyword">as</span> &amp;<span class="hljs-type">str</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨å ç”¨äº†2ä¸ªå­—å¤§å°çš„å†…å­˜ç©ºé—´( ä»ç°åœ¨å¼€å§‹ï¼Œä¸ºäº†ç®€æ´æ€§è€ƒè™‘ï¼Œå¦‚æ— ç‰¹æ®ŠåŸå› ï¼Œæˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨åˆ‡ç‰‡æ¥ç‰¹æŒ‡åˆ‡ç‰‡å¼•ç”¨ )ã€‚ è¯¥åˆ‡ç‰‡çš„ç¬¬ä¸€ä¸ªå­—æ˜¯æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªå­—æ˜¯åˆ‡ç‰‡çš„é•¿åº¦ã€‚å­—çš„å¤§å°å–å†³äºå¤„ç†å™¨æ¶æ„ï¼Œä¾‹å¦‚åœ¨ x86-64 ä¸Šï¼Œå­—çš„å¤§å°æ˜¯ 64 ä½ä¹Ÿå°±æ˜¯ 8 ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆä¸€ä¸ªåˆ‡ç‰‡å¼•ç”¨å°±æ˜¯ 16 ä¸ªå­—èŠ‚å¤§å°ã€‚</p><p>åˆ‡ç‰‡( å¼•ç”¨ )å¯ä»¥ç”¨æ¥å€Ÿç”¨æ•°ç»„çš„æŸä¸ªè¿ç»­çš„éƒ¨åˆ†ï¼Œå¯¹åº”çš„ç­¾åæ˜¯ &amp;[T]ï¼Œå¤§å®¶å¯ä»¥ä¸æ•°ç»„çš„ç­¾åå¯¹æ¯”ä¸‹ [T; Length]ã€‚</p><h3 id="2-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">char</span>; <span class="hljs-number">3</span>] = [<span class="hljs-string">&#x27;ä¸­&#x27;</span>, <span class="hljs-string">&#x27;å›½&#x27;</span>, <span class="hljs-string">&#x27;äºº&#x27;</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span> = &amp;arr[..<span class="hljs-number">2</span>];<br><br>    <span class="hljs-comment">// ä¿®æ”¹æ•°å­— `8` è®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-comment">// å°æç¤º: åˆ‡ç‰‡å’Œæ•°ç»„ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å¼•ç”¨ã€‚å¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œé‚£ä¸‹é¢çš„ `assert!` å°†ä¼šé€šè¿‡ï¼š &#x27;ä¸­&#x27;å’Œ&#x27;å›½&#x27;æ˜¯charç±»å‹ï¼Œcharç±»å‹æ˜¯Unicodeç¼–ç ï¼Œå¤§å°å›ºå®šä¸º4å­—èŠ‚ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸º8å­—èŠ‚ã€‚</span><br>    <span class="hljs-built_in">assert!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;slice) == <span class="hljs-number">8</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">char</span>; <span class="hljs-number">3</span>] = [<span class="hljs-string">&#x27;ä¸­&#x27;</span>, <span class="hljs-string">&#x27;å›½&#x27;</span>, <span class="hljs-string">&#x27;äºº&#x27;</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span> = &amp;arr[..<span class="hljs-number">3</span>];<br><br>    <span class="hljs-comment">// ä¿®æ”¹æ•°å­— `8` è®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-comment">// å°æç¤º: åˆ‡ç‰‡å’Œæ•°ç»„ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å¼•ç”¨ã€‚å¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œé‚£ä¸‹é¢çš„ `assert!` å°†ä¼šé€šè¿‡ï¼š &#x27;ä¸­&#x27;å’Œ&#x27;å›½&#x27;æ˜¯charç±»å‹ï¼Œcharç±»å‹æ˜¯Unicodeç¼–ç ï¼Œå¤§å°å›ºå®šä¸º4å­—èŠ‚ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸º8å­—èŠ‚ã€‚</span><br>    <span class="hljs-built_in">assert!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;slice) == <span class="hljs-number">16</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">5</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br>  <span class="hljs-comment">// å¡«ç©ºè®©ä»£ç å·¥ä½œèµ·æ¥</span><br>  <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span>: __ = __;<br>  <span class="hljs-built_in">assert_eq!</span>(slice, &amp;[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">5</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br>  <span class="hljs-comment">// å¡«ç©ºè®©ä»£ç å·¥ä½œèµ·æ¥</span><br>  <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span>: &amp;[<span class="hljs-type">i32</span>] = &amp;arr[<span class="hljs-number">1</span>..<span class="hljs-number">4</span>];<br>  <span class="hljs-built_in">assert_eq!</span>(slice, &amp;[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²åˆ‡ç‰‡"><a href="#å­—ç¬¦ä¸²åˆ‡ç‰‡" class="headerlink" title="å­—ç¬¦ä¸²åˆ‡ç‰‡"></a>å­—ç¬¦ä¸²åˆ‡ç‰‡</h2><h3 id="4-ğŸŒŸ"><a href="#4-ğŸŒŸ" class="headerlink" title="4.ğŸŒŸ"></a>4.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>];<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦å†ä½¿ç”¨ 0..2</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = &amp;s[__];<br><br>    <span class="hljs-built_in">assert_eq!</span>(slice1, slice2);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice1</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>];<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦å†ä½¿ç”¨ 0..2</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice2</span> = &amp;s[..<span class="hljs-number">2</span>];<br><br>    <span class="hljs-built_in">assert_eq!</span>(slice1, slice2);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸ"><a href="#5-ğŸŒŸ" class="headerlink" title="5.ğŸŒŸ"></a>5.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;</span>;<br>    <span class="hljs-comment">// ä¿®æ”¹ä»¥ä¸‹ä»£ç è¡Œï¼Œè®©ä»£ç å·¥ä½œèµ·æ¥</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>];<br><br>    <span class="hljs-built_in">assert!</span>(slice == <span class="hljs-string">&quot;ä½ &quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;</span>;<br>    <span class="hljs-comment">// ä¿®æ”¹ä»¥ä¸‹ä»£ç è¡Œï¼Œè®©ä»£ç å·¥ä½œèµ·æ¥</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">slice</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">3</span>];<br><br>    <span class="hljs-built_in">assert!</span>(slice == <span class="hljs-string">&quot;ä½ &quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸ-String-å¯ä»¥è¢«éšå¼åœ°è½¬æ¢æˆ-str-ç±»å‹"><a href="#6-ğŸŒŸğŸŒŸ-String-å¯ä»¥è¢«éšå¼åœ°è½¬æ¢æˆ-str-ç±»å‹" class="headerlink" title="6.ğŸŒŸğŸŒŸ &amp;String å¯ä»¥è¢«éšå¼åœ°è½¬æ¢æˆ &amp;str ç±»å‹."></a>6.ğŸŒŸğŸŒŸ &amp;String å¯ä»¥è¢«éšå¼åœ°è½¬æ¢æˆ &amp;str ç±»å‹.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br><br>    <span class="hljs-comment">// è¿™é‡Œ, &amp;s æ˜¯ `&amp;String` ç±»å‹ï¼Œä½†æ˜¯ `first_character` å‡½æ•°éœ€è¦çš„æ˜¯ `&amp;str` ç±»å‹ã€‚</span><br>    <span class="hljs-comment">// å°½ç®¡ä¸¤ä¸ªç±»å‹ä¸ä¸€æ ·ï¼Œä½†æ˜¯ä»£ç ä»ç„¶å¯ä»¥å·¥ä½œï¼ŒåŸå› æ˜¯ `&amp;String` ä¼šè¢«éšå¼åœ°è½¬æ¢æˆ `&amp;str` ç±»å‹ï¼Œå¦‚æœå¤§å®¶æƒ³è¦çŸ¥é“æ›´å¤šï¼Œå¯ä»¥çœ‹çœ‹ Deref ç« èŠ‚: https://course.rs/advance/smart-pointer/deref.html</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ch</span> = <span class="hljs-title function_ invoke__">first_character</span>(&amp;s);<br><br>    s.<span class="hljs-title function_ invoke__">clear</span>(); <span class="hljs-comment">// error!</span><br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the first character is: &#123;&#125;&quot;</span>, ch);<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">first_character</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>    &amp;s[..<span class="hljs-number">1</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br><br>    <span class="hljs-comment">// è¿™é‡Œ, &amp;s æ˜¯ `&amp;String` ç±»å‹ï¼Œä½†æ˜¯ `first_character` å‡½æ•°éœ€è¦çš„æ˜¯ `&amp;str` ç±»å‹ã€‚</span><br>    <span class="hljs-comment">// å°½ç®¡ä¸¤ä¸ªç±»å‹ä¸ä¸€æ ·ï¼Œä½†æ˜¯ä»£ç ä»ç„¶å¯ä»¥å·¥ä½œï¼ŒåŸå› æ˜¯ `&amp;String` ä¼šè¢«éšå¼åœ°è½¬æ¢æˆ `&amp;str` ç±»å‹ï¼Œå¦‚æœå¤§å®¶æƒ³è¦çŸ¥é“æ›´å¤šï¼Œå¯ä»¥çœ‹çœ‹ Deref ç« èŠ‚: https://course.rs/advance/smart-pointer/deref.html</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ch</span> = <span class="hljs-title function_ invoke__">first_character</span>(&amp;s);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the first character is: &#123;&#125;&quot;</span>, ch);<br><br>    s.<span class="hljs-title function_ invoke__">clear</span>(); <span class="hljs-comment">// error!</span><br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">first_character</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>    &amp;s[..<span class="hljs-number">1</span>]<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;åˆ‡ç‰‡è·Ÿæ•°ç»„ç›¸ä¼¼ï¼Œä½†æ˜¯åˆ‡ç‰‡çš„é•¿åº¦æ— æ³•åœ¨ç¼–è¯‘æœŸå¾—çŸ¥ï¼Œå› æ­¤ä½ æ— æ³•ç›´æ¥ä½¿ç”¨åˆ‡ç‰‡ç±»å‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>6.2.æ•°ç»„</title>
    <link href="https://lilinzta.github.io/2023/08/09/6-2-%E6%95%B0%E7%BB%84/"/>
    <id>https://lilinzta.github.io/2023/08/09/6-2-%E6%95%B0%E7%BB%84/</id>
    <published>2023-08-09T11:28:51.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<p>æ•°ç»„çš„ç±»å‹æ˜¯ [T; Length]ï¼Œå°±å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯ç±»å‹ç­¾åçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ•°ç»„çš„é•¿åº¦å¿…é¡»åœ¨ç¼–è¯‘æœŸå°±å·²çŸ¥ã€‚</p><span id="more"></span><p>ä¾‹å¦‚ä½ ä¸èƒ½ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥å£°æ˜ä¸€ä¸ªæ•°ç»„:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_arr</span>(n: <span class="hljs-type">i32</span>) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>; n];<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå‡½æ•°å°†æŠ¥é”™ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•åœ¨ç¼–è¯‘æœŸçŸ¥é“ n çš„å…·ä½“å¤§å°ã€‚</p><h3 id="1-ğŸŒŸ"><a href="#1-ğŸŒŸ" class="headerlink" title="1.ğŸŒŸ"></a>1.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨åˆé€‚çš„ç±»å‹å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: __ = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><br>    <span class="hljs-comment">// ä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼Œè®©å®ƒé¡ºåˆ©è¿è¡Œ</span><br>    <span class="hljs-built_in">assert!</span>(arr.<span class="hljs-title function_ invoke__">len</span>() == <span class="hljs-number">4</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨åˆé€‚çš„ç±»å‹å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">5</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><br>    <span class="hljs-comment">// ä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼Œè®©å®ƒé¡ºåˆ©è¿è¡Œ</span><br>    <span class="hljs-built_in">assert!</span>(arr.<span class="hljs-title function_ invoke__">len</span>() == <span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥æ•°ç»„çš„éƒ¨åˆ†ç±»å‹ï¼Œä¹Ÿå¯ä»¥å¿½ç•¥å…¨éƒ¨ç±»å‹ï¼Œè®©ç¼–è¯‘å™¨å¸®åŠ©æˆ‘ä»¬æ¨å¯¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr0</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [_; <span class="hljs-number">3</span>] = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>];<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-comment">// æ•°ç»„åˆ†é…åœ¨æ ˆä¸Šï¼Œ `std::mem::size_of_val` å‡½æ•°ä¼šè¿”å›æ•´ä¸ªæ•°ç»„å ç”¨çš„å†…å­˜ç©ºé—´</span><br>    <span class="hljs-comment">// æ•°ç»„ä¸­çš„æ¯ä¸ª char å…ƒç´ å ç”¨ 4 å­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œå› ä¸ºåœ¨ Rust ä¸­ï¼Œ char æ˜¯ Unicode å­—ç¬¦</span><br>    <span class="hljs-built_in">assert!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;arr) == __);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥æ•°ç»„çš„éƒ¨åˆ†ç±»å‹ï¼Œä¹Ÿå¯ä»¥å¿½ç•¥å…¨éƒ¨ç±»å‹ï¼Œè®©ç¼–è¯‘å™¨å¸®åŠ©æˆ‘ä»¬æ¨å¯¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr0</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span>: [<span class="hljs-type">char</span>; <span class="hljs-number">3</span>] = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>];<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-comment">// æ•°ç»„åˆ†é…åœ¨æ ˆä¸Šï¼Œ `std::mem::size_of_val` å‡½æ•°ä¼šè¿”å›æ•´ä¸ªæ•°ç»„å ç”¨çš„å†…å­˜ç©ºé—´</span><br>    <span class="hljs-comment">// æ•°ç»„ä¸­çš„æ¯ä¸ª char å…ƒç´ å ç”¨ 4 å­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œå› ä¸ºåœ¨ Rust ä¸­ï¼Œ char æ˜¯ Unicode å­—ç¬¦</span><br>    <span class="hljs-built_in">assert!</span>(std::mem::<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;arr) == <span class="hljs-number">12</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸ-æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¯ä»¥ä¸€èµ·åˆå§‹åŒ–ä¸ºåŒä¸€ä¸ªå€¼"><a href="#3-ğŸŒŸ-æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¯ä»¥ä¸€èµ·åˆå§‹åŒ–ä¸ºåŒä¸€ä¸ªå€¼" class="headerlink" title="3.ğŸŒŸ æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¯ä»¥ä¸€èµ·åˆå§‹åŒ–ä¸ºåŒä¸€ä¸ªå€¼"></a>3.ğŸŒŸ æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¯ä»¥ä¸€èµ·åˆå§‹åŒ–ä¸ºåŒä¸€ä¸ªå€¼</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">list</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">100</span>] = __ ;<br><br>    <span class="hljs-built_in">assert!</span>(list[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert!</span>(list.<span class="hljs-title function_ invoke__">len</span>() == <span class="hljs-number">100</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">list</span>: [<span class="hljs-type">i32</span>; <span class="hljs-number">100</span>] = [<span class="hljs-number">1</span>; <span class="hljs-number">100</span>] ;<br><br>    <span class="hljs-built_in">assert!</span>(list[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert!</span>(list.<span class="hljs-title function_ invoke__">len</span>() == <span class="hljs-number">100</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸ-æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ç±»å‹"><a href="#4-ğŸŒŸ-æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ç±»å‹" class="headerlink" title="4.ğŸŒŸ æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ç±»å‹"></a>4.ğŸŒŸ æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯åŒä¸€ç±»å‹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;3&#x27;</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸ-æ•°ç»„çš„ä¸‹æ ‡ç´¢å¼•ä»-0-å¼€å§‹"><a href="#5-ğŸŒŸ-æ•°ç»„çš„ä¸‹æ ‡ç´¢å¼•ä»-0-å¼€å§‹" class="headerlink" title="5.ğŸŒŸ æ•°ç»„çš„ä¸‹æ ‡ç´¢å¼•ä» 0 å¼€å§‹."></a>5.ğŸŒŸ æ•°ç»„çš„ä¸‹æ ‡ç´¢å¼•ä» 0 å¼€å§‹.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ele</span> = arr[<span class="hljs-number">1</span>]; <span class="hljs-comment">// åªä¿®æ”¹æ­¤è¡Œæ¥è®©ä»£ç å·¥ä½œ</span><br><br>    <span class="hljs-built_in">assert!</span>(ele == <span class="hljs-string">&#x27;a&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ele</span> = arr[<span class="hljs-number">0</span>]; <span class="hljs-comment">// åªä¿®æ”¹æ­¤è¡Œæ¥è®©ä»£ç å·¥ä½œ</span><br><br>    <span class="hljs-built_in">assert!</span>(ele == <span class="hljs-string">&#x27;a&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸ-è¶Šç•Œç´¢å¼•ä¼šå¯¼è‡´ä»£ç çš„-panic"><a href="#6-ğŸŒŸ-è¶Šç•Œç´¢å¼•ä¼šå¯¼è‡´ä»£ç çš„-panic" class="headerlink" title="6.ğŸŒŸ è¶Šç•Œç´¢å¼•ä¼šå¯¼è‡´ä»£ç çš„ panic."></a>6.ğŸŒŸ è¶Šç•Œç´¢å¼•ä¼šå¯¼è‡´ä»£ç çš„ panic.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">names</span> = [<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Sunfei&quot;</span>), <span class="hljs-string">&quot;Sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()];<br><br>    <span class="hljs-comment">// `get` è¿”å› `Option&lt;T&gt;` ç±»å‹ï¼Œå› æ­¤å®ƒçš„ä½¿ç”¨éå¸¸å®‰å…¨</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">name0</span> = names.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br><br>    <span class="hljs-comment">// ä½†æ˜¯ä¸‹æ ‡ç´¢å¼•å°±å­˜åœ¨è¶Šç•Œçš„é£é™©äº†</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_name1</span> = &amp;names[<span class="hljs-number">2</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">names</span> = [<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Sunfei&quot;</span>), <span class="hljs-string">&quot;Sunface&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>()];<br><br>    <span class="hljs-comment">// `get` è¿”å› `Option&lt;T&gt;` ç±»å‹ï¼Œå› æ­¤å®ƒçš„ä½¿ç”¨éå¸¸å®‰å…¨</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">name0</span> = names.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br><br>    <span class="hljs-comment">// ä½†æ˜¯ä¸‹æ ‡ç´¢å¼•å°±å­˜åœ¨è¶Šç•Œçš„é£é™©äº†</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_name1</span> = &amp;names[<span class="hljs-number">1</span>];<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ•°ç»„çš„ç±»å‹æ˜¯ [T; Length]ï¼Œå°±å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯ç±»å‹ç­¾åçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ•°ç»„çš„é•¿åº¦å¿…é¡»åœ¨ç¼–è¯‘æœŸå°±å·²çŸ¥ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>6.1.å­—ç¬¦ä¸²</title>
    <link href="https://lilinzta.github.io/2023/08/08/6-1-%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <id>https://lilinzta.github.io/2023/08/08/6-1-%E5%AD%97%E7%AC%A6%E4%B8%B2/</id>
    <published>2023-08-08T14:42:09.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<p>å­—ç¬¦ä¸²å­—é¢é‡çš„ç±»å‹æ˜¯ &amp;strï¼Œ ä¾‹å¦‚ let s: &amp;str &#x3D; â€œhello, worldâ€ ä¸­çš„ â€œhello, worldâ€ çš„ç±»å‹å°±æ˜¯ &amp;strã€‚</p><span id="more"></span><h1 id="str-å’Œ-str"><a href="#str-å’Œ-str" class="headerlink" title="str å’Œ &amp;str"></a>str å’Œ &amp;str</h1><h3 id="1-ğŸŒŸ-æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ— æ³•ä½¿ç”¨-str-ç±»å‹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨-str-æ¥æ›¿ä»£"><a href="#1-ğŸŒŸ-æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ— æ³•ä½¿ç”¨-str-ç±»å‹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨-str-æ¥æ›¿ä»£" class="headerlink" title="1.ğŸŒŸ æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ— æ³•ä½¿ç”¨ str ç±»å‹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ &amp;str æ¥æ›¿ä»£"></a>1.ğŸŒŸ æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ— æ³•ä½¿ç”¨ str ç±»å‹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ &amp;str æ¥æ›¿ä»£</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">str</span> = <span class="hljs-string">&quot;hello, world&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: &amp;<span class="hljs-type">str</span> = <span class="hljs-string">&quot;hello, world&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-å¦‚æœè¦ä½¿ç”¨-str-ç±»å‹ï¼Œåªèƒ½é…åˆ-Boxã€‚-å¯ä»¥ç”¨æ¥å°†-Box-è½¬æ¢ä¸º-str-ç±»å‹"><a href="#2-ğŸŒŸğŸŒŸ-å¦‚æœè¦ä½¿ç”¨-str-ç±»å‹ï¼Œåªèƒ½é…åˆ-Boxã€‚-å¯ä»¥ç”¨æ¥å°†-Box-è½¬æ¢ä¸º-str-ç±»å‹" class="headerlink" title="2.ğŸŒŸğŸŒŸ å¦‚æœè¦ä½¿ç”¨ str ç±»å‹ï¼Œåªèƒ½é…åˆ Boxã€‚ &amp; å¯ä»¥ç”¨æ¥å°† Box è½¬æ¢ä¸º &amp;str ç±»å‹"></a>2.ğŸŒŸğŸŒŸ å¦‚æœè¦ä½¿ç”¨ str ç±»å‹ï¼Œåªèƒ½é…åˆ Boxã€‚ &amp; å¯ä»¥ç”¨æ¥å°† Box<str> è½¬æ¢ä¸º &amp;str ç±»å‹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•æ¥ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">Box</span>&lt;<span class="hljs-type">str</span>&gt; = <span class="hljs-string">&quot;hello, world&quot;</span>.<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-title function_ invoke__">greetings</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">greetings</span>(s: &amp;<span class="hljs-type">str</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•æ¥ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">Box</span>&lt;<span class="hljs-type">str</span>&gt; = <span class="hljs-string">&quot;hello, world&quot;</span>.<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-title function_ invoke__">greetings</span>(&amp;s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">greetings</span>(s: &amp;<span class="hljs-type">str</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•æ¥ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: <span class="hljs-type">Box</span>&lt;&amp;<span class="hljs-type">str</span>&gt; = <span class="hljs-string">&quot;hello, world&quot;</span>.<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-title function_ invoke__">greetings</span>(*s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">greetings</span>(s: &amp;<span class="hljs-type">str</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><p>String æ˜¯å®šä¹‰åœ¨æ ‡å‡†åº“ä¸­çš„ç±»å‹ï¼Œåˆ†é…åœ¨å †ä¸Šï¼Œå¯ä»¥åŠ¨æ€çš„å¢é•¿ã€‚å®ƒçš„åº•å±‚å­˜å‚¨æ˜¯åŠ¨æ€å­—èŠ‚æ•°ç»„çš„æ–¹å¼( Vec<u8> )ï¼Œä½†æ˜¯ä¸å­—èŠ‚æ•°ç»„ä¸åŒï¼ŒString æ˜¯ UTF-8 ç¼–ç ã€‚</p><h3 id="3-ğŸŒŸ"><a href="#3-ğŸŒŸ" class="headerlink" title="3.ğŸŒŸ"></a>3.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = __;<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    s.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&#x27;!&#x27;</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-string">&quot;hello, world!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    s.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&#x27;!&#x27;</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-string">&quot;hello, world!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰é”™è¯¯ï¼Œå¹¶ä¸”ä¸è¦æ–°å¢ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span>  <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    s.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&#x27;,&#x27;</span>);<br>    s.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&quot; world&quot;</span>);<br>    s += <span class="hljs-string">&quot;!&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰é”™è¯¯ï¼Œå¹¶ä¸”ä¸è¦æ–°å¢ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    s.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">&#x27;,&#x27;</span>);<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot; world&quot;</span>);<br>    s += <span class="hljs-string">&quot;!&quot;</span>;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ç”¨-replace-æ–¹æ³•æ¥æ›¿æ¢æŒ‡å®šçš„å­å­—ç¬¦ä¸²"><a href="#5-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ç”¨-replace-æ–¹æ³•æ¥æ›¿æ¢æŒ‡å®šçš„å­å­—ç¬¦ä¸²" class="headerlink" title="5.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ç”¨ replace æ–¹æ³•æ¥æ›¿æ¢æŒ‡å®šçš„å­å­—ç¬¦ä¸²"></a>5.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ç”¨ replace æ–¹æ³•æ¥æ›¿æ¢æŒ‡å®šçš„å­å­—ç¬¦ä¸²</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;I like dogs&quot;</span>);<br>    <span class="hljs-comment">// ä»¥ä¸‹æ–¹æ³•ä¼šé‡æ–°åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ï¼Œç„¶åå°†ä¿®æ”¹åçš„å­—ç¬¦ä¸²å­˜åœ¨è¿™é‡Œ</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = s.__(<span class="hljs-string">&quot;dogs&quot;</span>, <span class="hljs-string">&quot;cats&quot;</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(s1, <span class="hljs-string">&quot;I like cats&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;I like dogs&quot;</span>);<br>    <span class="hljs-comment">// ä»¥ä¸‹æ–¹æ³•ä¼šé‡æ–°åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ï¼Œç„¶åå°†ä¿®æ”¹åçš„å­—ç¬¦ä¸²å­˜åœ¨è¿™é‡Œ</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = s.<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">&quot;dogs&quot;</span>, <span class="hljs-string">&quot;cats&quot;</span>);<br><br>    <span class="hljs-built_in">assert_eq!</span>(s1, <span class="hljs-string">&quot;I like cats&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸ-ä½ åªèƒ½å°†-String-è·Ÿ-str-ç±»å‹è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶ä¸”-String-çš„æ‰€æœ‰æƒåœ¨æ­¤è¿‡ç¨‹ä¸­ä¼šè¢«-move"><a href="#6-ğŸŒŸğŸŒŸ-ä½ åªèƒ½å°†-String-è·Ÿ-str-ç±»å‹è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶ä¸”-String-çš„æ‰€æœ‰æƒåœ¨æ­¤è¿‡ç¨‹ä¸­ä¼šè¢«-move" class="headerlink" title="6.ğŸŒŸğŸŒŸ ä½ åªèƒ½å°† String è·Ÿ &amp;str ç±»å‹è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶ä¸” String çš„æ‰€æœ‰æƒåœ¨æ­¤è¿‡ç¨‹ä¸­ä¼šè¢« move"></a>6.ğŸŒŸğŸŒŸ ä½ åªèƒ½å°† String è·Ÿ &amp;str ç±»å‹è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶ä¸” String çš„æ‰€æœ‰æƒåœ¨æ­¤è¿‡ç¨‹ä¸­ä¼šè¢« move</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰é”™è¯¯ï¼Œä¸è¦åˆ é™¤ä»»ä½•ä¸€è¡Œä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello,&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;world!&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s3</span> = s1 + s2;<br>    <span class="hljs-built_in">assert_eq!</span>(s3,<span class="hljs-string">&quot;hello,world!&quot;</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s1);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤æ‰€æœ‰é”™è¯¯ï¼Œä¸è¦åˆ é™¤ä»»ä½•ä¸€è¡Œä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello,&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;world!&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s3</span> = s1.<span class="hljs-title function_ invoke__">clone</span>() + &amp;s2;<br>    <span class="hljs-built_in">assert_eq!</span>(s3,<span class="hljs-string">&quot;hello,world!&quot;</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s1);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="str-å’Œ-String"><a href="#str-å’Œ-String" class="headerlink" title="&amp;str å’Œ String"></a>&amp;str å’Œ String</h1><p>ä¸ str çš„å¾ˆå°‘ä½¿ç”¨ç›¸æ¯”ï¼Œ&amp;str å’Œ String ç±»å‹å´éå¸¸å¸¸ç”¨ï¼Œå› æ­¤ä¹Ÿéå¸¸é‡è¦ã€‚</p><h3 id="7-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹æ³•å°†-str-è½¬æ¢æˆ-String-ç±»å‹"><a href="#7-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹æ³•å°†-str-è½¬æ¢æˆ-String-ç±»å‹" class="headerlink" title="7.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹æ³•å°† &amp;str è½¬æ¢æˆ String ç±»å‹"></a>7.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹æ³•å°† &amp;str è½¬æ¢æˆ String ç±»å‹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•æ¥ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello, world&quot;</span>;<br>    <span class="hljs-title function_ invoke__">greetings</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">greetings</span>(s: <span class="hljs-type">String</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•æ¥ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello, world&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-title function_ invoke__">greetings</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">greetings</span>(s: <span class="hljs-type">String</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨è‡³å°‘ä¸¤ç§æ–¹æ³•æ¥ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-title function_ invoke__">greetings</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">greetings</span>(s: <span class="hljs-type">String</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨-String-from-æˆ–-to-string-å°†-str-è½¬æ¢æˆ-String-ç±»å‹"><a href="#8-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨-String-from-æˆ–-to-string-å°†-str-è½¬æ¢æˆ-String-ç±»å‹" class="headerlink" title="8.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ String::from æˆ– to_string å°† &amp;str è½¬æ¢æˆ String ç±»å‹"></a>8.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ String::from æˆ– to_string å°† &amp;str è½¬æ¢æˆ String ç±»å‹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è§£å†³é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello, world&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span>: &amp;<span class="hljs-type">str</span> = s;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è§£å†³é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello, world&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span>: &amp;<span class="hljs-type">str</span> = &amp;s;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è§£å†³é”™è¯¯ï¼Œä¸è¦æ–°å¢ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello, world&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span>: &amp;<span class="hljs-type">str</span> = s;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²è½¬ä¹‰"><a href="#å­—ç¬¦ä¸²è½¬ä¹‰" class="headerlink" title="å­—ç¬¦ä¸²è½¬ä¹‰"></a>å­—ç¬¦ä¸²è½¬ä¹‰</h1><h3 id="9-ğŸŒŸ"><a href="#9-ğŸŒŸ" class="headerlink" title="9.ğŸŒŸ"></a>9.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½ å¯ä»¥ä½¿ç”¨è½¬ä¹‰çš„æ–¹å¼æ¥è¾“å‡ºæƒ³è¦çš„å­—ç¬¦ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åå…­è¿›åˆ¶çš„å€¼ï¼Œä¾‹å¦‚ \x73 ä¼šè¢«è½¬ä¹‰æˆå°å†™å­—æ¯ &#x27;s&#x27;</span><br>    <span class="hljs-comment">// å¡«ç©ºä»¥è¾“å‡º &quot;I&#x27;m writing Rust&quot;</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">byte_escape</span> = <span class="hljs-string">&quot;I&#x27;m writing Ru\x73__!&quot;</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;What are you doing\x3F (\\x3F means ?) &#123;&#125;&quot;</span>, byte_escape);<br><br>    <span class="hljs-comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ Unicode å½¢å¼çš„è½¬ä¹‰å­—ç¬¦</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">unicode_codepoint</span> = <span class="hljs-string">&quot;\u&#123;211D&#125;&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">character_name</span> = <span class="hljs-string">&quot;\&quot;DOUBLE-STRUCK CAPITAL R\&quot;&quot;</span>;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Unicode character &#123;&#125; (U+211D) is called &#123;&#125;&quot;</span>,<br>                unicode_codepoint, character_name );<br><br>    <span class="hljs-comment">// è¿˜èƒ½ä½¿ç”¨ \ æ¥è¿æ¥å¤šè¡Œå­—ç¬¦ä¸²</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">long_string</span> = <span class="hljs-string">&quot;String literals</span><br><span class="hljs-string">                        can span multiple lines.</span><br><span class="hljs-string">                        The linebreak and indentation here \</span><br><span class="hljs-string">                         can be escaped too!&quot;</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, long_string);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-ğŸŒŸğŸŒŸğŸŒŸ-æœ‰æ—¶å€™éœ€è¦è½¬ä¹‰çš„å­—ç¬¦å¾ˆå¤šï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥ä¹¦å†™å­—ç¬¦ä¸²-raw-string"><a href="#10-ğŸŒŸğŸŒŸğŸŒŸ-æœ‰æ—¶å€™éœ€è¦è½¬ä¹‰çš„å­—ç¬¦å¾ˆå¤šï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥ä¹¦å†™å­—ç¬¦ä¸²-raw-string" class="headerlink" title="10.ğŸŒŸğŸŒŸğŸŒŸ æœ‰æ—¶å€™éœ€è¦è½¬ä¹‰çš„å­—ç¬¦å¾ˆå¤šï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥ä¹¦å†™å­—ç¬¦ä¸²: raw string."></a>10.ğŸŒŸğŸŒŸğŸŒŸ æœ‰æ—¶å€™éœ€è¦è½¬ä¹‰çš„å­—ç¬¦å¾ˆå¤šï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥ä¹¦å†™å­—ç¬¦ä¸²: raw string.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/* å¡«ç©ºå¹¶ä¿®å¤æ‰€æœ‰é”™è¯¯ */</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">raw_str</span> = <span class="hljs-string">r&quot;Escapes don&#x27;t work here: \x3F \u&#123;211D&#125;&quot;</span>;<br>    <span class="hljs-comment">// ä¿®æ”¹ä¸Šé¢çš„è¡Œè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-built_in">assert_eq!</span>(raw_str, <span class="hljs-string">&quot;Escapes don&#x27;t work here: ? â„&quot;</span>);<br><br>    <span class="hljs-comment">// å¦‚æœä½ å¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨åŒå¼•å·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å½¢å¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">quotes</span> = <span class="hljs-string">r#&quot;And then I said: &quot;There is no escape!&quot;&quot;#</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, quotes);<br><br>    <span class="hljs-comment">// å¦‚æœå¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ # å·ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š</span><br>    <span class="hljs-keyword">let</span>  <span class="hljs-variable">delimiter</span> = <span class="hljs-string">r###&quot;A string with &quot;# in it. And even &quot;##!&quot;###</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, delimiter);<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">long_delimiter</span> = __;<br>    <span class="hljs-built_in">assert_eq!</span>(long_delimiter, <span class="hljs-string">&quot;Hello, \&quot;##\&quot;&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/* å¡«ç©ºå¹¶ä¿®å¤æ‰€æœ‰é”™è¯¯ */</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">raw_str</span> = <span class="hljs-string">&quot;Escapes don&#x27;t work here: \x3F \u&#123;211D&#125;&quot;</span>;<br>    <span class="hljs-comment">// ä¿®æ”¹ä¸Šé¢çš„è¡Œè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-built_in">assert_eq!</span>(raw_str, <span class="hljs-string">&quot;Escapes don&#x27;t work here: ? â„&quot;</span>);<br><br>    <span class="hljs-comment">// å¦‚æœä½ å¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨åŒå¼•å·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å½¢å¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">quotes</span> = <span class="hljs-string">r#&quot;And then I said: &quot;There is no escape!&quot;&quot;#</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, quotes);<br><br>    <span class="hljs-comment">// å¦‚æœå¸Œæœ›åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ # å·ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š</span><br>    <span class="hljs-keyword">let</span>  <span class="hljs-variable">delimiter</span> = <span class="hljs-string">r###&quot;A string with &quot;# in it. And even &quot;##!&quot;###</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, delimiter);<br><br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">long_delimiter</span> = <span class="hljs-string">r###&quot;Hello, &quot;##&quot;&quot;###</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(long_delimiter, <span class="hljs-string">&quot;Hello, \&quot;##\&quot;&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å­—èŠ‚å­—ç¬¦ä¸²"><a href="#å­—èŠ‚å­—ç¬¦ä¸²" class="headerlink" title="å­—èŠ‚å­—ç¬¦ä¸²"></a>å­—èŠ‚å­—ç¬¦ä¸²</h1><p>æƒ³è¦ä¸€ä¸ªé UTF-8 å½¢å¼çš„å­—ç¬¦ä¸²å—(æˆ‘ä»¬ä¹‹å‰çš„ str, &amp;str, String éƒ½æ˜¯ UTF-8 å­—ç¬¦ä¸²) ? å¯ä»¥è¯•è¯•å­—èŠ‚å­—ç¬¦ä¸²æˆ–è€…è¯´å­—èŠ‚æ•°ç»„:</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::<span class="hljs-type">str</span>;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// æ³¨æ„ï¼Œè¿™å¹¶ä¸æ˜¯ `&amp;str` ç±»å‹äº†ï¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bytestring</span>: &amp;[<span class="hljs-type">u8</span>; <span class="hljs-number">21</span>] = <span class="hljs-string">b&quot;this is a byte string&quot;</span>;<br><br><br>    <span class="hljs-comment">// å­—èŠ‚æ•°ç»„æ²¡æœ‰å®ç° `Display` ç‰¹å¾ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ `Debug` çš„æ–¹å¼å»æ‰“å°</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;A byte string: &#123;:?&#125;&quot;</span>, bytestring);<br><br>    <span class="hljs-comment">// å­—èŠ‚æ•°ç»„ä¹Ÿå¯ä»¥ä½¿ç”¨è½¬ä¹‰</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">escaped</span> = <span class="hljs-string">b&quot;\x52\x75\x73\x74 as bytes&quot;</span>;<br>    <span class="hljs-comment">// ...ä½†æ˜¯ä¸æ”¯æŒ unicode è½¬ä¹‰</span><br>    <span class="hljs-comment">// let escaped = b&quot;\u&#123;211D&#125; is not allowed&quot;;</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Some escaped bytes: &#123;:?&#125;&quot;</span>, escaped);<br><br><br>    <span class="hljs-comment">// raw string</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">raw_bytestring</span> = <span class="hljs-string">br&quot;\u&#123;211D&#125; is not escaped here&quot;</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, raw_bytestring);<br><br>    <span class="hljs-comment">// å°†å­—èŠ‚æ•°ç»„è½¬æˆ `str` ç±»å‹å¯èƒ½ä¼šå¤±è´¥</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Ok</span>(my_str) = <span class="hljs-type">str</span>::<span class="hljs-title function_ invoke__">from_utf8</span>(raw_bytestring) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;And the same as text: &#x27;&#123;&#125;&#x27;&quot;</span>, my_str);<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_quotes</span> = <span class="hljs-string">br#&quot;You can also use &quot;fancier&quot; formatting, \</span><br><span class="hljs-string">                    like with normal raw strings&quot;#</span>;<br><br>    <span class="hljs-comment">// å­—èŠ‚æ•°ç»„å¯ä»¥ä¸æ˜¯ UTF-8 æ ¼å¼</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">shift_jis</span> = <span class="hljs-string">b&quot;\x82\xe6\x82\xa8\x82\xb1\x82\xbb&quot;</span>; <span class="hljs-comment">// &quot;ã‚ˆã†ã“ã&quot; in SHIFT-JIS</span><br><br>    <span class="hljs-comment">// ä½†æ˜¯å®ƒä»¬æœªå¿…èƒ½è½¬æ¢æˆ `str` ç±»å‹</span><br>    <span class="hljs-keyword">match</span> <span class="hljs-type">str</span>::<span class="hljs-title function_ invoke__">from_utf8</span>(shift_jis) &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(my_str) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Conversion successful: &#x27;&#123;&#125;&#x27;&quot;</span>, my_str),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Conversion failed: &#123;:?&#125;&quot;</span>, e),<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²ç´¢å¼•string-index"><a href="#å­—ç¬¦ä¸²ç´¢å¼•string-index" class="headerlink" title="å­—ç¬¦ä¸²ç´¢å¼•string index"></a>å­—ç¬¦ä¸²ç´¢å¼•string index</h1><h3 id="11-ğŸŒŸğŸŒŸ-ä½ æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼å»è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡çš„æ–¹å¼-s1-start-end-ï¼Œä½†æ˜¯start-å’Œ-end-å¿…é¡»å‡†ç¡®è½åœ¨å­—ç¬¦çš„è¾¹ç•Œå¤„"><a href="#11-ğŸŒŸğŸŒŸ-ä½ æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼å»è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡çš„æ–¹å¼-s1-start-end-ï¼Œä½†æ˜¯start-å’Œ-end-å¿…é¡»å‡†ç¡®è½åœ¨å­—ç¬¦çš„è¾¹ç•Œå¤„" class="headerlink" title="11.ğŸŒŸğŸŒŸ ä½ æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼å»è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡çš„æ–¹å¼ &amp;s1[start..end] ï¼Œä½†æ˜¯start å’Œ end å¿…é¡»å‡†ç¡®è½åœ¨å­—ç¬¦çš„è¾¹ç•Œå¤„."></a>11.ğŸŒŸğŸŒŸ ä½ æ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼å»è®¿é—®å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡çš„æ–¹å¼ &amp;s1[start..end] ï¼Œä½†æ˜¯start å’Œ end å¿…é¡»å‡†ç¡®è½åœ¨å­—ç¬¦çš„è¾¹ç•Œå¤„.</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hi,ä¸­å›½&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">h</span> = s1[<span class="hljs-number">0</span>]; <span class="hljs-comment">// ä¿®æ”¹å½“å‰è¡Œæ¥ä¿®å¤é”™è¯¯ï¼Œæç¤º: `h` å­—ç¬¦åœ¨ UTF-8 æ ¼å¼ä¸­åªéœ€è¦ 1 ä¸ªå­—èŠ‚æ¥è¡¨ç¤º</span><br>    <span class="hljs-built_in">assert_eq!</span>(h, <span class="hljs-string">&quot;h&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">h1</span> = &amp;s1[<span class="hljs-number">3</span>..<span class="hljs-number">5</span>];<span class="hljs-comment">// ä¿®æ”¹å½“å‰è¡Œæ¥ä¿®å¤é”™è¯¯ï¼Œæç¤º: `ä¸­` å­—ç¬¦åœ¨ UTF-8 æ ¼å¼ä¸­éœ€è¦ 3 ä¸ªå­—èŠ‚æ¥è¡¨ç¤º</span><br>    <span class="hljs-built_in">assert_eq!</span>(h1, <span class="hljs-string">&quot;ä¸­&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hi,ä¸­å›½&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">h</span> = &amp;s1[<span class="hljs-number">0</span>..<span class="hljs-number">1</span>]; <span class="hljs-comment">// ä¿®æ”¹å½“å‰è¡Œæ¥ä¿®å¤é”™è¯¯ï¼Œæç¤º: `h` å­—ç¬¦åœ¨ UTF-8 æ ¼å¼ä¸­åªéœ€è¦ 1 ä¸ªå­—èŠ‚æ¥è¡¨ç¤º</span><br>    <span class="hljs-built_in">assert_eq!</span>(h, <span class="hljs-string">&quot;h&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">h1</span> = &amp;s1[<span class="hljs-number">3</span>..=<span class="hljs-number">5</span>];<span class="hljs-comment">// ä¿®æ”¹å½“å‰è¡Œæ¥ä¿®å¤é”™è¯¯ï¼Œæç¤º: `ä¸­` å­—ç¬¦åœ¨ UTF-8 æ ¼å¼ä¸­éœ€è¦ 3 ä¸ªå­—èŠ‚æ¥è¡¨ç¤º</span><br>    <span class="hljs-built_in">assert_eq!</span>(h1, <span class="hljs-string">&quot;ä¸­&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="æ“ä½œ-UTF-8-å­—ç¬¦ä¸²"><a href="#æ“ä½œ-UTF-8-å­—ç¬¦ä¸²" class="headerlink" title="æ“ä½œ UTF-8 å­—ç¬¦ä¸²"></a>æ“ä½œ UTF-8 å­—ç¬¦ä¸²</h1><h3 id="12-ğŸŒŸ"><a href="#12-ğŸŒŸ" class="headerlink" title="12.ğŸŒŸ"></a>12.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œæ‰“å°å‡º &quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot; ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;</span>.__ &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, c)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œæ‰“å°å‡º &quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot; ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;</span>.<span class="hljs-title function_ invoke__">chars</span>() &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, c)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="utf8-slice"><a href="#utf8-slice" class="headerlink" title="utf8_slice"></a>utf8_slice</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰æ–¹åº“ utf8_slice æ¥è®¿é—® UTF-8 å­—ç¬¦ä¸²çš„æŸä¸ªå­ä¸²ï¼Œä½†æ˜¯ä¸ä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¯¥åº“ç´¢å¼•çš„æ˜¯å­—ç¬¦ï¼Œè€Œä¸æ˜¯å­—èŠ‚.</p><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> utf8_slice;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;The ğŸš€ goes to the ğŸŒ‘!&quot;</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">rocket</span> = utf8_slice::<span class="hljs-title function_ invoke__">slice</span>(s, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br>    <span class="hljs-comment">// ç»“æœæ˜¯ &quot;ğŸš€&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;å­—ç¬¦ä¸²å­—é¢é‡çš„ç±»å‹æ˜¯ &amp;amp;strï¼Œ ä¾‹å¦‚ let s: &amp;amp;str &amp;#x3D; â€œhello, worldâ€ ä¸­çš„ â€œhello, worldâ€ çš„ç±»å‹å°±æ˜¯ &amp;amp;strã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>kde-connect</title>
    <link href="https://lilinzta.github.io/2023/08/08/kde-connect/"/>
    <id>https://lilinzta.github.io/2023/08/08/kde-connect/</id>
    <published>2023-08-08T09:27:02.000Z</published>
    <updated>2024-01-17T15:05:42.365Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶-å±€åŸŸç½‘"><a href="#ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶-å±€åŸŸç½‘" class="headerlink" title="ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶(å±€åŸŸç½‘)"></a>ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶(å±€åŸŸç½‘)</h1><span id="more"></span><h3 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h3><ul><li>Windows: <a href="https://apps.microsoft.com/store/detail/kde-connect/9N93MRMSXBF0">Microsoft Store</a></li><li>Linux: pkg name is <code>kdeconnect-kde</code>, <code>kdeconnect-plasma</code>, just <code>kdeconnect</code> or <code>kde-connect</code></li><li>Android: <a href="https://play.google.com/store/apps/details?id=org.kde.kdeconnect_tp&pli=1">Play Store</a>or<a href="https://f-droid.org/packages/org.kde.kdeconnect_tp/">F-Droid</a></li><li>IOS: <a href="https://apps.apple.com/us/app/kde-connect/id1580245991">App Store</a></li></ul><h3 id="2-cli"><a href="#2-cli" class="headerlink" title="2.cli"></a>2.cli</h3><p>å›¾å½¢ç•Œé¢çš„ä½¿ç”¨ä¸å†ä»‹ç»ï¼Œå¯ä»¥è‡ªè¡Œæ¢ç´¢</p><p>ä½¿ç”¨<code>kdeconnect-cli -h</code>æŸ¥çœ‹å¸®åŠ©ï¼Œè·å¾—ä»¥ä¸‹ä¿¡æ¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs sh">Usage: kdeconnect-cli [options]<br>KDE Connect CLI tool<br><br>Options:<br>  -l, --list-devices            List all devices<br>  -a, --list-available          List available (paired and reachable) devices<br>  --id-only                     Make --list-devices or --list-available <span class="hljs-built_in">print</span><br>                                only the devices <span class="hljs-built_in">id</span>, to ease scripting<br>  --name-only                   Make --list-devices or --list-available <span class="hljs-built_in">print</span><br>                                only the devices name, to ease scripting<br>  --id-name-only                Make --list-devices or --list-available <span class="hljs-built_in">print</span><br>                                only the devices <span class="hljs-built_in">id</span> and name, to ease scripting<br>  --refresh                     Search <span class="hljs-keyword">for</span> devices <span class="hljs-keyword">in</span> the network and<br>                                re-establish connections<br>  --pair                        Request pairing to a said device<br>  --ring                        Find the said device by ringing it.<br>  --unpair                      Stop pairing to a said device<br>  --ping                        Sends a ping to said device<br>  --ping-msg &lt;message&gt;          Same as ping but you can <span class="hljs-built_in">set</span> the message to<br>                                display<br>  --share &lt;path or URL&gt;         Share a file/URL to a said device<br>  --share-text &lt;text&gt;           Share text to a said device<br>  --list-notifications          Display the notifications on a said device<br>  --lock                        Lock the specified device<br>  --unlock                      Unlock the specified device<br>  --send-sms &lt;message&gt;          Sends an SMS. Requires destination<br>  --destination &lt;phone number&gt;  Phone number to send the message<br>  --attachment &lt;file urls&gt;      File urls to send attachments with the message<br>                                (can be passed multiple <span class="hljs-built_in">times</span>)<br>  --device, -d &lt;dev&gt;            Device ID<br>  --name, -n &lt;name&gt;             Device Name<br>  --encryption-info             Get encryption info about said device<br>  --list-commands               Lists remote commands and their ids<br>  --execute-command &lt;<span class="hljs-built_in">id</span>&gt;        Executes a remote <span class="hljs-built_in">command</span> by <span class="hljs-built_in">id</span><br>  -k, --send-keys &lt;key&gt;         Sends keys to a said device<br>  --my-id                       Display this device<span class="hljs-string">&#x27;s id and exit</span><br><span class="hljs-string">  --photo &lt;path&gt;                Open the connected device&#x27;</span>s camera and transfer<br>                                the photo<br>  -h, --<span class="hljs-built_in">help</span>                    Displays <span class="hljs-built_in">help</span> on commandline options.<br>  --help-all                    Displays <span class="hljs-built_in">help</span> including Qt specific options.<br>  -v, --version                 Displays version information.<br>  --author                      Show author information.<br>  --license                     Show license information.<br>  --desktopfile &lt;file name&gt;     The base file name of the desktop entry <span class="hljs-keyword">for</span><br>                                this application.<br></code></pre></td></tr></table></figure><h3 id="3-ä½¿ç”¨"><a href="#3-ä½¿ç”¨" class="headerlink" title="3.ä½¿ç”¨"></a>3.ä½¿ç”¨</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># Arch -&gt; Android</span><br><span class="hljs-built_in">alias</span> kcp=<span class="hljs-string">&quot;kdeconnect-cli -n &lt;device name&gt; --share&quot;</span><br>kcp &lt;path_to_file&gt;<br><span class="hljs-comment"># Android -&gt; Arch</span><br>ä¹–ä¹–ç”¨GUIç½¢<br></code></pre></td></tr></table></figure><p>é«˜çº§ç”¨æ³•è¯·æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯å’Œæ–‡æ¡£è‡ªè¡Œæ¢ç´¢</p><blockquote><p>å‚è€ƒé“¾æ¥: <a href="https://github.com/KDE/kdeconnect-kde">https://github.com/KDE/kdeconnect-kde</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶-å±€åŸŸç½‘&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶-å±€åŸŸç½‘&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶(å±€åŸŸç½‘)&quot;&gt;&lt;/a&gt;ä½¿ç”¨kdeconnectä¼˜é›…åœ°ä¼ æ–‡ä»¶(å±€åŸŸç½‘)&lt;/h1&gt;</summary>
    
    
    
    
    <category term="KDE" scheme="https://lilinzta.github.io/tags/KDE/"/>
    
  </entry>
  
  <entry>
    <title>5.2.å¼•ç”¨å’Œå€Ÿç”¨</title>
    <link href="https://lilinzta.github.io/2023/08/07/5-2-%E5%BC%95%E7%94%A8%E5%92%8C%E5%80%9F%E7%94%A8/"/>
    <id>https://lilinzta.github.io/2023/08/07/5-2-%E5%BC%95%E7%94%A8%E5%92%8C%E5%80%9F%E7%94%A8/</id>
    <published>2023-08-07T12:03:54.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><h3 id="1-ğŸŒŸ"><a href="#1-ğŸŒŸ" class="headerlink" title="1.ğŸŒŸ"></a>1.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;<br>   <span class="hljs-comment">// å¡«å†™ç©ºç™½å¤„</span><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = __;<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x çš„å†…å­˜åœ°å€æ˜¯ &#123;:p&#125;&quot;</span>, p); <span class="hljs-comment">// output: 0x16fa3ac84</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;<br>   <span class="hljs-comment">// å¡«å†™ç©ºç™½å¤„</span><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = &amp;x;<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x çš„å†…å­˜åœ°å€æ˜¯ &#123;:p&#125;&quot;</span>, p); <span class="hljs-comment">// output: 0x16fa3ac84</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸ"><a href="#2-ğŸŒŸ" class="headerlink" title="2.ğŸŒŸ"></a>2.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = &amp;x;<br><br>    <span class="hljs-comment">// åªèƒ½ä¿®æ”¹ä»¥ä¸‹è¡Œ</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5</span>, y);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = &amp;x;<br><br>    <span class="hljs-comment">// åªèƒ½ä¿®æ”¹ä»¥ä¸‹è¡Œ</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">5</span>, *y);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸ"><a href="#3-ğŸŒŸ" class="headerlink" title="3.ğŸŒŸ"></a>3.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">borrow_object</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">borrow_object</span>(s: &amp;<span class="hljs-type">String</span>) &#123;&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">borrow_object</span>(&amp;s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">borrow_object</span>(s: &amp;<span class="hljs-type">String</span>) &#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸ"><a href="#4-ğŸŒŸ" class="headerlink" title="4.ğŸŒŸ"></a>4.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">push_str</span>(s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">push_str</span>(s: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span>) &#123;<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">push_str</span>(&amp;<span class="hljs-keyword">mut</span> s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">push_str</span>(s: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span>) &#123;<br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-comment">// å¡«å†™ç©ºç™½å¤„ï¼Œè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = __;<br><br>    p.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-comment">// å¡«å†™ç©ºç™½å¤„ï¼Œè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = &amp;<span class="hljs-keyword">mut</span> s;<br><br>    p.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p>ref ä¸ &amp; ç±»ä¼¼ï¼Œå¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå€¼çš„å¼•ç”¨ï¼Œä½†æ˜¯å®ƒä»¬çš„ç”¨æ³•æœ‰æ‰€ä¸åŒã€‚</p><h3 id="6-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#6-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="6.ğŸŒŸğŸŒŸğŸŒŸ"></a>6.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c</span> = <span class="hljs-string">&#x27;ä¸­&#x27;</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;c;<br>    <span class="hljs-comment">// å¡«å†™ç©ºç™½å¤„ï¼Œä½†æ˜¯ä¸è¦ä¿®æ”¹å…¶å®ƒè¡Œçš„ä»£ç </span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">__</span> r2 = c;<br><br>    <span class="hljs-built_in">assert_eq!</span>(*r1, *r2);<br><br>    <span class="hljs-comment">// åˆ¤æ–­ä¸¤ä¸ªå†…å­˜åœ°å€çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">get_addr</span>(r1),<span class="hljs-title function_ invoke__">get_addr</span>(r2));<br>&#125;<br><br><span class="hljs-comment">// è·å–ä¼ å…¥å¼•ç”¨çš„å†…å­˜åœ°å€çš„å­—ç¬¦ä¸²å½¢å¼</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_addr</span>(r: &amp;<span class="hljs-type">char</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;:p&#125;&quot;</span>, r)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c</span> = <span class="hljs-string">&#x27;ä¸­&#x27;</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;c;<br>    <span class="hljs-comment">// å¡«å†™ç©ºç™½å¤„ï¼Œä½†æ˜¯ä¸è¦ä¿®æ”¹å…¶å®ƒè¡Œçš„ä»£ç </span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ref</span> r2 = c;<br><br>    <span class="hljs-built_in">assert_eq!</span>(*r1, *r2);<br><br>    <span class="hljs-comment">// åˆ¤æ–­ä¸¤ä¸ªå†…å­˜åœ°å€çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰</span><br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">get_addr</span>(r1),<span class="hljs-title function_ invoke__">get_addr</span>(r2));<br>&#125;<br><br><span class="hljs-comment">// è·å–ä¼ å…¥å¼•ç”¨çš„å†…å­˜åœ°å€çš„å­—ç¬¦ä¸²å½¢å¼</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_addr</span>(r: &amp;<span class="hljs-type">char</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;:p&#125;&quot;</span>, r)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å€Ÿç”¨è§„åˆ™"><a href="#å€Ÿç”¨è§„åˆ™" class="headerlink" title="å€Ÿç”¨è§„åˆ™"></a>å€Ÿç”¨è§„åˆ™</h2><h3 id="7-ğŸŒŸ"><a href="#7-ğŸŒŸ" class="headerlink" title="7.ğŸŒŸ"></a>7.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ç§»é™¤ä»£ç æŸä¸ªéƒ¨åˆ†ï¼Œè®©å®ƒå·¥ä½œ</span><br><span class="hljs-comment">// ä½ ä¸èƒ½ç§»é™¤æ•´è¡Œçš„ä»£ç ï¼</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r2</span> = &amp;<span class="hljs-keyword">mut</span> s;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, r1, r2);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;s;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r2</span> = &amp;s;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, r1, r2);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¯å˜æ€§"><a href="#å¯å˜æ€§" class="headerlink" title="å¯å˜æ€§"></a>å¯å˜æ€§</h2><h3 id="8-ğŸŒŸ-é”™è¯¯-ä»ä¸å¯å˜å¯¹è±¡å€Ÿç”¨å¯å˜"><a href="#8-ğŸŒŸ-é”™è¯¯-ä»ä¸å¯å˜å¯¹è±¡å€Ÿç”¨å¯å˜" class="headerlink" title="8.ğŸŒŸ é”™è¯¯: ä»ä¸å¯å˜å¯¹è±¡å€Ÿç”¨å¯å˜"></a>8.ğŸŒŸ é”™è¯¯: ä»ä¸å¯å˜å¯¹è±¡å€Ÿç”¨å¯å˜</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// é€šè¿‡ä¿®æ”¹ä¸‹é¢ä¸€è¡Œä»£ç æ¥ä¿®å¤é”™è¯¯</span><br>    <span class="hljs-keyword">let</span>  <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">borrow_object</span>(&amp;<span class="hljs-keyword">mut</span> s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">borrow_object</span>(s: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span>) &#123;&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// é€šè¿‡ä¿®æ”¹ä¸‹é¢ä¸€è¡Œä»£ç æ¥ä¿®å¤é”™è¯¯</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">borrow_object</span>(&amp;<span class="hljs-keyword">mut</span> s)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">borrow_object</span>(s: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">String</span>) &#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="9-ğŸŒŸğŸŒŸ-Ok-ä»å¯å˜å¯¹è±¡å€Ÿç”¨ä¸å¯å˜"><a href="#9-ğŸŒŸğŸŒŸ-Ok-ä»å¯å˜å¯¹è±¡å€Ÿç”¨ä¸å¯å˜" class="headerlink" title="9.ğŸŒŸğŸŒŸ Ok: ä»å¯å˜å¯¹è±¡å€Ÿç”¨ä¸å¯å˜"></a>9.ğŸŒŸğŸŒŸ Ok: ä»å¯å˜å¯¹è±¡å€Ÿç”¨ä¸å¯å˜</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸‹é¢çš„ä»£ç æ²¡æœ‰ä»»ä½•é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">borrow_object</span>(&amp;s);<br><br>    s.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">borrow_object</span>(s: &amp;<span class="hljs-type">String</span>) &#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="NLL"><a href="#NLL" class="headerlink" title="NLL"></a>NLL</h2><h3 id="10-ğŸŒŸğŸŒŸ"><a href="#10-ğŸŒŸğŸŒŸ" class="headerlink" title="10.ğŸŒŸğŸŒŸ"></a>10.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// æ³¨é‡Šæ‰ä¸€è¡Œä»£ç è®©å®ƒå·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>    r1.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r2</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>    r2.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;!&quot;</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,r1);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// æ³¨é‡Šæ‰ä¸€è¡Œä»£ç è®©å®ƒå·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>    r1.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r2</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>    r2.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;!&quot;</span>);<br><br>    <span class="hljs-comment">// println!(&quot;&#123;&#125;&quot;,r1);</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="11-ğŸŒŸğŸŒŸ"><a href="#11-ğŸŒŸğŸŒŸ" class="headerlink" title="11.ğŸŒŸğŸŒŸ"></a>11.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r2</span> = &amp;<span class="hljs-keyword">mut</span> s;<br><br>    <span class="hljs-comment">// åœ¨ä¸‹é¢å¢åŠ ä¸€è¡Œä»£ç äººä¸ºåˆ¶é€ ç¼–è¯‘é”™è¯¯ï¼šcannot borrow `s` as mutable more than once at a time</span><br>    <span class="hljs-comment">// ä½ ä¸èƒ½åŒæ—¶ä½¿ç”¨ r1 å’Œ r2</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = &amp;<span class="hljs-keyword">mut</span> s;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r2</span> = &amp;<span class="hljs-keyword">mut</span> s;<br><br>    <span class="hljs-comment">// åœ¨ä¸‹é¢å¢åŠ ä¸€è¡Œä»£ç äººä¸ºåˆ¶é€ ç¼–è¯‘é”™è¯¯ï¼šcannot borrow `s` as mutable more than once at a time</span><br>    <span class="hljs-comment">// ä½ ä¸èƒ½åŒæ—¶ä½¿ç”¨ r1 å’Œ r2</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, r1, r2);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å¼•ç”¨&quot;&gt;&lt;a href=&quot;#å¼•ç”¨&quot; class=&quot;headerlink&quot; title=&quot;å¼•ç”¨&quot;&gt;&lt;/a&gt;å¼•ç”¨&lt;/h2&gt;&lt;h3 id=&quot;1-ğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸ&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸ&quot;&gt;&lt;/a&gt;1.ğŸŒŸ&lt;/h</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>Arch Linux å®‰è£… VMware Workstation</title>
    <link href="https://lilinzta.github.io/2023/08/07/Arch-Linux-%E5%AE%89%E8%A3%85-VMware-Workstation/"/>
    <id>https://lilinzta.github.io/2023/08/07/Arch-Linux-%E5%AE%89%E8%A3%85-VMware-Workstation/</id>
    <published>2023-08-07T00:43:57.000Z</published>
    <updated>2024-01-20T11:32:09.777Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Arch-Linuxä»AURæºå®‰è£…VMware-Workstation"><a href="#Arch-Linuxä»AURæºå®‰è£…VMware-Workstation" class="headerlink" title="Arch Linuxä»AURæºå®‰è£…VMware Workstation"></a>Arch Linuxä»AURæºå®‰è£…VMware Workstation</h1><span id="more"></span><p>æ›´å®Œæ•´çš„å®‰è£…è¯´æ˜è¯·å‚è€ƒ <a href="https://wiki.archlinuxcn.org/wiki/VMware">Arch Wiki</a></p><h3 id="1-å®‰è£…ä¾èµ–"><a href="#1-å®‰è£…ä¾èµ–" class="headerlink" title="1.å®‰è£…ä¾èµ–"></a>1.å®‰è£…ä¾èµ–</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo pacman -S fuse2 gtkmm linux-headers ncurses libcanberra pcsclite<br></code></pre></td></tr></table></figure><h3 id="2-å®‰è£…VMware-Workstation"><a href="#2-å®‰è£…VMware-Workstation" class="headerlink" title="2.å®‰è£…VMware Workstation"></a>2.å®‰è£…VMware Workstation</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yay -S vmware-workstation<br></code></pre></td></tr></table></figure><h3 id="3-å¼€å¯æœåŠ¡"><a href="#3-å¼€å¯æœåŠ¡" class="headerlink" title="3.å¼€å¯æœåŠ¡"></a>3.å¼€å¯æœåŠ¡</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">systemctl start vmware-networks.service<br>systemctl start vmware-usbarbitrator.service<br></code></pre></td></tr></table></figure><h3 id="4-åŠ è½½VMwareæ¨¡å—"><a href="#4-åŠ è½½VMwareæ¨¡å—" class="headerlink" title="4.åŠ è½½VMwareæ¨¡å—"></a>4.åŠ è½½VMwareæ¨¡å—</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo modprobe -a vmw_vmci vmmon<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Arch-Linuxä»AURæºå®‰è£…VMware-Workstation&quot;&gt;&lt;a href=&quot;#Arch-Linuxä»AURæºå®‰è£…VMware-Workstation&quot; class=&quot;headerlink&quot; title=&quot;Arch Linuxä»AURæºå®‰è£…VMware Workstation&quot;&gt;&lt;/a&gt;Arch Linuxä»AURæºå®‰è£…VMware Workstation&lt;/h1&gt;</summary>
    
    
    
    
    <category term="Arch Linux" scheme="https://lilinzta.github.io/tags/Arch-Linux/"/>
    
  </entry>
  
  <entry>
    <title>5.1.æ‰€æœ‰æƒ</title>
    <link href="https://lilinzta.github.io/2023/08/07/5-1-%E6%89%80%E6%9C%89%E6%9D%83/"/>
    <id>https://lilinzta.github.io/2023/08/07/5-1-%E6%89%80%E6%9C%89%E6%9D%83/</id>
    <published>2023-08-06T23:57:43.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = x;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,x,y);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = &amp;x;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,x,y);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-string">&quot;hello, world&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = x;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,x,y);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = x.<span class="hljs-title function_ invoke__">as_str</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,x,y);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ–¹æ³•æ¥é€šè¿‡ç¼–è¯‘</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = x.<span class="hljs-title function_ invoke__">clone</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,x,y);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸è¦ä¿®æ”¹ main ä¸­çš„ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = <span class="hljs-title function_ invoke__">take_ownership</span>(s1);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s2);<br>&#125;<br><br><span class="hljs-comment">// åªèƒ½ä¿®æ”¹ä¸‹é¢çš„ä»£ç !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_ownership</span>(s: <span class="hljs-type">String</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸è¦ä¿®æ”¹ main ä¸­çš„ä»£ç </span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = <span class="hljs-title function_ invoke__">take_ownership</span>(s1);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s2);<br>&#125;<br><br><span class="hljs-comment">// åªèƒ½ä¿®æ”¹ä¸‹é¢çš„ä»£ç !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">take_ownership</span>(s: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>    s<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">give_ownership</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>&#125;<br><br><span class="hljs-comment">// åªèƒ½ä¿®æ”¹ä¸‹é¢çš„ä»£ç !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">give_ownership</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-comment">// convert String to Vec</span><br>    <span class="hljs-comment">// å°† String è½¬æ¢æˆ Vec ç±»å‹</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_s</span> = s.<span class="hljs-title function_ invoke__">into_bytes</span>();<br>    s<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">give_ownership</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>&#125;<br><br><span class="hljs-comment">// åªèƒ½ä¿®æ”¹ä¸‹é¢çš„ä»£ç !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">give_ownership</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br>    <span class="hljs-comment">// convert String to Vec</span><br>    <span class="hljs-comment">// å°† String è½¬æ¢æˆ Vec ç±»å‹</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_s</span> = s.<span class="hljs-title function_ invoke__">clone</span>().<span class="hljs-title function_ invoke__">into_bytes</span>();<br>    s<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦åˆ é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">print_str</span>(s);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_str</span>(s: <span class="hljs-type">String</span>)  &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯ï¼Œä¸è¦åˆ é™¤ä»»ä½•ä»£ç è¡Œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br><br>    <span class="hljs-title function_ invoke__">print_str</span>(s.<span class="hljs-title function_ invoke__">clone</span>());<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_str</span>(s: <span class="hljs-type">String</span>)  &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,s)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¸è¦ä½¿ç”¨ cloneï¼Œä½¿ç”¨ copy çš„æ–¹å¼æ›¿ä»£</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, (), <span class="hljs-string">&quot;hello&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>());<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = x.<span class="hljs-title function_ invoke__">clone</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;, &#123;:?&#125;&quot;</span>, x, y);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, (), <span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = x;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;, &#123;:?&#125;&quot;</span>, x, y);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸ"><a href="#6-ğŸŒŸ" class="headerlink" title="6.ğŸŒŸ"></a>6.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-comment">// åªä¿®æ”¹ä¸‹é¢è¿™è¡Œä»£ç  !</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = s;<br><br>    s1.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello, &quot;</span>);<br><br>    <span class="hljs-comment">// åªä¿®æ”¹ä¸‹é¢è¿™è¡Œä»£ç  !</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s1</span> = s;<br><br>    s1.<span class="hljs-title function_ invoke__">push_str</span>(<span class="hljs-string">&quot;world&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#7-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="7.ğŸŒŸğŸŒŸğŸŒŸ"></a>7.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">5</span>);<br><br>    <span class="hljs-keyword">let</span> ...      <span class="hljs-comment">// å®Œæˆè¯¥è¡Œä»£ç ï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒè¡Œï¼</span><br><br>    *y = <span class="hljs-number">4</span>;<br><br>    <span class="hljs-built_in">assert_eq!</span>(*x, <span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">5</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>);     <span class="hljs-comment">// å®Œæˆè¯¥è¡Œä»£ç ï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒè¡Œï¼</span><br><br>    *y = <span class="hljs-number">4</span>;<br><br>    <span class="hljs-built_in">assert_eq!</span>(*x, <span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="éƒ¨åˆ†move"><a href="#éƒ¨åˆ†move" class="headerlink" title="éƒ¨åˆ†move"></a>éƒ¨åˆ†move</h2><p>å½“è§£æ„ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ move å’Œå¼•ç”¨æ¨¡å¼ç»‘å®šçš„æ–¹å¼ã€‚å½“è¿™ä¹ˆåšæ—¶ï¼Œéƒ¨åˆ† move å°±ä¼šå‘ç”Ÿï¼šå˜é‡ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æƒè¢«è½¬ç§»ç»™å…¶å®ƒå˜é‡ï¼Œè€Œå¦ä¸€éƒ¨åˆ†æˆ‘ä»¬è·å–äº†å®ƒçš„å¼•ç”¨ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒåŸå˜é‡å°†æ— æ³•å†è¢«ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰è½¬ç§»æ‰€æœ‰æƒçš„é‚£ä¸€éƒ¨åˆ†ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰è¢«å¼•ç”¨çš„é‚£éƒ¨åˆ†ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-meta">#[derive(Debug)]</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>        name: <span class="hljs-type">String</span>,<br>        age: <span class="hljs-type">Box</span>&lt;<span class="hljs-type">u8</span>&gt;,<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">person</span> = Person &#123;<br>        name: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Alice&quot;</span>),<br>        age: <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">20</span>),<br>    &#125;;<br><br>    <span class="hljs-comment">// é€šè¿‡è¿™ç§è§£æ„å¼æ¨¡å¼åŒ¹é…ï¼Œperson.name çš„æ‰€æœ‰æƒè¢«è½¬ç§»ç»™æ–°çš„å˜é‡ `name`</span><br>    <span class="hljs-comment">// ä½†æ˜¯ï¼Œè¿™é‡Œ `age` å˜é‡å´æ˜¯å¯¹ person.age çš„å¼•ç”¨, è¿™é‡Œ ref çš„ä½¿ç”¨ç›¸å½“äº: let age = &amp;person.age </span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">Person</span> &#123; name, <span class="hljs-keyword">ref</span> age &#125; = person;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The person&#x27;s age is &#123;&#125;&quot;</span>, age);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The person&#x27;s name is &#123;&#125;&quot;</span>, name);<br><br>    <span class="hljs-comment">// Error! åŸå› æ˜¯ person çš„ä¸€éƒ¨åˆ†å·²ç»è¢«è½¬ç§»äº†æ‰€æœ‰æƒï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å†ä½¿ç”¨å®ƒ</span><br>    <span class="hljs-comment">//println!(&quot;The person struct is &#123;:?&#125;&quot;, person);</span><br><br>    <span class="hljs-comment">// è™½ç„¶ `person` ä½œä¸ºä¸€ä¸ªæ•´ä½“æ— æ³•å†è¢«ä½¿ç”¨ï¼Œä½†æ˜¯ `person.age` ä¾ç„¶å¯ä»¥ä½¿ç”¨</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The person&#x27;s age from person struct is &#123;&#125;&quot;</span>, person.age);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸ"><a href="#8-ğŸŒŸ" class="headerlink" title="8.ğŸŒŸ"></a>8.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = (<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>), <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;world&quot;</span>));<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">_s</span> = t.<span class="hljs-number">0</span>;<br><br>   <span class="hljs-comment">// ä»…ä¿®æ”¹ä¸‹é¢è¿™è¡Œä»£ç ï¼Œä¸”ä¸è¦ä½¿ç”¨ `_s`</span><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, t);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = (<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>), <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;world&quot;</span>));<br><br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">_s</span> = t.<span class="hljs-number">0</span>;<br><br>   <span class="hljs-comment">// ä»…ä¿®æ”¹ä¸‹é¢è¿™è¡Œä»£ç ï¼Œä¸”ä¸è¦ä½¿ç”¨ `_s`</span><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, t.<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9-ğŸŒŸğŸŒŸ"><a href="#9-ğŸŒŸğŸŒŸ" class="headerlink" title="9.ğŸŒŸğŸŒŸ"></a>9.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = (<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>), <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;world&quot;</span>));<br><br>   <span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br>   <span class="hljs-keyword">let</span> (__, __) = __;<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;, &#123;:?&#125;, &#123;:?&#125;&quot;</span>, s1, s2, t); <span class="hljs-comment">// -&gt; &quot;hello&quot;, &quot;world&quot;, (&quot;hello&quot;, &quot;world&quot;)</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = (<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>), <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;world&quot;</span>));<br><br>   <span class="hljs-comment">// å¡«ç©ºï¼Œä¸è¦ä¿®æ”¹å…¶å®ƒä»£ç </span><br>   <span class="hljs-keyword">let</span> (s1, s2) = &amp;t;<br><br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;, &#123;:?&#125;, &#123;:?&#125;&quot;</span>, s1, s2, t); <span class="hljs-comment">// -&gt; &quot;hello&quot;, &quot;world&quot;, (&quot;hello&quot;, &quot;world&quot;)</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ğŸŒŸğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸğŸŒŸ&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸğŸŒŸ&quot;&gt;&lt;/a&gt;1.ğŸŒŸğŸŒŸ&lt;/h3&gt;&lt;p&gt;Q:&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>4.4.å‡½æ•°</title>
    <link href="https://lilinzta.github.io/2023/08/06/4-4-%E5%87%BD%E6%95%B0/"/>
    <id>https://lilinzta.github.io/2023/08/06/4-4-%E5%87%BD%E6%95%B0/</id>
    <published>2023-08-05T16:00:00.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹ä¸‹é¢ä¸¤è¡Œä»£ç !</span><br>    <span class="hljs-keyword">let</span> (x, y) = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">sum</span>(x, y);<br><br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-number">3</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>(x, y: <span class="hljs-type">i32</span>) &#123;<br>    x + y;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// ä¸è¦ä¿®æ”¹ä¸‹é¢ä¸¤è¡Œä»£ç !</span><br>    <span class="hljs-keyword">let</span> (x, y) = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">sum</span>(x, y);<br><br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-number">3</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>(x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>&#123;<br>    x + y<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ"><a href="#2-ğŸŒŸğŸŒŸ" class="headerlink" title="2.ğŸŒŸğŸŒŸ"></a>2.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-title function_ invoke__">print</span>();<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹æ¥æ›¿ä»£ i32</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;hello,world&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-title function_ invoke__">print</span>();<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹æ¥æ›¿ä»£ i32</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>() <span class="hljs-punctuation">-&gt;</span> () &#123;<br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;hello,world&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ç”¨ä¸¤ç§æ–¹æ³•æ±‚è§£</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">never_return</span>();<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">never_return</span>() <span class="hljs-punctuation">-&gt;</span> ! &#123;<br>    <span class="hljs-comment">// å®ç°è¿™ä¸ªå‡½æ•°ï¼Œä¸è¦ä¿®æ”¹å‡½æ•°ç­¾å!</span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">never_return</span>();<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">never_return</span>() <span class="hljs-punctuation">-&gt;</span> ! &#123;<br>    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;I return nothing!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">never_return</span>();<br>&#125;<br><br><span class="hljs-keyword">use</span> std::thread;<br><span class="hljs-keyword">use</span> std::time;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">never_return</span>() <span class="hljs-punctuation">-&gt;</span> ! &#123;<br>    <span class="hljs-keyword">loop</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;I return nothing&quot;</span>);<br>        thread::<span class="hljs-title function_ invoke__">sleep</span>(time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>))<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ-å‘æ•£å‡½æ•°-Diverging-function-ä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ç”¨äºæ›¿ä»£éœ€è¦è¿”å›ä»»ä½•å€¼çš„åœ°æ–¹"><a href="#4-ğŸŒŸğŸŒŸ-å‘æ•£å‡½æ•°-Diverging-function-ä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ç”¨äºæ›¿ä»£éœ€è¦è¿”å›ä»»ä½•å€¼çš„åœ°æ–¹" class="headerlink" title="4.ğŸŒŸğŸŒŸ å‘æ•£å‡½æ•°( Diverging function )ä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ç”¨äºæ›¿ä»£éœ€è¦è¿”å›ä»»ä½•å€¼çš„åœ°æ–¹"></a>4.ğŸŒŸğŸŒŸ å‘æ•£å‡½æ•°( Diverging function )ä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ç”¨äºæ›¿ä»£éœ€è¦è¿”å›ä»»ä½•å€¼çš„åœ°æ–¹</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_option</span>(tp: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; &#123;<br>    <span class="hljs-keyword">match</span> tp &#123;<br>        <span class="hljs-number">1</span> =&gt; &#123;<br>            <span class="hljs-comment">// TODO</span><br>        &#125;<br>        _ =&gt; &#123;<br>            <span class="hljs-comment">// TODO</span><br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-comment">// è¿™é‡Œä¸å…¶è¿”å›ä¸€ä¸ª Noneï¼Œä¸å¦‚ä½¿ç”¨å‘æ•£å‡½æ•°æ›¿ä»£</span><br>    <span class="hljs-title function_ invoke__">never_return_fn</span>()<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ä¸‰ç§æ–¹æ³•å®ç°ä»¥ä¸‹å‘æ•£å‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">never_return_fn</span>() <span class="hljs-punctuation">-&gt;</span> ! &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">never_return_fn</span>() <span class="hljs-punctuation">-&gt;</span> ! &#123;<br>    <span class="hljs-built_in">panic!</span>()<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">never_return_fn</span>() <span class="hljs-punctuation">-&gt;</span> ! &#123;<br>    todo!();<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">never_return_fn</span>() <span class="hljs-punctuation">-&gt;</span> ! &#123;<br>    <span class="hljs-keyword">loop</span> &#123;<br>        std::thread::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>))<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">b</span> = __;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_v</span> = <span class="hljs-keyword">match</span> b &#123;<br>        <span class="hljs-literal">true</span> =&gt; <span class="hljs-number">1</span>,<br>        <span class="hljs-comment">// å‘æ•£å‡½æ•°ä¹Ÿå¯ä»¥ç”¨äº `match` è¡¨è¾¾å¼ï¼Œç”¨äºæ›¿ä»£ä»»ä½•ç±»å‹çš„å€¼</span><br>        <span class="hljs-literal">false</span> =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>);<br>            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;we have no value for `false`, but we can panic&quot;</span>)<br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exercise Failed if printing out this line!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// å¡«ç©º</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">b</span> = <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_v</span> = <span class="hljs-keyword">match</span> b &#123;<br>        <span class="hljs-literal">true</span> =&gt; <span class="hljs-number">1</span>,<br>        <span class="hljs-comment">// å‘æ•£å‡½æ•°ä¹Ÿå¯ä»¥ç”¨äº `match` è¡¨è¾¾å¼ï¼Œç”¨äºæ›¿ä»£ä»»ä½•ç±»å‹çš„å€¼</span><br>        <span class="hljs-literal">false</span> =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>);<br>            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;we have no value for `false`, but we can panic&quot;</span>)<br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Exercise Failed if printing out this line!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ğŸŒŸğŸŒŸğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸğŸŒŸğŸŒŸ&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸğŸŒŸğŸŒŸ&quot;&gt;&lt;/a&gt;1.ğŸŒŸğŸŒŸğŸŒŸ&lt;/h3&gt;&lt;p&gt;Q:&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>4.3.è¯­å¥ä¸è¡¨è¾¾å¼</title>
    <link href="https://lilinzta.github.io/2023/08/05/4-3-%E8%AF%AD%E5%8F%A5%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>https://lilinzta.github.io/2023/08/05/4-3-%E8%AF%AD%E5%8F%A5%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F/</id>
    <published>2023-08-04T16:00:00.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5u32</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">x_squared</span> = x * x;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">x_cube</span> = x_squared * x;<br><br>        <span class="hljs-comment">// ä¸‹é¢è¡¨è¾¾å¼çš„å€¼å°†è¢«èµ‹ç»™ `y`</span><br>        x_cube + x_squared + x<br>    &#125;;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">z</span> = &#123;<br>        <span class="hljs-comment">// åˆ†å·è®©è¡¨è¾¾å¼å˜æˆäº†è¯­å¥ï¼Œå› æ­¤è¿”å›çš„ä¸å†æ˜¯è¡¨è¾¾å¼ `2 * x` çš„å€¼ï¼Œè€Œæ˜¯è¯­å¥çš„å€¼ `()`</span><br>        <span class="hljs-number">2</span> * x;<br>    &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is &#123;:?&#125;&quot;</span>, x);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;y is &#123;:?&#125;&quot;</span>, y);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;z is &#123;:?&#125;&quot;</span>, z);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-ğŸŒŸğŸŒŸ"><a href="#1-ğŸŒŸğŸŒŸ" class="headerlink" title="1.ğŸŒŸğŸŒŸ"></a>1.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œèµ·æ¥</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = &#123;<br>       <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = <span class="hljs-number">1</span>;<br>       x += <span class="hljs-number">2</span><br>   &#125;;<br><br>   <span class="hljs-built_in">assert_eq!</span>(v, <span class="hljs-number">3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œèµ·æ¥</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = &#123;<br>       <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = <span class="hljs-number">1</span>;<br>       x += <span class="hljs-number">2</span><br>   &#125;;<br><br>   <span class="hljs-built_in">assert_eq!</span>(v, ());<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨ä¸¤ç§æ–¹æ³•è®©ä»£ç å·¥ä½œèµ·æ¥</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = &#123;<br>       <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = <span class="hljs-number">1</span>;<br>       x + <span class="hljs-number">2</span><br>   &#125;;<br><br>   <span class="hljs-built_in">assert_eq!</span>(v, <span class="hljs-number">3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸ"><a href="#2-ğŸŒŸ" class="headerlink" title="2.ğŸŒŸ"></a>2.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = (<span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">3</span>);<br><br>   <span class="hljs-built_in">assert!</span>(v == <span class="hljs-number">3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">3</span><br>        x<br>    &#125;;<br><br>   <span class="hljs-built_in">assert!</span>(v == <span class="hljs-number">3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸ"><a href="#3-ğŸŒŸ" class="headerlink" title="3.ğŸŒŸ"></a>3.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1</span> , <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-number">3</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>(x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    x + y;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">sum</span>(<span class="hljs-number">1</span> , <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(s, <span class="hljs-number">3</span>);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum</span>(x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    x + y<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ç¤ºä¾‹&quot;&gt;&lt;a href=&quot;#ç¤ºä¾‹&quot; class=&quot;headerlink&quot; title=&quot;ç¤ºä¾‹&quot;&gt;&lt;/a&gt;ç¤ºä¾‹&lt;/h3&gt;&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span c</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>4.2.å­—ç¬¦,å¸ƒå°”,å•å…ƒç±»å‹</title>
    <link href="https://lilinzta.github.io/2023/08/03/4-2-%E5%AD%97%E7%AC%A6-%E5%B8%83%E5%B0%94-%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B/"/>
    <id>https://lilinzta.github.io/2023/08/03/4-2-%E5%AD%97%E7%AC%A6-%E5%B8%83%E5%B0%94-%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B/</id>
    <published>2023-08-02T16:00:00.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ğŸŒŸ"><a href="#1-ğŸŒŸ" class="headerlink" title="1.ğŸŒŸ"></a>1.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹2å¤„ `assert_eq!` è®©ä»£ç å·¥ä½œ</span><br><br><span class="hljs-keyword">use</span> std::mem::size_of_val;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c1</span> = <span class="hljs-string">&#x27;a&#x27;</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;c1),<span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c2</span> = <span class="hljs-string">&#x27;ä¸­&#x27;</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;c2),<span class="hljs-number">3</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹2å¤„ `assert_eq!` è®©ä»£ç å·¥ä½œ</span><br><br><span class="hljs-keyword">use</span> std::mem::size_of_val;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c1</span> = <span class="hljs-string">&#x27;a&#x27;</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;c1),<span class="hljs-number">4</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c2</span> = <span class="hljs-string">&#x27;ä¸­&#x27;</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;c2),<span class="hljs-number">4</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸ"><a href="#2-ğŸŒŸ" class="headerlink" title="2.ğŸŒŸ"></a>2.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ä¸€è¡Œè®©ä»£ç æ­£å¸¸æ‰“å°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c1</span> = <span class="hljs-string">&quot;ä¸­&quot;</span>;<br>    <span class="hljs-title function_ invoke__">print_char</span>(c1);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_char</span>(c : <span class="hljs-type">char</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, c);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ä¸€è¡Œè®©ä»£ç æ­£å¸¸æ‰“å°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">c1</span> = <span class="hljs-string">&#x27;ä¸­&#x27;</span>;<br>    <span class="hljs-title function_ invoke__">print_char</span>(c1);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_char</span>(c : <span class="hljs-type">char</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, c);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸ"><a href="#3-ğŸŒŸ" class="headerlink" title="3.ğŸŒŸ"></a>3.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿æˆåŠŸæ‰“å°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_f</span>: <span class="hljs-type">bool</span> = <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> !t &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿æˆåŠŸæ‰“å°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_f</span>: <span class="hljs-type">bool</span> = <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> t &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸ"><a href="#4-ğŸŒŸ" class="headerlink" title="4.ğŸŒŸ"></a>4.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = <span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-literal">false</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(t, f);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">t</span> = <span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-literal">true</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(t, f);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è®©ä»£ç å·¥ä½œï¼Œä½†ä¸è¦ä¿®æ”¹ `implicitly_ret_unit` !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_v</span>: () = ();<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(v, <span class="hljs-title function_ invoke__">implicitly_ret_unit</span>());<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">implicitly_ret_unit</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;I will return a ()&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// ä¸è¦ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°ï¼Œå®ƒåªç”¨äºæ¼”ç¤ºï¼</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">explicitly_ret_unit</span>() <span class="hljs-punctuation">-&gt;</span> () &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;I will return a ()&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è®©ä»£ç å·¥ä½œï¼Œä½†ä¸è¦ä¿®æ”¹ `implicitly_ret_unit` !</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: () = ();<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(v, <span class="hljs-title function_ invoke__">implicitly_ret_unit</span>());<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">implicitly_ret_unit</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;I will return a ()&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// ä¸è¦ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°ï¼Œå®ƒåªç”¨äºæ¼”ç¤ºï¼</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">explicitly_ret_unit</span>() <span class="hljs-punctuation">-&gt;</span> () &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;I will return a ()&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸ-å•å…ƒç±»å‹å ç”¨çš„å†…å­˜å¤§å°æ˜¯å¤šå°‘ï¼Ÿ"><a href="#6-ğŸŒŸğŸŒŸ-å•å…ƒç±»å‹å ç”¨çš„å†…å­˜å¤§å°æ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="6.ğŸŒŸğŸŒŸ å•å…ƒç±»å‹å ç”¨çš„å†…å­˜å¤§å°æ˜¯å¤šå°‘ï¼Ÿ"></a>6.ğŸŒŸğŸŒŸ å•å…ƒç±»å‹å ç”¨çš„å†…å­˜å¤§å°æ˜¯å¤šå°‘ï¼Ÿ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è®©ä»£ç å·¥ä½œï¼šä¿®æ”¹ `assert!` ä¸­çš„ `4`</span><br><span class="hljs-keyword">use</span> std::mem::size_of_val;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">unit</span>: () = ();<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;unit) == <span class="hljs-number">4</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è®©ä»£ç å·¥ä½œï¼šä¿®æ”¹ `assert!` ä¸­çš„ `4`</span><br><span class="hljs-keyword">use</span> std::mem::size_of_val;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">unit</span>: () = ();<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-title function_ invoke__">size_of_val</span>(&amp;unit) == <span class="hljs-number">0</span>);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Success!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;1-ğŸŒŸ&quot;&gt;&lt;a href=&quot;#1-ğŸŒŸ&quot; class=&quot;headerlink&quot; title=&quot;1.ğŸŒŸ&quot;&gt;&lt;/a&gt;1.ğŸŒŸ&lt;/h3&gt;&lt;p&gt;Q:&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu</summary>
      
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>4.1.æ•°å€¼ç±»å‹</title>
    <link href="https://lilinzta.github.io/2023/07/31/4-1-%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B/"/>
    <id>https://lilinzta.github.io/2023/07/31/4-1-%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B/</id>
    <published>2023-07-30T16:00:00.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—"><a href="#æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—" class="headerlink" title="æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—"></a>æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—</h1><span id="more"></span><h3 id="1-ğŸŒŸ"><a href="#1-ğŸŒŸ" class="headerlink" title="1.ğŸŒŸ"></a>1.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ç§»é™¤æŸä¸ªéƒ¨åˆ†è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span>: <span class="hljs-type">u32</span> = <span class="hljs-number">5</span>;<br><br>    y = x;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">z</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// è¿™é‡Œ z çš„ç±»å‹æ˜¯?</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ç§»é™¤æŸä¸ªéƒ¨åˆ†è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span> = <span class="hljs-number">5</span>;<br><br>    y = x;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">z</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// è¿™é‡Œ z çš„ç±»å‹æ˜¯i32</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸ"><a href="#2-ğŸŒŸ" class="headerlink" title="2.ğŸŒŸ"></a>2.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: <span class="hljs-type">u16</span> = <span class="hljs-number">38_u8</span> <span class="hljs-keyword">as</span> __;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: <span class="hljs-type">u16</span> = <span class="hljs-number">38_u8</span> <span class="hljs-keyword">as</span> <span class="hljs-type">u16</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#3-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="3.ğŸŒŸğŸŒŸğŸŒŸ"></a>3.ğŸŒŸğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ `assert_eq!` è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-string">&quot;u32&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(), <span class="hljs-title function_ invoke__">type_of</span>(&amp;x));<br>&#125;<br><br><span class="hljs-comment">// ä»¥ä¸‹å‡½æ•°å¯ä»¥è·å–ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œå¹¶è¿”å›ç±»å‹çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œä¾‹å¦‚  &quot;i8&quot;, &quot;u8&quot;, &quot;i32&quot;, &quot;u32&quot;</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">type_of</span>&lt;T&gt;(_: &amp;T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, std::any::type_name::&lt;T&gt;())<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ `assert_eq!` è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-string">&quot;i32&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(), <span class="hljs-title function_ invoke__">type_of</span>(&amp;x));<br>&#125;<br><br><span class="hljs-comment">// ä»¥ä¸‹å‡½æ•°å¯ä»¥è·å–ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œå¹¶è¿”å›ç±»å‹çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œä¾‹å¦‚  &quot;i8&quot;, &quot;u8&quot;, &quot;i32&quot;, &quot;u32&quot;</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">type_of</span>&lt;T&gt;(_: &amp;T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, std::any::type_name::&lt;T&gt;())<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-type">i8</span>::MAX, __);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-type">u8</span>::MAX, __);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-type">i8</span>::MAX, <span class="hljs-number">127</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-type">u8</span>::MAX, <span class="hljs-number">255</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ"><a href="#5-ğŸŒŸğŸŒŸ" class="headerlink" title="5.ğŸŒŸğŸŒŸ"></a>5.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è§£å†³ä»£ç ä¸­çš„é”™è¯¯å’Œ `panic`</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = <span class="hljs-number">251_u8</span> + <span class="hljs-number">8</span>;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span> = <span class="hljs-type">i8</span>::<span class="hljs-title function_ invoke__">checked_add</span>(<span class="hljs-number">251</span>, <span class="hljs-number">8</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,v1,v2);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// è§£å†³ä»£ç ä¸­çš„é”™è¯¯å’Œ `panic`</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span> = <span class="hljs-number">247_u8</span> + <span class="hljs-number">8</span>;<br>   <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span> = <span class="hljs-type">i8</span>::<span class="hljs-title function_ invoke__">checked_add</span>(<span class="hljs-number">119</span>, <span class="hljs-number">8</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,v1,v2);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸ"><a href="#6-ğŸŒŸğŸŒŸ" class="headerlink" title="6.ğŸŒŸğŸŒŸ"></a>6.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ `assert!` è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-number">1_024</span> + <span class="hljs-number">0xff</span> + <span class="hljs-number">0o77</span> + <span class="hljs-number">0b1111_1111</span>;<br>    <span class="hljs-built_in">assert!</span>(v == <span class="hljs-number">1579</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®æ”¹ `assert!` è®©ä»£ç å·¥ä½œ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-number">1_024</span> + <span class="hljs-number">0xff</span> + <span class="hljs-number">0o77</span> + <span class="hljs-number">0b1111_1111</span>;<br>    <span class="hljs-built_in">assert!</span>(v == <span class="hljs-number">1597</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-ğŸŒŸ"><a href="#7-ğŸŒŸ" class="headerlink" title="7.ğŸŒŸ"></a>7.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å°† ? æ›¿æ¢æˆä½ çš„ç­”æ¡ˆ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">1_000.000_1</span>; <span class="hljs-comment">// ?</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span>: <span class="hljs-type">f32</span> = <span class="hljs-number">0.12</span>; <span class="hljs-comment">// f32</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">z</span> = <span class="hljs-number">0.01_f64</span>; <span class="hljs-comment">// f64</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å°† ? æ›¿æ¢æˆä½ çš„ç­”æ¡ˆ</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">1_000.000_1</span>; <span class="hljs-comment">// f64</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span>: <span class="hljs-type">f32</span> = <span class="hljs-number">0.12</span>; <span class="hljs-comment">// f32</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">z</span> = <span class="hljs-number">0.01_f64</span>; <span class="hljs-comment">// f64</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ-ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è®©ä¸‹é¢ä»£ç å·¥ä½œ"><a href="#8-ğŸŒŸğŸŒŸ-ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è®©ä¸‹é¢ä»£ç å·¥ä½œ" class="headerlink" title="8.ğŸŒŸğŸŒŸ ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è®©ä¸‹é¢ä»£ç å·¥ä½œ"></a>8.ğŸŒŸğŸŒŸ ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è®©ä¸‹é¢ä»£ç å·¥ä½œ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">0.1</span>+<span class="hljs-number">0.2</span>==<span class="hljs-number">0.3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">0.1_f32</span>+<span class="hljs-number">0.2</span>==<span class="hljs-number">0.3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert!</span>((<span class="hljs-number">0.1_f64</span>+ <span class="hljs-number">0.2</span> - <span class="hljs-number">0.3</span>).<span class="hljs-title function_ invoke__">abs</span>() &lt; <span class="hljs-number">0.001</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9-ğŸŒŸğŸŒŸ-ä¸¤ä¸ªç›®æ ‡-1-ä¿®æ”¹-assert-è®©å®ƒå·¥ä½œ-2-è®©-println-è¾“å‡º-97-122"><a href="#9-ğŸŒŸğŸŒŸ-ä¸¤ä¸ªç›®æ ‡-1-ä¿®æ”¹-assert-è®©å®ƒå·¥ä½œ-2-è®©-println-è¾“å‡º-97-122" class="headerlink" title="9.ğŸŒŸğŸŒŸ ä¸¤ä¸ªç›®æ ‡: 1. ä¿®æ”¹ assert! è®©å®ƒå·¥ä½œ 2. è®© println! è¾“å‡º: 97 - 122"></a>9.ğŸŒŸğŸŒŸ ä¸¤ä¸ªç›®æ ‡: 1. ä¿®æ”¹ assert! è®©å®ƒå·¥ä½œ 2. è®© println! è¾“å‡º: 97 - 122</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">sum</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> -<span class="hljs-number">3</span>..<span class="hljs-number">2</span> &#123;<br>        sum += i<br>    &#125;<br><br>    <span class="hljs-built_in">assert!</span>(sum == -<span class="hljs-number">3</span>);<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;a&#x27;</span>..=<span class="hljs-string">&#x27;z&#x27;</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,c);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">sum</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> -<span class="hljs-number">3</span>..<span class="hljs-number">2</span> &#123;<br>        sum += i<br>    &#125;<br><br>    <span class="hljs-built_in">assert!</span>(sum == -<span class="hljs-number">3</span>);<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">c</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;a&#x27;</span>..=<span class="hljs-string">&#x27;z&#x27;</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,c);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-ğŸŒŸğŸŒŸ"><a href="#10-ğŸŒŸğŸŒŸ" class="headerlink" title="10.ğŸŒŸğŸŒŸ"></a>10.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">use</span> std::ops::&#123;Range, RangeInclusive&#125;;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>((<span class="hljs-number">1</span>..__), Range&#123; start: <span class="hljs-number">1</span>, end: <span class="hljs-number">5</span> &#125;);<br>    <span class="hljs-built_in">assert_eq!</span>((<span class="hljs-number">1</span>..__), RangeInclusive::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©º</span><br><span class="hljs-keyword">use</span> std::ops::&#123;Range, RangeInclusive&#125;;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">assert_eq!</span>((<span class="hljs-number">1</span>..<span class="hljs-number">5</span>), Range&#123; start: <span class="hljs-number">1</span>, end: <span class="hljs-number">5</span> &#125;);<br>    <span class="hljs-built_in">assert_eq!</span>((<span class="hljs-number">1</span>..=<span class="hljs-number">5</span>), RangeInclusive::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="11-ğŸŒŸ"><a href="#11-ğŸŒŸ" class="headerlink" title="11.ğŸŒŸ"></a>11.ğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œå¹¶è§£å†³é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// æ•´æ•°åŠ æ³•</span><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">1u32</span> + <span class="hljs-number">2</span> == __);<br><br>    <span class="hljs-comment">// æ•´æ•°å‡æ³•</span><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">1i32</span> - <span class="hljs-number">2</span> == __);<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">1u8</span> - <span class="hljs-number">2</span> == -<span class="hljs-number">1</span>);<br><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">3</span> * <span class="hljs-number">50</span> == __);<br><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">9.6</span> / <span class="hljs-number">3.2</span> == <span class="hljs-number">3.0</span>); <span class="hljs-comment">// error ! ä¿®æ”¹å®ƒè®©ä»£ç å·¥ä½œ</span><br><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">24</span> % <span class="hljs-number">5</span> == __);<br><br>    <span class="hljs-comment">// é€»è¾‘ä¸æˆ–éæ“ä½œ</span><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-literal">false</span> == __);<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-literal">true</span> || <span class="hljs-literal">false</span> == __);<br>    <span class="hljs-built_in">assert!</span>(!<span class="hljs-literal">true</span> == __);<br><br>    <span class="hljs-comment">// ä½æ“ä½œ</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0011 AND 0101 is &#123;:04b&#125;&quot;</span>, <span class="hljs-number">0b0011u32</span> &amp; <span class="hljs-number">0b0101</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0011 OR 0101 is &#123;:04b&#125;&quot;</span>, <span class="hljs-number">0b0011u32</span> | <span class="hljs-number">0b0101</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0011 XOR 0101 is &#123;:04b&#125;&quot;</span>, <span class="hljs-number">0b0011u32</span> ^ <span class="hljs-number">0b0101</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;1 &lt;&lt; 5 is &#123;&#125;&quot;</span>, <span class="hljs-number">1u32</span> &lt;&lt; <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0x80 &gt;&gt; 2 is 0x&#123;:x&#125;&quot;</span>, <span class="hljs-number">0x80u32</span> &gt;&gt; <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¡«ç©ºï¼Œå¹¶è§£å†³é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-comment">// æ•´æ•°åŠ æ³•</span><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">1u32</span> + <span class="hljs-number">2</span> == <span class="hljs-number">3</span>);<br><br>    <span class="hljs-comment">// æ•´æ•°å‡æ³•</span><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">1i32</span> - <span class="hljs-number">2</span> == -<span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">1i8</span> - <span class="hljs-number">2</span> == -<span class="hljs-number">1</span>);<br><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">3</span> * <span class="hljs-number">50</span> == <span class="hljs-number">150</span>);<br><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">9.6_f32</span> / <span class="hljs-number">3.2</span> == <span class="hljs-number">3.0</span>); <span class="hljs-comment">// error ! ä¿®æ”¹å®ƒè®©ä»£ç å·¥ä½œ</span><br><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-number">24</span> % <span class="hljs-number">5</span> == <span class="hljs-number">4</span>);<br><br>    <span class="hljs-comment">// é€»è¾‘ä¸æˆ–éæ“ä½œ</span><br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-literal">false</span> == <span class="hljs-literal">false</span>);<br>    <span class="hljs-built_in">assert!</span>(<span class="hljs-literal">true</span> || <span class="hljs-literal">false</span> == <span class="hljs-literal">true</span>);<br>    <span class="hljs-built_in">assert!</span>(!<span class="hljs-literal">true</span> == <span class="hljs-literal">false</span>);<br><br>    <span class="hljs-comment">// ä½æ“ä½œ</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0011 AND 0101 is &#123;:04b&#125;&quot;</span>, <span class="hljs-number">0b0011u32</span> &amp; <span class="hljs-number">0b0101</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0011 OR 0101 is &#123;:04b&#125;&quot;</span>, <span class="hljs-number">0b0011u32</span> | <span class="hljs-number">0b0101</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0011 XOR 0101 is &#123;:04b&#125;&quot;</span>, <span class="hljs-number">0b0011u32</span> ^ <span class="hljs-number">0b0101</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;1 &lt;&lt; 5 is &#123;&#125;&quot;</span>, <span class="hljs-number">1u32</span> &lt;&lt; <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0x80 &gt;&gt; 2 is 0x&#123;:x&#125;&quot;</span>, <span class="hljs-number">0x80u32</span> &gt;&gt; <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—&quot;&gt;&lt;a href=&quot;#æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—&quot; class=&quot;headerlink&quot; title=&quot;æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—&quot;&gt;&lt;/a&gt;æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåºåˆ—Rangeï¼Œè®¡ç®—&lt;/h1&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>3.å˜é‡ç»‘å®šä¸è§£æ„</title>
    <link href="https://lilinzta.github.io/2023/07/29/3-%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%A7%A3%E6%9E%84/"/>
    <id>https://lilinzta.github.io/2023/07/29/3-%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%A7%A3%E6%9E%84/</id>
    <published>2023-07-28T16:00:00.000Z</published>
    <updated>2024-01-17T15:05:42.361Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼"><a href="#ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼" class="headerlink" title="ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼"></a>ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼</h1><span id="more"></span><h3 id="1-ğŸŒŸ-å˜é‡åªæœ‰åœ¨åˆå§‹åŒ–åæ‰èƒ½è¢«ä½¿ç”¨"><a href="#1-ğŸŒŸ-å˜é‡åªæœ‰åœ¨åˆå§‹åŒ–åæ‰èƒ½è¢«ä½¿ç”¨" class="headerlink" title="1.ğŸŒŸ å˜é‡åªæœ‰åœ¨åˆå§‹åŒ–åæ‰èƒ½è¢«ä½¿ç”¨"></a>1.ğŸŒŸ å˜é‡åªæœ‰åœ¨åˆå§‹åŒ–åæ‰èƒ½è¢«ä½¿ç”¨</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä¸‹é¢ä»£ç çš„é”™è¯¯å¹¶å°½å¯èƒ½å°‘çš„ä¿®æ”¹</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span>; <span class="hljs-comment">// æœªåˆå§‹åŒ–ï¼Œä½†è¢«ä½¿ç”¨</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span>: <span class="hljs-type">i32</span>; <span class="hljs-comment">// æœªåˆå§‹åŒ–ï¼Œä¹Ÿæœªè¢«ä½¿ç”¨</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is equal to &#123;&#125;&quot;</span>, x);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä¸‹é¢ä»£ç çš„é”™è¯¯å¹¶å°½å¯èƒ½å°‘çš„ä¿®æ”¹</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">114</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span>: <span class="hljs-type">i32</span>; <span class="hljs-comment">// æœªåˆå§‹åŒ–ï¼Œä¹Ÿæœªè¢«ä½¿ç”¨</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is equal to &#123;&#125;&quot;</span>, x);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ğŸŒŸğŸŒŸ-å¯ä»¥ä½¿ç”¨-mut-å°†å˜é‡æ ‡è®°ä¸ºå¯å˜"><a href="#2-ğŸŒŸğŸŒŸ-å¯ä»¥ä½¿ç”¨-mut-å°†å˜é‡æ ‡è®°ä¸ºå¯å˜" class="headerlink" title="2.ğŸŒŸğŸŒŸ å¯ä»¥ä½¿ç”¨ mut å°†å˜é‡æ ‡è®°ä¸ºå¯å˜"></a>2.ğŸŒŸğŸŒŸ å¯ä»¥ä½¿ç”¨ mut å°†å˜é‡æ ‡è®°ä¸ºå¯å˜</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®Œå½¢å¡«ç©ºï¼Œè®©ä»£ç ç¼–è¯‘</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">__</span> = <span class="hljs-number">1</span>;<br>    __ += <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x = &#123;&#125;&quot;</span>, x);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å®Œå½¢å¡«ç©ºï¼Œè®©ä»£ç ç¼–è¯‘</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = <span class="hljs-number">1</span>;<br>    x += <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x = &#123;&#125;&quot;</span>, x);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ğŸŒŸ-ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå˜é‡åœ¨ç¨‹åºä¸­èƒ½å¤Ÿä¿æŒåˆæ³•çš„èŒƒå›´"><a href="#3-ğŸŒŸ-ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå˜é‡åœ¨ç¨‹åºä¸­èƒ½å¤Ÿä¿æŒåˆæ³•çš„èŒƒå›´" class="headerlink" title="3.ğŸŒŸ ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå˜é‡åœ¨ç¨‹åºä¸­èƒ½å¤Ÿä¿æŒåˆæ³•çš„èŒƒå›´"></a>3.ğŸŒŸ ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå˜é‡åœ¨ç¨‹åºä¸­èƒ½å¤Ÿä¿æŒåˆæ³•çš„èŒƒå›´</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä¸‹é¢ä»£ç çš„é”™è¯¯å¹¶ä½¿ç”¨å°½å¯èƒ½å°‘çš„æ”¹å˜</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">10</span>;<br>    &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">5</span>;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x çš„å€¼æ˜¯ &#123;&#125;, y çš„å€¼æ˜¯ &#123;&#125;&quot;</span>, x, y);<br>    &#125;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x çš„å€¼æ˜¯ &#123;&#125;, y çš„å€¼æ˜¯ &#123;&#125;&quot;</span>, x, y);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä¸‹é¢ä»£ç çš„é”™è¯¯å¹¶ä½¿ç”¨å°½å¯èƒ½å°‘çš„æ”¹å˜</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">5</span>;<br>    &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x çš„å€¼æ˜¯ &#123;&#125;, y çš„å€¼æ˜¯ &#123;&#125;&quot;</span>, x, y);<br>    &#125;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x çš„å€¼æ˜¯ &#123;&#125;, y çš„å€¼æ˜¯ &#123;&#125;&quot;</span>, x, y);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ğŸŒŸğŸŒŸ"><a href="#4-ğŸŒŸğŸŒŸ" class="headerlink" title="4.ğŸŒŸğŸŒŸ"></a>4.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, world&quot;</span>, x);<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">define_x</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤é”™è¯¯</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-title function_ invoke__">define_x</span>();<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">define_x</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, world&quot;</span>, x);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-ğŸŒŸğŸŒŸ-è‹¥åé¢çš„å˜é‡å£°æ˜çš„åç§°å’Œä¹‹å‰çš„å˜é‡ç›¸åŒï¼Œåˆ™æˆ‘ä»¬è¯´ï¼šç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªåŒåå˜é‡é®è”½äº†-shadowing"><a href="#5-ğŸŒŸğŸŒŸ-è‹¥åé¢çš„å˜é‡å£°æ˜çš„åç§°å’Œä¹‹å‰çš„å˜é‡ç›¸åŒï¼Œåˆ™æˆ‘ä»¬è¯´ï¼šç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªåŒåå˜é‡é®è”½äº†-shadowing" class="headerlink" title="5.ğŸŒŸğŸŒŸ è‹¥åé¢çš„å˜é‡å£°æ˜çš„åç§°å’Œä¹‹å‰çš„å˜é‡ç›¸åŒï¼Œåˆ™æˆ‘ä»¬è¯´ï¼šç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªåŒåå˜é‡é®è”½äº†( shadowing )"></a>5.ğŸŒŸğŸŒŸ è‹¥åé¢çš„å˜é‡å£°æ˜çš„åç§°å’Œä¹‹å‰çš„å˜é‡ç›¸åŒï¼Œåˆ™æˆ‘ä»¬è¯´ï¼šç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªåŒåå˜é‡é®è”½äº†( shadowing )</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// åªå…è®¸ä¿®æ”¹ `assert_eq!` æ¥è®© `println!` å·¥ä½œ(åœ¨ç»ˆç«¯è¾“å‡º `42`)</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">5</span>;<br>    &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">12</span>;<br>        <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">5</span>);<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">12</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">42</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, x); <span class="hljs-comment">// è¾“å‡º &quot;42&quot;.</span><br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// åªå…è®¸ä¿®æ”¹ `assert_eq!` æ¥è®© `println!` å·¥ä½œ(åœ¨ç»ˆç«¯è¾“å‡º `42`)</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">5</span>;<br>    &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">12</span>;<br>        <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">12</span>);<br>    &#125;<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">5</span>);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">42</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, x); <span class="hljs-comment">// è¾“å‡º &quot;42&quot;.</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-ğŸŒŸğŸŒŸ-ä¿®æ”¹ä¸€è¡Œä»£ç ä»¥é€šè¿‡ç¼–è¯‘"><a href="#6-ğŸŒŸğŸŒŸ-ä¿®æ”¹ä¸€è¡Œä»£ç ä»¥é€šè¿‡ç¼–è¯‘" class="headerlink" title="6.ğŸŒŸğŸŒŸ ä¿®æ”¹ä¸€è¡Œä»£ç ä»¥é€šè¿‡ç¼–è¯‘"></a>6.ğŸŒŸğŸŒŸ ä¿®æ”¹ä¸€è¡Œä»£ç ä»¥é€šè¿‡ç¼–è¯‘</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">1</span>;<br>    x = <span class="hljs-number">7</span>;<br>    <span class="hljs-comment">// é®è”½ä¸”å†æ¬¡ç»‘å®š</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = x;<br>    x += <span class="hljs-number">3</span>;<br><br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-number">4</span>;<br>    <span class="hljs-comment">// é®è”½</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-string">&quot;I can also be bound to text!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">1</span>;<br>    x = <span class="hljs-number">7</span>;<br>    <span class="hljs-comment">// é®è”½ä¸”å†æ¬¡ç»‘å®š</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = x;<br>    <span class="hljs-comment">// x += 3;</span><br><br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-number">4</span>;<br>    <span class="hljs-comment">// é®è”½</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = <span class="hljs-string">&quot;I can also be bound to text!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥ä¿®å¤ç¼–è¯‘å™¨è¾“å‡ºçš„-warning"><a href="#7-ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥ä¿®å¤ç¼–è¯‘å™¨è¾“å‡ºçš„-warning" class="headerlink" title="7.ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥ä¿®å¤ç¼–è¯‘å™¨è¾“å‡ºçš„ warning :"></a>7.ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ¥ä¿®å¤ç¼–è¯‘å™¨è¾“å‡ºçš„ warning :</h3><ul><li>ğŸŒŸ ä¸€ç§æ–¹æ³•</li><li>ğŸŒŸğŸŒŸ ä¸¤ç§æ–¹æ³•</li></ul><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-comment">// compiler warning: unused variable: `x`</span><br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">_x</span> = <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-comment">// compiler warning: unused variable: `x`</span><br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[allow(unused_variables)]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-comment">// compiler warning: unused variable: `x`</span><br></code></pre></td></tr></table></figure><h3 id="8-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥å°†-let-è·Ÿä¸€ä¸ªæ¨¡å¼ä¸€èµ·ä½¿ç”¨æ¥è§£æ„ä¸€ä¸ªå…ƒç»„ï¼Œæœ€ç»ˆå°†å®ƒè§£æ„ä¸ºå¤šä¸ªç‹¬ç«‹çš„å˜é‡"><a href="#8-ğŸŒŸğŸŒŸ-æˆ‘ä»¬å¯ä»¥å°†-let-è·Ÿä¸€ä¸ªæ¨¡å¼ä¸€èµ·ä½¿ç”¨æ¥è§£æ„ä¸€ä¸ªå…ƒç»„ï¼Œæœ€ç»ˆå°†å®ƒè§£æ„ä¸ºå¤šä¸ªç‹¬ç«‹çš„å˜é‡" class="headerlink" title="8.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥å°† let è·Ÿä¸€ä¸ªæ¨¡å¼ä¸€èµ·ä½¿ç”¨æ¥è§£æ„ä¸€ä¸ªå…ƒç»„ï¼Œæœ€ç»ˆå°†å®ƒè§£æ„ä¸ºå¤šä¸ªç‹¬ç«‹çš„å˜é‡"></a>8.ğŸŒŸğŸŒŸ æˆ‘ä»¬å¯ä»¥å°† let è·Ÿä¸€ä¸ªæ¨¡å¼ä¸€èµ·ä½¿ç”¨æ¥è§£æ„ä¸€ä¸ªå…ƒç»„ï¼Œæœ€ç»ˆå°†å®ƒè§£æ„ä¸ºå¤šä¸ªç‹¬ç«‹çš„å˜é‡</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä¸‹é¢ä»£ç çš„é”™è¯¯å¹¶å°½å¯èƒ½å°‘çš„ä¿®æ”¹</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> (x, y) = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>    x += <span class="hljs-number">2</span>;<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä¿®å¤ä¸‹é¢ä»£ç çš„é”™è¯¯å¹¶å°½å¯èƒ½å°‘çš„ä¿®æ”¹</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> (<span class="hljs-keyword">mut</span> x, y) = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>    x += <span class="hljs-number">2</span>;<br><br>    <span class="hljs-built_in">assert_eq!</span>(x, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(y, <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9-ğŸŒŸğŸŒŸ"><a href="#9-ğŸŒŸğŸŒŸ" class="headerlink" title="9.ğŸŒŸğŸŒŸ"></a>9.ğŸŒŸğŸŒŸ</h3><p>Q:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> (x, y);<br>    (x,..) = (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br>    [.., y] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-built_in">assert_eq!</span>([x,y], __);<br>&#125;<br></code></pre></td></tr></table></figure><p>A:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> (x, y);<br>    (x,..) = (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br>    [.., y] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br>    <span class="hljs-comment">// å¡«ç©ºï¼Œè®©ä»£ç å·¥ä½œ</span><br>    <span class="hljs-built_in">assert_eq!</span>([x,y], [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>]);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼&quot;&gt;&lt;a href=&quot;#ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼&quot; class=&quot;headerlink&quot; title=&quot;ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼&quot;&gt;&lt;/a&gt;ç»‘å®šå’Œå¯å˜æ€§ï¼Œå˜é‡ä½œç”¨åŸŸï¼Œå˜é‡é®è”½ï¼Œæœªä½¿ç”¨çš„å˜é‡ï¼Œå˜é‡è§£æ„ï¼Œç»“æ„å¼èµ‹å€¼&lt;/h1&gt;</summary>
    
    
    
    <category term="Rust By Practice" scheme="https://lilinzta.github.io/categories/Rust-By-Practice/"/>
    
    
    <category term="Rust" scheme="https://lilinzta.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>Arch base install</title>
    <link href="https://lilinzta.github.io/2023/07/16/Arch-base-install/"/>
    <id>https://lilinzta.github.io/2023/07/16/Arch-base-install/</id>
    <published>2023-07-15T16:00:00.000Z</published>
    <updated>2024-01-20T11:50:01.919Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch-Linuxçš„å¤§è‡´æ­¥éª¤"><a href="#è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch-Linuxçš„å¤§è‡´æ­¥éª¤" class="headerlink" title="è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch Linuxçš„å¤§è‡´æ­¥éª¤"></a>è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch Linuxçš„å¤§è‡´æ­¥éª¤</h1><span id="more"></span><blockquote><p>update timeï¼š2023-4-16</p></blockquote><h3 id="0-è¿æ¥wifi"><a href="#0-è¿æ¥wifi" class="headerlink" title="0.è¿æ¥wifi"></a>0.è¿æ¥wifi</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">iwctl<br>station wlan0 scan<br>station wlan0 get-networks<br>station wlan0 connect SSID<br><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure><h3 id="1-ç¡®ä¿UEFIæ¨¡å¼å¯åŠ¨"><a href="#1-ç¡®ä¿UEFIæ¨¡å¼å¯åŠ¨" class="headerlink" title="1.ç¡®ä¿UEFIæ¨¡å¼å¯åŠ¨"></a>1.ç¡®ä¿UEFIæ¨¡å¼å¯åŠ¨</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> /sys/firmware/efi/efivars<br></code></pre></td></tr></table></figure><h3 id="2-ç¦ç”¨è‡ªåŠ¨æ›´æ–°mirrorlistçš„reflector"><a href="#2-ç¦ç”¨è‡ªåŠ¨æ›´æ–°mirrorlistçš„reflector" class="headerlink" title="2.ç¦ç”¨è‡ªåŠ¨æ›´æ–°mirrorlistçš„reflector"></a>2.ç¦ç”¨è‡ªåŠ¨æ›´æ–°mirrorlistçš„reflector</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">systemctl stop reflector.service<br></code></pre></td></tr></table></figure><h3 id="3-æ£€æŸ¥æ—¶é’ŸæœåŠ¡çŠ¶æ€"><a href="#3-æ£€æŸ¥æ—¶é’ŸæœåŠ¡çŠ¶æ€" class="headerlink" title="3.æ£€æŸ¥æ—¶é’ŸæœåŠ¡çŠ¶æ€"></a>3.æ£€æŸ¥æ—¶é’ŸæœåŠ¡çŠ¶æ€</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">timedatectl status<br></code></pre></td></tr></table></figure><h3 id="4-æ¢æº"><a href="#4-æ¢æº" class="headerlink" title="4.æ¢æº"></a>4.æ¢æº</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">vim /etc/pacman.d/mirrorlist<br>Server = https://mirrors.ustc.edu.cn/archlinux/<span class="hljs-variable">$repo</span>/os/<span class="hljs-variable">$arch</span><br>Server = https://mirrors.hit.edu.cn/archlinux/<span class="hljs-variable">$repo</span>/os/<span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><h3 id="5-åˆ†åŒº"><a href="#5-åˆ†åŒº" class="headerlink" title="5.åˆ†åŒº"></a>5.åˆ†åŒº</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cfdisk /dev/sd(x)<br></code></pre></td></tr></table></figure><h3 id="6-æ ¼å¼åŒ–"><a href="#6-æ ¼å¼åŒ–" class="headerlink" title="6.æ ¼å¼åŒ–"></a>6.æ ¼å¼åŒ–</h3><p>&#x2F;å’Œ&#x2F;homeæ ¼å¼åŒ–æˆext4ç±»å‹ï¼ŒEFIåˆ†åŒºæ ¼å¼åŒ–æˆvfatç±»å‹ï¼Œäº¤æ¢åˆ†åŒºä½¿ç”¨mkswapåˆå§‹åŒ–</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">mkfs.ext4 /dev/root_part<br>mkfs.vfat /efi_system_part<br>mkswap /dev/swap_part<br></code></pre></td></tr></table></figure><h3 id="7-æŒ‚è½½"><a href="#7-æŒ‚è½½" class="headerlink" title="7.æŒ‚è½½"></a>7.æŒ‚è½½</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">mount /dev/root_part /mnt<br>mount --<span class="hljs-built_in">mkdir</span> /dev/efi_system_part /mnt/boot<br>swapon /dev/swap_part<br></code></pre></td></tr></table></figure><h3 id="8-å®‰è£…å¿…éœ€çš„è½¯ä»¶åŒ…"><a href="#8-å®‰è£…å¿…éœ€çš„è½¯ä»¶åŒ…" class="headerlink" title="8.å®‰è£…å¿…éœ€çš„è½¯ä»¶åŒ…"></a>8.å®‰è£…å¿…éœ€çš„è½¯ä»¶åŒ…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">pacstrap /mnt base base-devel linux linux-firmware dhcpcd iwd networkmanager wireless_tools wpa_supplicant vim git<br></code></pre></td></tr></table></figure><h3 id="9-é…ç½®ç³»ç»Ÿ"><a href="#9-é…ç½®ç³»ç»Ÿ" class="headerlink" title="9.é…ç½®ç³»ç»Ÿ"></a>9.é…ç½®ç³»ç»Ÿ</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># Fstab</span><br>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab<br><br><span class="hljs-comment"># Chroot</span><br>arch-chroot /mnt<br><br><span class="hljs-comment"># è®¾ç½®ä¸Šæµ·æ—¶åŒº</span><br><span class="hljs-built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<br><br><span class="hljs-comment"># åŒæ­¥ç³»ç»Ÿæ—¶é—´åˆ°ç¡¬ä»¶</span><br>hwclock --systohc<br><br><span class="hljs-comment"># æœ¬åœ°åŒ–</span><br>vim /etc/locale.gen<br>locale-gen<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;LANG=en_US.UTF-8&quot;</span> &gt; /etc/locale.conf<br><br><span class="hljs-comment"># å®‰è£…å¾®ç </span><br>pacman -S intel-ucode  <span class="hljs-comment"># Intel</span><br>pacman -S amd-ucode   <span class="hljs-comment"># AMD</span><br><br><span class="hljs-comment"># å®‰è£…grubå¼•å¯¼</span><br>pacman -S grub efibootmgr<br>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub<br>grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure><h3 id="10-å®Œæˆå®‰è£…"><a href="#10-å®Œæˆå®‰è£…" class="headerlink" title="10.å®Œæˆå®‰è£…"></a>10.å®Œæˆå®‰è£…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># è®¾ç½®å¯†ç </span><br>passwd<br><span class="hljs-comment"># exit</span><br>umount -R /mnt<br>reboot<br></code></pre></td></tr></table></figure><h3 id="11-å›¾å½¢åŒ–å®‰è£…"><a href="#11-å›¾å½¢åŒ–å®‰è£…" class="headerlink" title="11.å›¾å½¢åŒ–å®‰è£…"></a>11.å›¾å½¢åŒ–å®‰è£…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh">pacman -Syyu<br>useradd -m -G wheel -s /bin/bash username<br>passwd username<br>EDITOR=vim visudo<br><span class="hljs-comment"># wheel ALL=(ALL)ALL ---&gt; wheel ALL=(ALL)ALL</span><br><br>pacman -S plasma-meta konsole dolphin<br>systemctl <span class="hljs-built_in">enable</span> sddm<br><br><span class="hljs-comment"># vim /etc/pacman.conf</span><br>[archlinuxcn]<br>SigLevel = Optional TrustAll<br>Server = https://mirrors.ustc.edu.cn/archlinuxcn/<span class="hljs-variable">$arch</span><br>pacman -Syyu<br></code></pre></td></tr></table></figure><h3 id="12-åŸºç¡€åŠŸèƒ½åŒ…"><a href="#12-åŸºç¡€åŠŸèƒ½åŒ…" class="headerlink" title="12.åŸºç¡€åŠŸèƒ½åŒ…"></a>12.åŸºç¡€åŠŸèƒ½åŒ…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo pacman -S ntfs-3g wqy-zenhei noto-fonts noto-fonts-cjk noto-fonts.emoji firefox yay<br><br><span class="hljs-comment"># fcitx5ä¸­æ–‡è¾“å…¥æ³•</span><br>sudo pacman -S fcitx5-im fcitx5-chinese-addons fcitx5-pinyin-moegirl fcitx5-pinyin-zhwiki<br>yay -S fcitx5-material-color<br>vim /etc/environment<br>GTK_IM_MODULE=fcitx<br>XMODIFIERS=@im=fcitx<br>QT_IM_MODULE=fcitx<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch-Linuxçš„å¤§è‡´æ­¥éª¤&quot;&gt;&lt;a href=&quot;#è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch-Linuxçš„å¤§è‡´æ­¥éª¤&quot; class=&quot;headerlink&quot; title=&quot;è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch Linuxçš„å¤§è‡´æ­¥éª¤&quot;&gt;&lt;/a&gt;è®°å½•äº†æˆ‘æ›¾ç»å®‰è£…Arch Linuxçš„å¤§è‡´æ­¥éª¤&lt;/h1&gt;</summary>
    
    
    
    
    <category term="Arch Linux" scheme="https://lilinzta.github.io/tags/Arch-Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://lilinzta.github.io/2023/07/16/hello-world/"/>
    <id>https://lilinzta.github.io/2023/07/16/hello-world/</id>
    <published>2023-07-15T16:00:00.000Z</published>
    <updated>2024-01-17T15:05:42.365Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Welcome-to-Hexo"><a href="#Welcome-to-Hexo" class="headerlink" title="Welcome to Hexo!"></a>Welcome to <a href="https://hexo.io/">Hexo</a>!</h1><span id="more"></span><p>This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Welcome-to-Hexo&quot;&gt;&lt;a href=&quot;#Welcome-to-Hexo&quot; class=&quot;headerlink&quot; title=&quot;Welcome to Hexo!&quot;&gt;&lt;/a&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;!&lt;/h1&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
